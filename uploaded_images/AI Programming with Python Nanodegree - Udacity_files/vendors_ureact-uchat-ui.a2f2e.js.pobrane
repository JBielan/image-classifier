(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{2187:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.__=t.i18n=void 0;var r=n(3898),o=function(e){return e&&e.__esModule?e:{default:e}}(n(12));var a=t.i18n=new r.I18n(n(3904),{moment:o.default});t.__=a.__},2188:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Screens={HOME:"home",CHAT:"chat",PROFILE:"profile",THREAD:"thread",THREADLIST:"threadlist"},t.Keycodes={ENTER:13},t.EventTypes={HANDSHAKE:"handshake",ACCEPTED:"accepted",JOINED:"joined",QUIT:"quit",MESSAGE:"message",ACTIVITY:"activity",REPLY:"reply"},t.RoomTypes={COHORT:"cohort",PART:"part",PROJECT:"project",THREAD:"thread"},t.RoleTypes={COMMUNITY_MANAGER:"community_manager",MENTOR:"mentor",STAFF:"staff"},t.ScrollType={ABSOLUTE:"absolute",BOTTOM:"bottom",TOP:"top",RELATIVE:"relative",MSG:"msg",NOOP:"noop"},t.MESSAGE_FETCH_COUNT=40,t.MESSAGE_FETCH_DELAY=500,t.NUM_THREAD_PARTICIPANTS_PREVIEW=2,t.MAX_NEW_MESSAGES=7,t.UNREAD_MESSAGE_DELAY=4e3,t.MAX_HEADER_TITLE_CHARS=23,t.MAX_CHATROOM_LIST_TITLE_CHARS=23,t.MAX_LESSONS_TITLE_CHARS=54,t.MAX_PROJECT_TITLE_CHARS=50,t.MAX_MSG_TIME_DIFF=15,t.MAX_KNOWLEDGE_LINK_TITLE=200,t.MIN_ACTIVE_STUDENTS=5,t.MAX_PROFILE_MODAL_WIDTH="25em",t.MAX_AUTH_TOKEN_ERRORS=3,t.PARTICIPANT_BATCH_SIZE=30,t.PARTICIPANT_SCROLLING_DEBOUNCE=100,t.LinkTypes={KNOWLEDGE:"knowledge"}},2190:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CLEAR_ALL:"CLEAR_ALL",FETCH_CHAT_ROOMS:"FETCH_CHAT_ROOMS",FETCH_CHAT_ROOMS_COMPLETE:"FETCH_CHAT_ROOMS_COMPLETE",UPDATE_MESSAGES:"UPDATE_MESSAGES",UPDATE_MESSAGES_COMPLETE:"UPDATE_MESSAGES_COMPLETE",UPDATE_MESSAGES_FAILURE:"UPDATE_MESSAGES_FAILURE",UPDATE_LAST_VISITED:"UPDATE_LAST_VISITED",UPDATE_LAST_VISITED_COMPLETE:"UPDATE_LAST_VISITED_COMPLETE",UPDATE_SCREEN:"UPDATE_SCREEN",PUSH_SCREEN:"PUSH_SCREEN",POP_SCREEN:"POP_SCREEN",UPDATE_WINDOW:"UPDATE_WINDOW",SET_USER_DATA:"SET_USER_DATA",FETCH_ROOM:"FETCH_ROOM",FETCH_ROOM_COMPLETE:"FETCH_ROOM_COMPLETE",LEAVE_ROOM:"LEAVE_ROOM",CLEAR_EVENT_LIST:"CLEAR_EVENT_LIST",FETCH_MORE_MESSAGES:"FETCH_MORE_MESSAGES",FETCH_MORE_MESSAGES_COMPLETE:"FETCH_MORE_MESSAGES_COMPLETE",FETCH_PROFILE:"FETCH_PROFILE",FETCH_PROFILE_COMPLETE:"FETCH_PROFILE_COMPLETE",FETCH_PARTICIPANTS:"FETCH_PARTICIPANTS",FETCH_PARTICIPANTS_COMPLETE:"FETCH_PARTICIPANTS_COMPLETE",CLEAR_PARTICIPANTS:"CLEAR_PARTICIPANTS",LOAD_PROFILES:"LOAD_PROFILES",RESOLVED_PROFILES:"RESOLVED_PROFILES",CREATE_PROFILE:"CREATE_PROFILE",CREATE_PROFILE_COMPLETE:"CREATE_PROFILE_COMPLETE",UPDATE_PROFILE:"UPDATE_PROFILE",UPDATE_PROFILE_COMPLETE:"UPDATE_PROFILE_COMPLETE",SOCKET_OPEN:"SOCKET_OPEN",SOCKET_CLOSE:"SOCKET_CLOSE",SOCKET_EVENT:"SOCKET_EVENT",SOCKET_CONNECTED:"SOCKET_CONNECTED",SOCKET_DISCONNECTED:"SOCKET_DISCONNECTED",CREATE_TOAST:"CREATE_TOAST",REMOVE_TOAST:"REMOVE_TOAST",JUMP_TO:"JUMP_TO",JUMP_TO_COMPLETED:"JUMP_TO_COMPLETED"}},2191:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ActionBuilder=void 0,t.actionsBinder=function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return function(t){return e.reduce(n,function(n,o){var a=r.default[o];if(!e.isFunction(a))throw"Unknown action creator: "+o;return n[o]=function(){return t(a.apply(r.default,arguments))},n},{})}},t.createAction=a,t.createAsyncAction=function(t,n,r,o){return function(i,s){i(a(t,{},o));var l=e.partial(a,n);return o&&(l=e.partialRight(l,o)),r(i,s).then(function(e){return i(l(e)),e}).catch(function(e){throw i(l(e)),e})}};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(3986));var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function a(e,t,n){var r=t instanceof Error;return{type:e,payload:r?{stack:t.stack,message:t.message}:t,meta:n,error:r}}t.ActionBuilder=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e,this.payload=n,this.meta={}}return o(t,[{key:"withRoom",value:function(e){return this.meta.roomId=e,this}},{key:"withUser",value:function(e){return this.meta.userId=e,this}},{key:"withActors",value:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return 0===n.length?this:(this.meta.actors||(this.meta.actors=[]),this.meta.actors=e.concat(this.meta.actors,n),this)}},{key:"withLink",value:function(e,t){return this.meta.link={messageID:e,content:t},this}},{key:"build",value:function(){return a(this.type,this.payload,this.meta)}}]),t}()}).call(this,n(4))},2192:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinksShape=t.LinkShape=t.KnowledgeMetadataShape=t.AnswerShape=t.RoomShape=t.SocketShape=t.RoomInfoShape=t.ParticipantShape=t.ProfileShape=t.RoleShape=t.StaffRoleShape=t.MentorRoleShape=t.RoleTypeShape=t.EventsShape=t.EventShape=t.QuitEventPayloadShape=t.JoinEventPayloadShape=t.MessageEventPayloadShape=t.ScreensShape=t.ScreenShape=t.FeaturesShape=void 0;var r=n(2188),o=i(n(0)),a=i(n(2503));function i(e){return e&&e.__esModule?e:{default:e}}t.FeaturesShape=o.default.shape({threadingEnabled:o.default.bool,reportMessageEnabled:o.default.bool,mentionsEnabled:o.default.bool});var s=t.ScreenShape=o.default.shape({screenType:o.default.string,roomTitle:o.default.string,roomId:o.default.string}),l=(t.ScreensShape=o.default.arrayOf(s),t.MessageEventPayloadShape=o.default.shape({message_id:o.default.number.isRequired,message_id_str:o.default.string.isRequired,user_id:o.default.string.isRequired,content:o.default.oneOfType([o.default.shape({content:o.default.string,mentions:o.default.array}),o.default.string]).isRequired,created_at:o.default.string,updated_at:o.default.string})),u=t.JoinEventPayloadShape=o.default.shape({user_id:o.default.string.isRequired}),c=t.QuitEventPayloadShape=o.default.shape({user_id:o.default.string.isRequired});var f=t.EventShape=o.default.shape({type:o.default.string.isRequired,version:o.default.string.isRequired,timestamp:o.default.string.isRequired,room_id:o.default.string.isRequired,payload:function(e,t,n){switch(e.type){case r.EventTypes.JOINED:return o.default.checkPropTypes(c.isRequired,e,t,n);case r.EventTypes.QUIT:return o.default.checkPropTypes(u.isRequired,e,t,n);case r.EventTypes.MESSAGE:return o.default.checkPropTypes(l.isRequired,e,t,n)}return null}}),d=t.EventsShape=o.default.arrayOf(f),p=o.default.shape({id:o.default.number.isRequired,key:o.default.string.isRequired,locale:o.default.string,version:o.default.string,title:o.default.string.isRequired,summary:o.default.string,part_type:o.default.string,locked_reason:o.default.string,locked_until:o.default.number}),h=o.default.shape({id:o.default.number.isRequired,key:o.default.string,locale:o.default.string,version:o.default.string,title:o.default.string}),m=o.default.shape({id:o.default.number,key:o.default.string,locale:o.default.string,version:o.default.string,title:o.default.string.isRequired,is_project_lesson:o.default.bool.isRequired}),y=o.default.shape({part:p,lesson:m,module:h}),v=o.default.shape({location_id:o.default.string.isRequired,description:o.default.string}),g=o.default.shape({type:o.default.string.isRequired,id:o.default.number.isRequired,key:o.default.string.isRequired,locale:o.default.string,version:o.default.string.isRequired,title:o.default.string,is_graduated:o.default.bool}),_=t.RoleTypeShape=o.default.oneOf([r.RoleTypes.COMMUNITY_MANAGER,r.RoleTypes.MENTOR,r.RoleTypes.STAFF]),E=t.MentorRoleShape=o.default.shape({bio:o.default.string,certifications:o.default.arrayOf(o.default.string),rooms:o.default.arrayOf(o.default.string)}),b=t.StaffRoleShape=o.default.shape({bio:o.default.string,rooms:o.default.arrayOf(o.default.string)}),T=t.RoleShape=o.default.shape({type:_.isRequired,payload:function(e,t,n){switch(e.type){case r.RoleTypes.MENTOR:return o.default.checkPropTypes(E.isRequired,e,t,n);case r.RoleTypes.STAFF:return o.default.checkPropTypes(b.isRequired,e,t,n);case r.RoleTypes.COMMUNITY_MANAGER:default:return new Error("Invalid prop `"+t+"` supplied to `"+n+"`. Validation failed.")}}}),O=(t.ProfileShape=o.default.shape({id:o.default.string.isRequired,first_name:o.default.string.isRequired,last_name:o.default.string.isRequired,nanodegrees:o.default.arrayOf(g),location:v,photo_url:o.default.string,roles:o.default.arrayOf(T)}),t.ParticipantShape=o.default.shape({id:o.default.string.isRequired,first:o.default.string.isRequired,is_active:o.default.bool,type:_}),t.RoomInfoShape=o.default.shape({room_id:o.default.string.isRequired,room_type:o.default.string,room_payload:y,num_active:o.default.number.isRequired,is_available:o.default.bool.isRequired})),w=t.SocketShape=o.default.shape({listener:o.default.instanceOf(a.default),heartbeat:o.default.number,connected:o.default.bool}),S=(t.RoomShape=o.default.shape({info:O,events:d,socket:w}),t.AnswerShape=o.default.shape({id:o.default.string.isRequired,verified:o.default.bool.isRequired,accepted:o.default.bool.isRequired})),C=t.KnowledgeMetadataShape=o.default.shape({id:o.default.string.isRequired,title:o.default.string,accepted_id:o.default.string,verified_id:o.default.string,answers:o.default.arrayOf(S)}),P=t.LinkShape=o.default.shape({url:o.default.string,type:o.default.oneOf([r.LinkTypes.KNOWLEDGE]),metadata:o.default.oneOfType([C])});t.LinksShape=o.default.arrayOf(P)},2195:function(e,t,n){e.exports={"std-font-9":"styles--std-font-9--lIVYZ","project-font":"styles--project-font--2Ng5l","std-font-12":"styles--std-font-12--2FWDI","room-title-font":"styles--room-title-font--mJaVa","user-font":"styles--user-font--5-aFw","message-content-user":"styles--message-content-user--3fdr6","message-content-time":"styles--message-content-time--3s4UG","mentor-badge":"styles--mentor-badge--2H2WP","staff-badge":"styles--staff-badge--F19Vb","room-header":"styles--room-header--2umzN","new-msg-links":"styles--new-msg-links--1o_8U","message-content-thread":"styles--message-content-thread--3TDGQ","std-font-14":"styles--std-font-14--3biFd","message-content-actions-more":"styles--message-content-actions-more--25NZ0","action-label":"styles--action-label--oDOI7","message-content":"styles--message-content--3f10T","notice-content":"styles--notice-content--yolkB","connection-lost":"styles--connection-lost--2u_XC","input-msg":"styles--input-msg--1916A","room-loading-error":"styles--room-loading-error--1JfX9",inner:"styles--inner--1SLR-","std-font-16":"styles--std-font-16--3gVN5","std-font-18":"styles--std-font-18--3k2Mc","chatroom-title-font":"styles--chatroom-title-font--2kb3I","screen-content":"styles--screen-content--25YQv","profiles-pane":"styles--profiles-pane--e_f4N",circle:"styles--circle--DvzhI","gray-light":"styles--gray-light--3h5MY",turquoise:"styles--turquoise--2N3Mi","avatar-circle":"styles--avatar-circle--ta_y3","avatar-circle-default":"styles--avatar-circle-default--3wX4Z","role-mentor":"styles--role-mentor--2A0n9","role-staff":"styles--role-staff--_IMLX","avatar-img":"styles--avatar-img--11Y4U","avatar-default":"styles--avatar-default--3W0dB",clearfix:"styles--clearfix--1g9Yo","rel-pos":"styles--rel-pos--2t9TI",invisible:"styles--invisible--2_8EY",photo:"styles--photo--1Irt0","no-photo":"styles--no-photo--v1WbF","no-margin":"styles--no-margin--2YaDQ","room-container":"styles--room-container--3ceXI","room-container-inner":"styles--room-container-inner--3JkxV",hide:"styles--hide--3qT-c",room:"styles--room--2GOOS","room-header-mask":"styles--room-header-mask--q7Jiv","thread-header":"styles--thread-header--mhXY-","thread-header-message":"styles--thread-header-message--ORAFe","msg-list":"styles--msg-list--Z4aUY","new-msg-links-inner":"styles--new-msg-links-inner--1dGDg","mark-read":"styles--mark-read--2ZNhx","mark-read-close":"styles--mark-read-close--3VQpG","msg-list-inner":"styles--msg-list-inner--3Dd7Q","msg-list-message-container":"styles--msg-list-message-container--bWuwH","same-as-prev":"styles--same-as-prev--1dKcI","same-as-next":"styles--same-as-next--2JUf8","message-container":"styles--message-container--Ey34w","message-avatar":"styles--message-avatar--2C2mr","message-avatar-link":"styles--message-avatar-link--1d2CS","message-content-container":"styles--message-content-container--3dG4M","this-user":"styles--this-user--3Z8VW","other-user":"styles--other-user--Lthup","thread-user":"styles--thread-user--1lFSP","message-content-container-inner":"styles--message-content-container-inner--3ax6H","message-content-meta":"styles--message-content-meta--1QcDR","message-content-row":"styles--message-content-row--1W3zq","message-content-actions-container":"styles--message-content-actions-container--23Do1",active:"styles--active--2XQS5","message-content-actions-standard":"styles--message-content-actions-standard--3BVU1","message-content-actions-more-container":"styles--message-content-actions-more-container--29rKk",last:"styles--last--Z39Jx","message-triangle":"styles--message-triangle--Hn1wt",triangle:"styles--triangle--irwrg",notice:"styles--notice--2OwCc",highlight:"styles--highlight--3a9nn",error:"styles--error--2QAhP","with-lines":"styles--with-lines--2f3vX","fetching-more":"styles--fetching-more--1hdVr",show:"styles--show--1ScBT","input-fields":"styles--input-fields--u0VC3","input-label":"styles--input-label--2I7o0","profile-parent":"styles--profile-parent--2hway","profile-inner-content":"styles--profile-inner-content--20679","profile-outer-content":"styles--profile-outer-content--1galY","participant-avatar":"styles--participant-avatar--2EszD","activity-circle":"styles--activity-circle--3HRqF","profile-avatar":"styles--profile-avatar--3ljVH",inactive:"styles--inactive--3xd-f","participant-avatar-default-letter":"styles--participant-avatar-default-letter--2U55m","profile-modal":"styles--profile-modal--1Zp02","badge-icon":"styles--badge-icon--3SDee","mentor-badge-label":"styles--mentor-badge-label--iKoHg","staff-badge-label":"styles--staff-badge-label--2aMQU","thread-notification":"styles--thread-notification--djW1C","thread-mention":"styles--thread-mention--1GsbE"}},2197:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.updateParticipants=function(t,n,r,o){if(!n)return t;if(!e.get(t,"loaded",!1))return t;var a=e.findIndex(t.admins,{id:n.id});if(a>=0){var l=t.admins;return i({},t,{admins:[].concat(s(e.slice(l,0,a)),[i({},l[a],{is_active:o})],s(e.slice(l,a+1)))})}var u={id:n.id,first:n.first_name},c=function(e){return r===e.id&&o?"0-"+e.first.toLowerCase():"1-"+e.first.toLowerCase()},f=e.filter(t.inactive,function(e){return e.id!==n.id}),d=e.filter(t.active,function(e){return e.id!==n.id});if(o){var p=e.sortedIndexBy(d,u,c);d.splice(p,0,u)}else{var h=e.sortedIndexBy(f,u,c);f.splice(h,0,u)}return i({},t,{active:d,inactive:f})},t.toListKey=function(e){switch(e.type){case r.EventTypes.MESSAGE:return e.payload.user_id+"-"+e.payload.message_id;case r.EventTypes.JOINED:case r.EventTypes.QUIT:return e.payload.user_id+"-"+e.timestamp+"-"+(e.payload.users||[]).length;default:return(0,a.default)(!1,"unexpected event "+e.type+" received"),(new Date).toISOString()}},t.getElementsInView=function(t,n){for(var r={getBoundingClientRect:function(){return{y:t.y,height:0}}},o=[],a=e.sortedIndexBy(n,r,function(e){var t=e.getBoundingClientRect();return t.y+.5*t.height});a<n.length&&l(t,n[a]);a++)o.push(n[a]);return o},t.getNewEvents=function(e,t){if(0===e.length)return t;if(e.length>t.length)return[];return t.slice(e.length)},t.isEventInView=l,t.getRoomTitle=function(t){switch(t.room_type){case r.RoomTypes.COHORT:return(0,o.__)("My Classmates");case r.RoomTypes.PART:return e.truncate(e.get(t,"room_payload.part.title",""),{length:r.MAX_LESSONS_TITLE_CHARS,separator:" "});case r.RoomTypes.PROJECT:var n=e.get(t,"room_payload.lesson.title","");return e.truncate(n,{length:r.MAX_PROJECT_TITLE_CHARS,separator:" "});default:(0,a.default)(!1,"unexpected room_type "+t.room_type+" encountered")}},t.isMentorInRoom=u,t.isMessageFromMentor=function(t,n){var r=e.has(t,"parent_room_id")?t.parent_room_id:t.room_id;return u(n,r)},t.isStaffInRoom=c,t.isMessageFromStaff=function(t,n){var r=e.has(t,"parent_room_id")?t.parent_room_id:t.room_id;return c(n,r)},t.getRoomId=function(t){return e.get(t,"info.room_type")===r.RoomTypes.THREAD?e.get(t,"info.room_payload.room_id"):e.get(t,"info.room_id")};var r=n(2188),o=n(2187),a=function(e){return e&&e.__esModule?e:{default:e}}(n(22));var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e,t){var n=t.getBoundingClientRect();return n.y+.5*n.height>=e.y&&n.y+.5*n.height<=e.y+e.height}function u(t,n){return e.chain(t.roles).filter(function(e){return e.type===r.RoleTypes.MENTOR}).map(function(e){return e.payload.rooms}).flatten().filter(function(e){return e===n}).size().value()>0}function c(t,n){return e.chain(t.roles).filter(function(e){return e.type===r.RoleTypes.STAFF}).map(function(e){return e.payload.rooms}).flatten().filter(function(e){return e===n}).size().value()>0}}).call(this,n(4))},2198:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserName=s,t.firstLetter=function(t){if(!e.isString(t))return t;var n=t.codePointAt(0);if(!n)return t;return String.fromCodePoint(n)},t.selectRandomString=function(e){return e[Math.floor(Math.random()*e.length)]},t.makeActiveStudentsMsg=function(e){return e<r.MIN_ACTIVE_STUDENTS?(0,o.__)("Start Chatting!"):(0,o.__)("<%= count %> classmates active",{count:e})},t.makeSupportEmail=function(t){var n=e.get(a.supportEmails,"default");return e.get(a.supportEmails,t.toLowerCase(),n)},t.generateSessionIDString=function(e,t){return e+"-"+t.toString()+"-"+Date.now().toString()},t.makeJoinedNotice=function(e,t,n){var r=s(t[e[0]].first_name,t[e[0]].last_name,!0),a=s(t[e[e.length-1]].first_name,t[e[e.length-1]].last_name,!0);if(1===e.length)return(0,o.__)("<%= student1 %> has joined<%=timestamp%>.",{student1:r,timestamp:n});if(2===e.length)return(0,o.__)("<%= student1 %> and <%= lastStudent %> have joined<%= timestamp %>.",{student1:r,lastStudent:a,timestamp:n});if(e.length>=3&&e.length<=6){var i=e.slice(0,e.length-1).map(function(e){return s(t[e].first_name,t[e].last_name,!0)}).join(", ");return(0,o.__)("<%= studentList %>, and <%= lastStudent %> have joined<%= timestamp %>.",{studentList:i,lastStudent:a,timestamp:n})}if(e.length>6)return(0,o.__)("+<%= count %> students have joined<%= timestamp %>.",{count:e.length,timestamp:n})},t.makeUserList=function(e,t){return l(e,t,{trailing:!1})},t.makeUserListRight=function(e,t){return l(e,t,{trailing:!0})},t.classmatesCountMessage=function(e,t){var n=Math.max(0,e?t:t-1);if(0===n)return"";if(1===n)return(0,o.__)("<%= numClassmates %> classmate",{numClassmates:n});return(0,o.__)("<%= numClassmates %> classmates",{numClassmates:n})},t.makeThreadRepliesMessage=function(e){if(1===e)return(0,o.__)("View 1 reply",{count:e});return(0,o.__)("View <%= count %> replies",{count:e})},t.makeThreadRepliesSummary=function(e){if(1===e)return(0,o.__)("1 reply",{count:e});return(0,o.__)("<%= count %> replies",{count:e})},t.displayMentionCount=function(e){if(e<1)return"";if(e>=99)return"99";return e};var r=n(2188),o=n(2187),a=n(2348),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function s(t,n,r){if(!e.isString(n))return t;var o=n.codePointAt(0);return o?t+" "+String.fromCodePoint(o).toUpperCase()+(r?"":"."):t}function l(t,n,r){var a=r.trailing,s=e.chain(t).filter(function(t){return e.has(n,t)}).map(function(e){return n[e].first_name}).value(),l=a?e.takeRight(s,5):s;if(e.isEmpty(l))return"";var u=e.zipObject(["student1","student2","student3","student4","student5"],l);switch(s.length){case 1:return l[0];case 2:return(0,o.__)("<%= student1 %> and <%= student2 %>",u);case 3:return(0,o.__)("<%= student1 %>, <%= student2 %>, and <%= student3 %>",u);case 4:return(0,o.__)("<%= student1 %>, <%= student2 %>, <%= student3 %>, and <%= student4 %>",u);case 5:return(0,o.__)("<%= student1 %>, <%= student2 %>, <%= student3 %>, <%= student4 %>, and <%= student5 %>",u);case 6:return(0,o.__)("<%= student1 %>, <%= student2 %>, <%= student3 %>, <%= student4 %>, <%= student5 %>, and 1 other",u);default:return(0,o.__)("<%= student1 %>, <%= student2 %>, <%= student3 %>, <%= student4 %>, <%= student5 %>, and <%= count %> others",i({},u,{count:e.size(s)-e.size(u)}))}}}).call(this,n(4))},2206:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var o=n(2188),a=l(n(2259)),i=l(n(203)),s=n(2197);function l(e){return e&&e.__esModule?e:{default:e}}var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var f=function(e,t){return i.default.makeGetRequest(a.default.communityApiUrl,e,t)},d=function(e,t){return i.default.makePostRequest(a.default.communityApiUrl,e,t)};t.default={fetchChatRooms:function(t){return f("/myNanodegreeRooms?ndid="+t).then(function(t){var n=e.chain(t.rooms).filter(function(e){return e.room_type===o.RoomTypes.COHORT||e.room_type===o.RoomTypes.PROJECT}).map(function(e){return u({},e,{room_title:(0,s.getRoomTitle)(e)})}).value(),r=e.keyBy(n,"room_id"),a=e.filter(t.threads,function(t){return e.has(r,t.room_payload.room_id)}),i=e.map(a,function(t){return e.get(t,"room_id")}),l=e.pick(t.notifications,[].concat(c(e.keys(r)),c(i)));return u({},t,{rooms:n,threads:a,notifications:l})})},updateLastVisited:function(e,t,n){return d("/unread/update",{room_id:e,last_visited:t}).then(function(){return{roomId:e,lastVisited:t,numNextMessages:n}})},fetchRoom:function(e){return f("/rooms/"+encodeURIComponent(e))},fetchThread:function(e,t){return f("/threads/"+encodeURIComponent(e)+"/"+encodeURIComponent(t))},fetchNotifications:function(t){return f("/unread?rooms="+e.join(t.map(encodeURIComponent)))},fetchMessages:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r={count:arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.MESSAGE_FETCH_COUNT};return t&&(r.before=t),n&&(r.after=n),f("/messages/"+encodeURIComponent(e),{params:r})},postMessage:function(e,t){return d("/messages/"+encodeURIComponent(t),e)},replyTo:function(e,t,n){return d("/messages/"+encodeURIComponent(e),u({},n,{reply_to:t}))},fetchConnectToken:function(t){return f("/tokens?rooms="+e.join(t.map(encodeURIComponent)))},fetchProfile:function(){return f("/profiles/me")},createProfile:function(e){return d("/profiles/me",e)},updateProfile:function(e){return d("/profiles/me/update",e)},viewProfiles:function(t,n){if(!n||0===n.length)return r.resolve([]);var o={user_ids:e.join(e.map(n,function(t){return e.trim(t)}),",")};return f("/profiles/room/"+encodeURIComponent(t),{params:o})},viewParticipants:function(e){return f("/participants/"+encodeURIComponent(e))},loadURLLinksInfo:function(e,t){var n={content:t};return f("/messages/links/"+encodeURIComponent(e),{params:n})}}}).call(this,n(4),n(7))},2217:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.UCHAT_START="UChat Start Session",t.UCHAT_END="UChat End Session",t.CHATLIST_OPEN="UChat List Open",t.PROFILE_BAR_OPEN="UChat Profiles Bar Open",t.PROFILE_BAR_CLOSE="UChat Profiles Bar Close",t.SEND_MESSAGE="UChat Send Message",t.SAVE_PROFILE="UChat Save Profile",t.VIEW_PROFILE="UChat View Profile",t.DISPLAY_PROFILE="UChat Display Profile",t.REPORT_BEHAVIOR="UChat Report Behavior",t.ENTER_ROOM="UChat Enter Room",t.LEAVE_ROOM="UChat Leave Room",t.ACTION_REPORT_MESSAGE="UChat Action Report Message",t.ACTION_VIEW_THREAD="UChat Action View Thread",t.ACTION_VIEW_MORE="UChat Action More"},2218:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2259));var o=(0,n(3907).createAgent)();o.init(r.default.segmentWriteKey,!0).catch(console.warn),t.default=o},2229:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ERR_UNABLE_TO_LOAD="Unable to load chat rooms, please try again.",t.ERR_UNABLE_TO_LOAD_ROOM="Unable to load chat room, please try again.",t.ERR_UNABLE_TO_SEND_MSG="Unable to send message",t.ERR_UNABLE_TO_FETCH_MSG="Unable to fetch more messages, please try again.",t.ERR_CONNECTION_LOST="You are no longer connected to the chat room. Check your connection and reload the page.",t.ERR_CONNECTION_RECONNECT="You are no longer connected to the chat room. Attempting to reconnect...",t.ALERT_RECONNECT="Reconnecting",t.ALERT_CONNECTION_LOST="Connection Lost"},2230:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultPropsDecorator=t.defaultStyle=t.EnhancerProvider=t.createSubstyle=void 0;var r=s(n(2512)),o=s(n(3974)),a=s(n(3976)),i=s(n(2529));function s(e){return e&&e.__esModule?e:{default:e}}t.createSubstyle=r.default,t.EnhancerProvider=a.default,t.defaultStyle=o.default,t.defaultPropsDecorator=i.default,t.default=(0,o.default)()},2231:function(e,t,n){e.exports={"std-font-9":"styles--std-font-9--1oR8f","project-font":"styles--project-font--1LNig","std-font-12":"styles--std-font-12--2F7kg","room-title-font":"styles--room-title-font--2jgQi","user-font":"styles--user-font--i2IBf","std-font-14":"styles--std-font-14--1CWhF",title:"styles--title--1snBE","close-btn":"styles--close-btn--2T4JM","back-btn":"styles--back-btn--2WCEb","std-font-16":"styles--std-font-16--2f6Rk","std-font-18":"styles--std-font-18--X-Unj","chatroom-title-font":"styles--chatroom-title-font--3OImB","screen-content":"styles--screen-content--2Mr7H",homescreen:"styles--homescreen--34sF0",chatscreen:"styles--chatscreen--1Zhqs","thread-screen":"styles--thread-screen--2PRas","thread-list-screen":"styles--thread-list-screen--29wyF",circle:"styles--circle--3CMbd","gray-light":"styles--gray-light--lwIrP",turquoise:"styles--turquoise--VDXP8","avatar-circle":"styles--avatar-circle--2zmLc","avatar-circle-default":"styles--avatar-circle-default--2u9Hh","role-mentor":"styles--role-mentor--2WwzT","role-staff":"styles--role-staff--1fBkj","avatar-img":"styles--avatar-img--1dgGq","avatar-default":"styles--avatar-default--3Lewd",clearfix:"styles--clearfix--3lMwL","rel-pos":"styles--rel-pos--mNNOz",invisible:"styles--invisible--2-CCy",photo:"styles--photo---JFKL","no-photo":"styles--no-photo--3BlZB","no-margin":"styles--no-margin--f_ozk",container:"styles--container--2HhuJ",hidden:"styles--hidden--1pQvd",spacer:"styles--spacer--3J969","arrow-left-activity":"styles--arrow-left-activity--3ZjUq",header:"styles--header--1tn-l","border-bottom":"styles--border-bottom--j31rh","community-icon":"styles--community-icon--37ejS"}},2259:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};r={communityApiUrl:"https://community-api.udacity.com/api/v1",uchatRealTimeApiUrl:"wss://uchat-realtime.udacity.com",profilesApiUrl:"https://profiles-api.udacity.com",googleMapsApiKey:"AIzaSyDYMz1TBeOM_daW7uR9B4vfxQKT_NoQE5U",segmentWriteKey:"0FT6d0lW4bSMFiV1Rv9fQDDjh031iOqX"},t.default=r},2260:function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},2261:function(e,t,n){var r=n(147),o=n(2351),a=n(144),i="[object Object]",s=Function.prototype,l=Object.prototype,u=s.toString,c=l.hasOwnProperty,f=u.call(Object);e.exports=function(e){if(!a(e)||r(e)!=i)return!1;var t=o(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==f}},2262:function(e,t,n){e.exports={"std-font-9":"styles--std-font-9--3G3Lb","project-font":"styles--project-font--3vvhd","std-font-12":"styles--std-font-12--1AXXk","room-title-font":"styles--room-title-font--1iGe6","user-font":"styles--user-font--B564r","add-photo":"styles--add-photo--1khB8","remove-photo":"styles--remove-photo--2MvTl","std-font-14":"styles--std-font-14--2nUt7",direction:"styles--direction--33xAU",label:"styles--label--1Nr65","avatar-title":"styles--avatar-title--2oMhm","avatar-size":"styles--avatar-size--2VSBE",location:"styles--location--1ObHt","location-pref":"styles--location-pref--NGPEx","nanodegrees-entry":"styles--nanodegrees-entry--3he3d","display-content":"styles--display-content--39mbo","display-badge-mentor":"styles--display-badge-mentor--TyVne","display-badge-staff":"styles--display-badge-staff--Seq9N","display-title":"styles--display-title--3e7ly","display-detail":"styles--display-detail--ClJsR","agree-label-text":"styles--agree-label-text--3jwM0","std-font-16":"styles--std-font-16--3pQyT",name:"styles--name--2tAdN","display-user-name":"styles--display-user-name--2xNz6","std-font-18":"styles--std-font-18--xuHUw","avatar-default":"styles--avatar-default--1T7Cj","chatroom-title-font":"styles--chatroom-title-font--1FA4g","screen-content":"styles--screen-content--1Z_UP",circle:"styles--circle--2nvib","gray-light":"styles--gray-light--3AXNK",turquoise:"styles--turquoise--k7QDi","avatar-circle":"styles--avatar-circle--2GL5Z","avatar-circle-default":"styles--avatar-circle-default--dcN0B","role-mentor":"styles--role-mentor--1xoar","role-staff":"styles--role-staff--1jsoW","avatar-img":"styles--avatar-img--rW6Pr",clearfix:"styles--clearfix--13VU0","rel-pos":"styles--rel-pos--6UIY2",invisible:"styles--invisible--MNvjv",photo:"styles--photo--36NaU","no-photo":"styles--no-photo--36OBm","no-margin":"styles--no-margin--1WH6Y","profile-container":"styles--profile-container--1LFAi","profile-height-with-agree-checkbox":"styles--profile-height-with-agree-checkbox--zbcHF","line-break":"styles--line-break--3gNfs","btn-container":"styles--btn-container--2gNTf","save-btn":"styles--save-btn--2c4wC","photo-container":"styles--photo-container--q1OXx","avatar-direction":"styles--avatar-direction--gXJf8","avatar-btn":"styles--avatar-btn--3dDGt","profile-avatar-img":"styles--profile-avatar-img--35VlX","nanodegrees-list":"styles--nanodegrees-list--3XYPM","display-header":"styles--display-header--3wsYb","display-user-name-container":"styles--display-user-name-container--4R19c","display-avatar":"styles--display-avatar--2swSp","display-avatar-img":"styles--display-avatar-img--2IS8a","display-avatar-default":"styles--display-avatar-default--1mJvS","display-avatar-letter":"styles--display-avatar-letter--15E0A",enrollments:"styles--enrollments--34tg_","display-report":"styles--display-report--1myko","display-alert-icon":"styles--display-alert-icon--2KvvY","display-edit-profile":"styles--display-edit-profile--2ogQl","agree-checkbox":"styles--agree-checkbox--2u1tq","form-content":"styles--form-content--1_45M","red-asterisk":"styles--red-asterisk--1nIKe"}},2263:function(e,t,n){"use strict";(function(e,r,o){Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(15),s=h(n(39)),l=n(2188),u=h(n(0)),c=n(2187),f=n(2191),d=n(27),p=h(n(2231));function h(e){return e&&e.__esModule?e:{default:e}}var m,y,v,g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}var E=e(p.default,{allowMultiple:!0})((v=y=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=_(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleBackClick=function(e){var t=r.props,n=t.popScreen,o=t.screens;e.preventDefault(),n(o)},_(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),g(t,[{key:"render",value:function(){var e=this.props,t=e.isBackButtonVisible,n=e.notifications,a=e.onCommunityClose,u=o.get(n,"has_notification_other",!1)?p.default["arrow-left-activity"]:"",f=void 0,d=void 0,h="title";return this.props.title?(f=this.props.title,d=o.truncate(f,{length:l.MAX_HEADER_TITLE_CHARS,separator:" "})):(f="",d="Home",h+=" spacer"),r.createElement("h3",{styleName:"header"},t?r.createElement("span",null,r.createElement(i.Button,{styleName:"back-btn",onClick:this.handleBackClick},r.createElement(s.default,{className:u,glyph:"arrow-left-lg",text:(0,c.__)("Chatroom List")}))):r.createElement("span",{styleName:"community-icon"},r.createElement(s.default,{glyph:"community-lg",text:(0,c.__)("Chat")})),r.createElement("span",{styleName:h,title:f},d),r.createElement("span",null,r.createElement(i.Button,{styleName:"close-btn",onClick:a},r.createElement(s.default,{glyph:"close-lg",text:(0,c.__)("Close")}))))}}]),t}(),y.propTypes={title:u.default.string,isBackButtonVisible:u.default.bool.isRequired},m=v))||m,b=(0,f.actionsBinder)("popScreen");t.default=(0,d.connect)(function(e){return{onCommunityClose:e.window.toggleFn,notifications:e.notifications,screens:e.screen}},b)(E)}).call(this,n(6),n(1),n(4))},2287:function(e,t,n){var r=n(664),o=n(2350),a=n(3927),i=n(398),s=n(658),l=n(3930),u=n(2353),c=n(2509),f=u(function(e,t){var n={};if(null==e)return n;var u=!1;t=r(t,function(t){return t=i(t,e),u||(u=t.length>1),t}),s(e,c(e),n),u&&(n=o(n,7,l));for(var f=t.length;f--;)a(n,t[f]);return n});e.exports=f},2288:function(e,t,n){var r=n(690),o=n(3914),a=n(200);e.exports=function(e){return a(e)?r(e,!0):o(e)}},2289:function(e,t,n){var r=n(100),o=Object.create,a=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=a},2290:function(e,t,n){var r=n(2289),o=n(100);e.exports=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=r(e.prototype),a=e.apply(n,t);return o(a)?a:n}}},2291:function(e,t,n){"use strict";(function(e,r,o){Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarTypes=t.AvatarThemes=t.getAvatarTheme=t.Avatar=t.THEME_TO_CLASS_NAME=t.makeIdenticon=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.cycleId=_;var i=n(3978);Object.defineProperty(t,"getAvatarTheme",{enumerable:!0,get:function(){return i.getAvatarTheme}});var s=n(2533);Object.defineProperty(t,"AvatarThemes",{enumerable:!0,get:function(){return s.AvatarThemes}}),Object.defineProperty(t,"AvatarTypes",{enumerable:!0,get:function(){return s.AvatarTypes}});var l=p(n(3979)),u=n(2192),c=p(n(0)),f=n(2187),d=p(n(3981));function p(e){return e&&e.__esModule?e:{default:e}}var h,m,y,v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function _(e){if(e.toString().length>=15)return e;for(var t=e.toString();t.length<15;)t+=e;return t.slice(0,16)}var E=t.makeIdenticon=e.memoize(function(e,t){return"data:image/png;base64,"+new l.default(""+_(e),t).toString()},function(e,t){return e+" "+t}),b=t.THEME_TO_CLASS_NAME={DEFAULT:"avatar-img",PROFILE_DEFAULT:"display-avatar-img",PROFILE_MENTOR:"display-avatar-img-mentor",PROFILE_STAFF:"display-avatar-img-staff",PARTICIPANT:"participant-avatar",SUGGESTION_DEFAULT:"suggestion",SUGGESTION_MENTOR:"suggestion-mentor",SUGGESTION_STAFF:"suggestion-staff"},T=t.Avatar=r(d.default,{allowMultiple:!0})((y=m=function(t){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=r=g(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),r.state={hasError:!1},r._isMounted=!1,r.handleProfileImageLoadingError=function(){r._isMounted&&r.setState({hasError:!0})},g(r,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.PureComponent),v(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"render",value:function(){var t=this.props,n=t.profile,r=t.participant,a=t.theme,i=t.size,s=this.state.hasError,l=n||r,u=l.id,c=l.photo_url,d=l.first_name,p=l.last_name,h=c&&!s,m=d+p||"anonymous",y=!n||e.isEmpty(n),v=b[a];return y?o.createElement("div",{styleName:v+" no-photo-loading","data-tst":"default-gray"}):h?o.createElement("img",{src:c,alt:(0,f.__)("Profile photo"),"data-tst":"profile-pic","data-image-id":u,styleName:v,title:m,onError:this.handleProfileImageLoadingError}):o.createElement("img",{styleName:v,"data-image-id":u,"data-tst":"default-identicon",title:m,alt:(0,f.__)("Profile photo"),src:E(u,i),onError:this.handleProfileImageLoadingError})}}]),n}(),m.propTypes={profile:u.ProfileShape.isRequired,participant:c.default.object.isRequired,type:c.default.oneOf(e.values(b)),size:c.default.number},m.defaultProps={participant:{},size:25,theme:s.AvatarThemes.DEFAULT},h=y))||h;t.default=T}).call(this,n(4),n(6),n(1))},2348:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.supportSubject="Reporting community guidelines non-compliance in chat",t.supportBody="Thank you for reaching out to Udacity support! We’re sorry you’ve had a negative experience chatting with a fellow student. To report the concerning behavior, please provide the following information so that we can investigate the issue as quickly as possible:%0D%0A%0D%0A1. Please attach two screen shots:%0D%0A%09One of the specific messages you would like to report, ensuring that the name and avatar of the student who sent the message are visible.%0D%0A%09One of the message sender’s profile%0D%0A2. Name of NanoDegree:%0D%0A3. Name of chat group:",t.reportMessageBody=function(e,t){return"Thank you for reaching out to Udacity support! We’re sorry you’ve had a negative experience chatting with a fellow student. To report the concerning behavior, please send this email with the supplied information so that we can investigate the issue as quickly as possible:%0D%0A%0D%0A- messageID: "+t+"%0D%0A- userID: "+e},t.supportEmailDefault="support@udacity.com",t.supportEmails={nd000:"introprogramming-support@udacity.com",nd001:"frontend-support@udacity.com",nd004:"fullstack-support@udacity.com",nd117:"unreal-support@udacity.com",nd003:"ios-support@udacity.com",nd024:"mobileweb-support@udacity.com",nd110:"suporte@udacity.com",nd089:"aipnd-support@udacity.com",default:"support@udacity.com"}},2349:function(e,t,n){var r=n(3912),o=n(193);e.exports=function(e){return null==e?[]:r(e,o(e))}},2350:function(e,t,n){var r=n(397),o=n(665),a=n(402),i=n(2506),s=n(3913),l=n(2507),u=n(2260),c=n(3916),f=n(3917),d=n(696),p=n(2509),h=n(661),m=n(3918),y=n(3919),v=n(2511),g=n(65),_=n(396),E=n(3923),b=n(100),T=n(3925),O=n(193),w=1,S=2,C=4,P="[object Arguments]",A="[object Function]",R="[object GeneratorFunction]",M="[object Object]",k={};k[P]=k["[object Array]"]=k["[object ArrayBuffer]"]=k["[object DataView]"]=k["[object Boolean]"]=k["[object Date]"]=k["[object Float32Array]"]=k["[object Float64Array]"]=k["[object Int8Array]"]=k["[object Int16Array]"]=k["[object Int32Array]"]=k["[object Map]"]=k["[object Number]"]=k[M]=k["[object RegExp]"]=k["[object Set]"]=k["[object String]"]=k["[object Symbol]"]=k["[object Uint8Array]"]=k["[object Uint8ClampedArray]"]=k["[object Uint16Array]"]=k["[object Uint32Array]"]=!0,k["[object Error]"]=k[A]=k["[object WeakMap]"]=!1,e.exports=function e(t,n,I,L,N,j){var x,D=n&w,F=n&S,U=n&C;if(I&&(x=N?I(t,L,N,j):I(t)),void 0!==x)return x;if(!b(t))return t;var q=g(t);if(q){if(x=m(t),!D)return u(t,x)}else{var B=h(t),H=B==A||B==R;if(_(t))return l(t,D);if(B==M||B==P||H&&!N){if(x=F||H?{}:v(t),!D)return F?f(t,s(x,t)):c(t,i(x,t))}else{if(!k[B])return N?t:{};x=y(t,B,D)}}j||(j=new r);var W=j.get(t);if(W)return W;if(j.set(t,x),T(t))return t.forEach(function(r){x.add(e(r,n,I,r,t,j))}),x;if(E(t))return t.forEach(function(r,o){x.set(o,e(r,n,I,o,t,j))}),x;var G=U?F?p:d:F?keysIn:O,K=q?void 0:G(t);return o(K||t,function(r,o){K&&(r=t[o=r]),a(x,o,e(r,n,I,o,t,j))}),x}},2351:function(e,t,n){var r=n(692)(Object.getPrototypeOf,Object);e.exports=r},2352:function(e,t,n){var r=n(695);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},2353:function(e,t,n){var r=n(3931),o=n(688),a=n(675);e.exports=function(e){return a(o(e,void 0,r),e+"")}},2354:function(e,t,n){var r=n(147),o=n(144),a="[object Number]";e.exports=function(e){return"number"==typeof e||o(e)&&r(e)==a}},2355:function(e,t){e.exports={}},2356:function(e,t,n){var r=n(2514),o=n(3940),a=n(3941),i=n(2516),s=n(3952),l=n(2359),u=n(3953),c=n(2522),f=n(2523),d=n(2525),p="Expected a function",h=1,m=2,y=8,v=16,g=32,_=64,E=Math.max;e.exports=function(e,t,n,b,T,O,w,S){var C=t&m;if(!C&&"function"!=typeof e)throw new TypeError(p);var P=b?b.length:0;if(P||(t&=~(g|_),b=T=void 0),w=void 0===w?w:E(d(w),0),S=void 0===S?S:d(S),P-=T?T.length:0,t&_){var A=b,R=T;b=T=void 0}var M=C?void 0:l(e),k=[e,t,n,b,T,A,R,O,w,S];if(M&&u(k,M),e=k[0],t=k[1],n=k[2],b=k[3],T=k[4],!(S=k[9]=void 0===k[9]?C?0:e.length:E(k[9]-P,0))&&t&(y|v)&&(t&=~(y|v)),t&&t!=h)I=t==y||t==v?a(e,t,S):t!=g&&t!=(h|g)||T.length?i.apply(void 0,k):s(e,t,n,b);else var I=o(e,t,n);return f((M?r:c)(I,k),e,t)}},2357:function(e,t,n){var r=n(2289),o=n(2358),a=4294967295;function i(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=a,this.__views__=[]}i.prototype=r(o.prototype),i.prototype.constructor=i,e.exports=i},2358:function(e,t){e.exports=function(){}},2359:function(e,t,n){var r=n(2515),o=n(3943),a=r?function(e){return r.get(e)}:o;e.exports=a},2360:function(e,t,n){var r=n(2289),o=n(2358);function a(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}a.prototype=r(o.prototype),a.prototype.constructor=a,e.exports=a},2361:function(e,t){var n="__lodash_placeholder__";e.exports=function(e,t){for(var r=-1,o=e.length,a=0,i=[];++r<o;){var s=e[r];s!==t&&s!==n||(e[r]=n,i[a++]=r)}return i}},2362:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ContextTypes=t.PropTypes=t.PROPS_DECORATOR_CONTEXT_NAME=t.ENHANCER_CONTEXT_NAME=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(n(0));!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1));function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=t.ENHANCER_CONTEXT_NAME="__substyle__enhancer",s=t.PROPS_DECORATOR_CONTEXT_NAME="__substyle__propsDecorator",l=o.default.oneOfType([o.default.func,o.default.object]),u=o.default.objectOf(o.default.string);t.PropTypes={style:l,className:o.default.string,classNames:u},t.ContextTypes=(a(r={},i,o.default.func),a(r,s,o.default.func),r)},2363:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var o=s(n(39)),a=n(2187),i=s(n(2195));function s(e){return e&&e.__esModule?e:{default:e}}t.default=r(i.default,{allowMultiple:!0})(function(){return e.createElement("div",{styleName:"mentor-badge"},e.createElement("span",{styleName:"badge-icon"},e.createElement(o.default,{glyph:"diamond-md-filled",text:(0,a.__)("Mentor Icon")})," "),e.createElement("span",{styleName:"mentor-badge-label"},(0,a.__)("Mentor")))})}).call(this,n(1),n(6))},2364:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var o=s(n(39)),a=n(2187),i=s(n(2195));function s(e){return e&&e.__esModule?e:{default:e}}t.default=r(i.default,{allowMultiple:!0})(function(){return e.createElement("div",{styleName:"staff-badge"},e.createElement("span",{styleName:"badge-icon"},e.createElement(o.default,{glyph:"star-small-md-filled",text:(0,a.__)("Staff Icon")})," "),e.createElement("span",{styleName:"staff-badge-label"},(0,a.__)("Udacity Staff")))})}).call(this,n(1),n(6))},2365:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});t.extractMessageParticipants=function(t){return e.uniq(e.flatMap(t,function(t){return e.concat([t.user_id],e.get(t,"thread.participants",[]))}))}}).call(this,n(4))},2366:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcTimeDiffValues=function(e,t){var n=(0,a.default)(e).diff((0,a.default)(t),"minutes");return{showTime:n>r.MAX_MSG_TIME_DIFF,showDate:n>1440,calendarTime:(0,a.default)(e).calendar(null,{sameDay:"["+(0,o.__)("Today")+"]",lastDay:"["+(0,o.__)("Yesterday")+"]",lastWeek:"dddd, MMM Do",sameElse:"dddd, MMM Do"})}},t.getLocalTime=function(e){return(0,a.default)(e).format("LT")},t.getCalendarTime=function(e){return(0,a.default)(e).calendar()};var r=n(2188),o=n(2187),a=function(e){return e&&e.__esModule?e:{default:e}}(n(12))},2367:function(e,t,n){"use strict";(function(e,r,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(2291),s=b(i),l=n(2192),u=n(2366),c=n(2197),f=n(2198),d=b(n(4e3)),p=b(n(4006)),h=b(n(2363)),m=b(n(4009)),y=n(2188),v=b(n(0)),g=b(n(2364)),_=b(n(28)),E=b(n(2195));function b(e){return e&&e.__esModule?e:{default:e}}var T,O,w,S=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function P(t,n,o,a,l){if(!(r.get(t,"has_replies",!1)&&r.get(t,"thread.message_count",0)>0))return null;var d=t.thread,p=d.last_message_at,h=d.message_count,m=r.get(l.unread,[d.thread_id,"count"],[])>0,v=r.takeRight(r.filter(d.participants,function(e){return r.has(n,e)}),y.NUM_THREAD_PARTICIPANTS_PREVIEW);return e.createElement("div",{styleName:"message-content-thread"},v.map(function(r){var o={"role-mentor":(0,c.isMessageFromMentor)(t,n[r]),"role-staff":(0,c.isMessageFromStaff)(t,n[r])};return e.createElement("div",{styleName:(0,_.default)(o),key:r},e.createElement(s.default,{profile:n[r],theme:(0,i.getAvatarTheme)()}))}),m&&e.createElement("div",null,function(t,n){var o=r.get(t,["unreadMentions",n.thread_id],[]).length,a=o>0?"thread-mention":"thread-notification",i=(0,f.displayMentionCount)(o);return e.createElement("span",{styleName:a,"data-mention-count":o>0?i:""})}(l,d)),e.createElement("a",{href:"#",onFocus:o,onClick:a},(0,f.makeThreadRepliesSummary)(h)),e.createElement("time",{dateTime:p},(0,u.getCalendarTime)(p)))}var A=o(E.default,{allowMultiple:!0})((w=O=function(t){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=r=C(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),r.handleActive=function(){var e=r.props;(0,e.setActive)(e.uuid)},r.handleThreadClick=function(e){var t=r.props,n=t.onThreadClick,o=t.message;e.preventDefault(),n(o.room_id,o.message_id)},C(r,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.PureComponent),S(n,[{key:"render",value:function(){var t=this.props,n=t.active,o=t.message,a=t.showTime,l=t.timeFormat,y=t.showActions,v=t.sameAsPrev,E=t.isMsgFromCurrentUser,b=t.isLastMessage,T=t.isThreadHeader,O=t.profiles,w=t.avatarClickable,S=t.onProfileAvatarClick,C=t.threadingEnabled,A=t.notifications,R=o.links,M=O[o.user_id],k=(0,c.isMessageFromMentor)(o,M),I=(0,c.isMessageFromStaff)(o,M),L=!E&&!v,N=T?"thread-user":E?"this-user":"other-user",j=function(e,t,n,r,o){return e||r?"":(0,_.default)("avatar-circle",{"avatar-circle-default":!o},{"role-mentor":t},{"role-staff":n})}(E,k,I,v,r.get(M,"photo_url")),x=n?"active":"",D=v?"":"triangle";return e.createElement("div",{styleName:"message-container",onMouseEnter:this.handleActive},e.createElement("div",{styleName:"message-avatar"},e.createElement("div",{styleName:j},L&&function(t,n,r,o){return t?n?e.createElement("a",{href:"#",styleName:"message-avatar-link",onFocus:o,onClick:function(e){e.preventDefault(),r(t.id)}},e.createElement(s.default,{profile:t,theme:(0,i.getAvatarTheme)()})):e.createElement("span",{styleName:"message-avatar-link"},e.createElement(s.default,{profile:t,theme:(0,i.getAvatarTheme)()})):e.createElement("span",{styleName:"avatar-default"},e.createElement(s.default,{profile:t,theme:(0,i.getAvatarTheme)()}))}(M,w,S,this.handleActive))),e.createElement("div",{styleName:"message-content-container "+N},e.createElement("div",{styleName:"message-content-container-inner "+N},e.createElement("div",{styleName:"message-content-meta"},L&&M&&e.createElement("div",{styleName:"message-content-user"},(0,f.makeUserName)(M.first_name,M.last_name)),L&&k&&e.createElement(h.default,null),L&&I&&e.createElement(g.default,null),a&&e.createElement("time",{dateTime:o.created_at,styleName:"message-content-time"},"short"===l?(0,u.getLocalTime)(o.created_at):(0,u.getCalendarTime)(o.created_at))),e.createElement("div",{styleName:"message-content-row "+N+" "+D+" "+x,tabIndex:0,onFocus:this.handleActive},e.createElement("div",{styleName:"message-content "+N+" "+x},e.createElement(p.default,{className:N,message:o,onProfileAvatarClick:S,me:O.me}),R&&e.createElement(d.default,{links:R,isMsgFromCurrentUser:E}))),y&&C&&e.createElement(m.default,{active:n,message:o,isLastMessage:b,onActive:this.handleActive,onThreadClick:this.handleThreadClick})),C&&P(o,O,this.handleActive,this.handleThreadClick,A)))}}]),n}(),O.propTypes={uuid:v.default.string,active:v.default.bool,setActive:v.default.func,message:l.MessageEventPayloadShape.isRequired,showTime:v.default.bool,timeFormat:v.default.oneOf(["short","long"]),showActions:v.default.bool.isRequired,sameAsPrev:v.default.bool.isRequired,isMsgFromCurrentUser:v.default.bool.isRequired,isLastMessage:v.default.bool.isRequired,isThreadHeader:v.default.bool.isRequired,profiles:v.default.objectOf(l.ProfileShape).isRequired,threadingEnabled:v.default.bool.isRequired,avatarClickable:v.default.bool,onProfileAvatarClick:v.default.func,onThreadClick:v.default.func,notifications:v.default.object},O.defaultProps={active:!1,setActive:function(){},showTime:!0,timeFormat:"short",sameAsPrev:!1,avatarClickable:!1,isLastMessage:!1,isThreadHeader:!1},T=w))||T;t.default=A}).call(this,n(1),n(4),n(6))},2368:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={_generateId:function(){return Math.random().toString(36).slice(-8)},_createToast:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";return{id:this._generateId(),message:e,type:t}},_mapErrorMessage:function(e){switch(e){case 400:return __("Please check your input and try again");case 401:return __("Sorry, you are not authorized");case 404:return __("Resource not found");case 408:return __("The request timed out. Please try again later");case 500:return __("Sorry, the server encountered an error. Please try again");default:return __("An error occurred")}},createError:function(e){var t=e.status?this._mapErrorMessage(e.status):e.message||"Unknown error";return this._createToast(t,"error")},createNotification:function(e){return this._createToast(e,"notification")}}},2369:function(e,t,n){"use strict";var r=n(666);e.exports.f=function(e){return new function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=r(t),this.reject=r(n)}(e)}},2503:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2188),o=s(n(720)),a=s(n(2206)),i=s(n(3905));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var u={minReconnectionDelay:50,reconnectionDelayGrowFactor:2,debug:!1},c=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.websocketURL=t,this.userID=n,this.rooms=r,this.authenticated=!1,this.authenticationError=!1,this.authenticationTokenErrors=0}return l(e,[{key:"listen",value:function(){var e=this;if(!this.socket){this.socket=new o.default(this.websocketURL,[],u),this.socket.onopen=function(){e._authenticateConnection()},this.socket.onclose=function(t){1008===t.code&&(e.authenticationError=!0,e.socket.close(1e3,"client disconnected",{keepClosed:!0,fastClose:!0})),e.authenticated=!1},this.socket.onmessage=function(t){var n=JSON.parse(t.data),o=n.version,a=!1;switch(n.type){case r.EventTypes.ACCEPTED:e.authenticated=!0,e.authenticationError=!1,e.onauthenticated(),a=!0;break;case r.EventTypes.JOINED:case r.EventTypes.QUIT:case r.EventTypes.MESSAGE:case r.EventTypes.REPLY:(function(e){return!i.default.satisfies(o,e)})("1.x")&&(a=!0);break;default:a=!0}a||e.onmessage(t)};this.heartbeat=setInterval(function(){var t=e.connected();e.onping(t)},100)}}},{key:"close",value:function(){this.heartbeat&&clearInterval(this.heartbeat),this.socket&&this.socket.close(1e3,"client disconnected",{keepClosed:!0})}},{key:"enterRoom",value:function(e){if(this.connected()){var t={type:r.EventTypes.ACTIVITY,version:"v1.3.0",room_id:e,payload:{status:"active"}};this.socket.send(JSON.stringify(t))}}},{key:"leaveRoom",value:function(e){if(this.connected()){var t={type:r.EventTypes.ACTIVITY,version:"v1.3.0",room_id:e,payload:{status:"inactive"}};this.socket.send(JSON.stringify(t))}}},{key:"connected",value:function(){return!!this.socket&&(this.authenticated&&this.socket.readyState===WebSocket.OPEN)}},{key:"_authenticateConnection",value:function(){var e=this;return a.default.fetchConnectToken(this.rooms).then(function(t){e.authenticationTokenErrors=0;var n={type:r.EventTypes.HANDSHAKE,version:"v1.3.0",payload:{user_id:e.userID,rooms:e.rooms,challenge_token:t}};e.socket.send(JSON.stringify(n))}).catch(function(){e.authenticationTokenErrors++,e.authenticationError=!0,e.authenticationTokenErrors>=r.MAX_AUTH_TOKEN_ERRORS?e.socket.close(1e3,"client disconnecting",{keepClosed:!0}):e.socket.close(1e3,"client disconnecting",{keepClosed:!1,delay:5e3})})}},{key:"onauthenticated",value:function(){}},{key:"onmessage",value:function(){}},{key:"onping",value:function(){}}]),e}();t.default=c},2504:function(e,t,n){"use strict";e.exports={"<%= count %> classmates active":"<%= count %> colegas de classe ativos","<%= student1 %> has joined<%=timestamp%>.":"<%= student1 %> entrou<%= timestamp %>.","<%= student1 %> and <%= lastStudent %> have joined<%= timestamp %>.":"<%= student1 %> e <%= lastStudent %> entraram<%= timestamp %>.","<%= studentList %>, and <%= lastStudent %> have joined<%= timestamp %>.":"<%= studentList %> e <%= lastStudent %> entraram<%= timestamp %>.","+<%= count %> students have joined<%= timestamp %>.":"+<%= count %> alunos entraram<%= timestamp %>.","<%= count %> new messages":"<%= count %> novas mensagens","<%= numClassmates %> classmate":"<%= numClassmates %> colega","<%= numClassmates %> classmates":"<%= numClassmates %> colegas","1 reply":"1 resposta","<%= count %> replies":"<%= count %> respostas","View 1 reply":"Ver 1 resposta","View <%= count %> replies":"Ver <%= count %> respostas","1 New Activity in your Threads":"1 Nova atividade em seus tópicos","<%= count %> New Activities in your Threads":"<%=count %> Novas atividades em seus tópicos","New Activity in your Threads":"Novas atividades em seus tópicos","All Threads":"Todos os tópicos","Thread: <%= roomTitle %>":"Tópico: <%= roomTitle %>","<%= student1 %> and <%= student2 %>":"<%= student1 %> e <%= student2 %>","<%= student1 %>, <%= student2 %>, and <%= student3 %>":"<%= student1 %>, <%= student2 %> e <%= student3 %>","<%= student1 %>, <%= student2 %>, <%= student3 %>, and <%= student4 %>":"<%= student1 %>, <%= student2 %>, <%= student3 %> e <%= student4 %>","<%= student1 %>, <%= student2 %>, <%= student3 %>, <%= student4 %>, and <%= student5 %>":"<%= student1 %>, <%= student2 %>, <%= student3 %>, <%= student4 %> e <%= student5 %>","<%= student1 %>, <%= student2 %>, <%= student3 %>, <%= student4 %>, <%= student5 %>, and 1 other":"<%= student1 %>, <%= student2 %>, <%= student3 %>, <%= student4 %>, <%= student5 %> e 1 outro","<%= student1 %>, <%= student2 %>, <%= student3 %>, <%= student4 %>, <%= student5 %>, and <%= count %> others":"<%= student1 %>, <%= student2 %>, <%= student3 %>, <%= student4 %>, <%= student5 %> e <%= count %> outros","<%= first_name %>'s original post from <%= date %>":"Post original de <%= first_name %> de <%= date %>","Original post from <%= date %>":"Post original de <%= date %>",Participants:"Participantes","Reply to this message":"Responda a esta mensagem","More actions...":"Mais ações...",Today:"Hoje",Yesterday:"Ontem","Chatroom List":"Lista das salas de bate-papo",Chat:"Chat",Close:"Fechar","Start Chatting!":"Comece a conversar!","Please check your input and try again":"Confira as informações inseridas e tente novamente","Sorry, you are not authorized":"Desculpe, você não tem autorização","Resource not found":"Recurso não encontrado","The request timed out. Please try again later":"A solicitação expirou. Tente novamente mais tarde","Sorry, the server encountered an error. Please try again":"Desculpe, ocorreu um erro no servidor. Tente novamente mais tarde","An error occurred":"Ocorreu um erro","Beginning of the Conversation":"Início da conversa","Unable to fetch more messages, please try again.":"Não foi possível exibir mais mensagens. Tente novamente.","new messages":"novas mensagens","Mark As Read":"Marcar Como Lida","Profile photo":"Foto de perfil",PROFILES:"Perfils",HIDE:"Esconder","Unable to load chat rooms, please try again.":"Não foi possível carregar as salas de bate-papo. Tente novamente.","Unable to load chat room, please try again.":"Não foi possível carregar a sala de bate-papo. Tente novamente.","Up Arrow":"Seta para cima","Down Arrow":"Seta para baixo",General:"Geral","My Classmates":"Meus colegas de classe","There was a problem loading the chatrooms.":"Houve um problema ao carregar as salas de bate-papo.","Study Groups":"Grupos de estudo","Project Channels":"Canais de Projeto",Locked:"Bloqueado","Only allowed to upload one photo":"Só é permitido carregar uma foto","Please upload a .jpg or .png":"Você deve carregar um arquivo .jpg ou .png","Max file size allowed is 5MB":"O arquivo pode ter, no máximo, 5MB","Image must be at least 120px by 120px":"A imagem deve ter, no mínimo, 120px por 120px","Change Photo":"Alterar foto","Add Photo":"Adicione uma foto","You’re one short step away! Fill out your profile to share & connect with your classmates.":"Falta apenas um pequeno passo! Preencha seu perfil, compartilhe-o com seus colegas de classe e se conecte a eles.","Edit your student profile and return to the conversation.":"Edite seu perfil de aluno e retorne à conversa.","Min: 120px by 120px, Max: 5MB":"Tamanho mínimo: 120px por 120px. Máx.: 5MB",remove:"excluir","Where are you studying from?":"De onde você está estudando?",location:"localização","Share my location":"Compartilhar minha localização","Program Enrollments":"Inscrições em Nanodegrees","I agree to adhere to the Udacity":"Concordo em seguir as","Community Guidelines":"Diretrizes de comunidade da Udacity","Information about community guidelines":"Informações sobre diretrizes de comunidade da Udacity","Save and Continue":"Salvar e continuar","Learning From":"Estudando de","Report User Behavior to Support":"Reportar usuário ao suporte","Report User":"Reportar usuário","Report Post":"Reportar mensagem","Edit Student Profile":"Editar o perfil de aluno",zoom:"zoom",rotate:"rotacionar",left:"esquerda",right:"direita","save photo":"salvar foto",cancel:"cancelar","crop photo":"cortar foto","Unable to send message":"Não é possível enviar uma mensagem",Alert:"Atenção","Say hello!":"Diga olá","Share your thoughts":"Compartilhe seus pensamentos","Start a conversation":"Comece uma conversa","Need some help?":"Precisa de alguma ajuda?","Write something":"Escreva algo","Learn together!":"Aprender juntos!","What's on your mind?":"O que está em sua mente?","Enter your city":"Digite a sua cidade","Type to search":"Escreva para pesquisar","You are no longer connected to the chat room. Check your connection and reload the page.":"Você não está mais conectado à sala de bate-papo. Verifique a sua conexão e recarregue a página.","You are no longer connected to the chat room. Attempting to reconnect...":"Você não está mais conectado à sala de bate-papo. Tentando reconectar...",Reconnecting:"Reconectando","Connection Lost":"Conexão perdida","Tip: Use CTRL + CMD + Space keys to enter emojis":"Dica: use CTRL + CMD + tecla de espaço para inserir emojis","Tip: Use 3 back ticks to post code snippets like this...```code goes here```":"Dica: use 3 crase para enviar fragmentos de código como este... ```O código fica aqui```","Tip: Use Shift + Enter to move to the next line":"Dica: Use Shift + Enter para mover para a próxima linha","Tip: Hover over messages to reveal more actions":"Dica: Passe o mouse sobre as mensagens para revelar mais ações.",answer:"resposta",answers:"respostas","Knowledge Post":"Knowledge Postar","knowledge answers":"knowledge respostas","Mentor Icon":"ícone de mentor",Mentor:"Mentor","Staff Icon":"ícone da equipe","Udacity Staff":"Equipe da Udacity",Biography:"Biografia",Certification:"Certificado"}},2505:function(e,t,n){"use strict";(function(e,r,o,a){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(2229),l=n(2217),u=n(2188),c=A(n(2218)),f=A(n(39)),d=A(n(3911)),p=n(15),h=A(n(3996)),m=A(n(4010)),y=A(n(4013)),v=A(n(0)),g=n(2192),_=A(n(4018)),E=n(2187),b=n(2191),T=n(27),O=n(2197),w=A(n(22)),S=n(4019),C=n(2198),P=A(n(2195));function A(e){return e&&e.__esModule?e:{default:e}}var R,M,k,I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),N=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function j(t){return function(){var n=t.apply(this,arguments);return new e(function(t,r){return function o(a,i){try{var s=n[a](i),l=s.value}catch(e){return void r(e)}if(!s.done)return e.resolve(l).then(function(e){o("next",e)},function(e){o("throw",e)});t(l)}("next")})}}var x=r(P.default,{allowMultiple:!0})((k=M=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.moveToBottomOfList=function(){n.elMsgList?n.elMsgList.scrollTop=n.elMsgList.scrollHeight:setTimeout(n.moveToBottomOfList,5)},n.handleResize=function(){n.stayGlued()},n.handleProfileModalClose=function(){n.setState({isProfileModalOpen:!1,clickedProfile:null})},n.handleProfileAvatarClick=function(e){var t=n.props,r=t.room;(0,t.loadProfiles)(r.info.room_id,e).then(function(e){var t=L(e,1)[0];(0,w.default)(t,"profile could not be retrieved"),n.setState({isProfileModalOpen:!0,clickedProfile:t})})},n.handleChangeMsg=function(e){e.target.value.trim().length?n.setState({userMsg:e.target.value}):n.setState({userMsg:""})},n.handleKeyDown=function(e){var t=n.state.userMsg.trim();if(!e.shiftKey&&e.keyCode===u.Keycodes.ENTER&&t){var r=n.props,o=r.room,i=r.userData,s=r.updateMessages,f=r.profiles,d=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n.state.mentions)),p=n.excludeRemovedMentions(d,t),h=n.getRoomInfoForAnalytics(),m=a.get(f,"me.id"),y=I({},i,h,{message:t,msg_length:t.length,mentions:p,mention_length:p.length});s({message:t,mentions:p},o,m).then(function(){c.default.track(l.SEND_MESSAGE,y),n.setState({userMsg:"",mentions:new Set})})}},n.addAtMention=function(e){n.setState(function(t){return{mentions:new Set(t.mentions).add(e)}})},n.removeMention=function(e){n.setState(function(t){return{mentions:new Set(t.mentions).delete(e)}})},n.excludeRemovedMentions=function(e,t){return a.filter(e,function(e){return t.includes(e)})},n.handleListMount=function(e){n.elMsgList=e},n.state={userMsg:"",placeholderTextForInput:(0,E.__)((0,C.selectRandomString)(S.prompts)),isProfileModalOpen:!1,clickedProfile:null,mentions:new Set},n.handleResize=a.throttle(n.handleResize,100),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),N(t,[{key:"componentDidMount",value:function(){var e=j(regeneratorRuntime.mark(function e(){var t,n,r,o,i,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.room,r=t.roomTitle,o=t.userData,i=(0,O.getRoomId)(n),s=a.get(n,"info.num_active"),u=I({},o,{roomId:i,roomTitle:r,num_active:s}),e.next=6,this.getRoom(i);case 6:c.default.track(l.ENTER_ROOM,u),window.addEventListener("resize",this.handleResize),this.moveToBottomOfList();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.jumpToBottom,r=t.room,o=a.get(r,"info.room_id");!e.isCommunityOpen&&this.props.isCommunityOpen&&n(o)}},{key:"componentWillUnmount",value:function(){var e=this.props.userData,t=this.getRoomInfoForAnalytics(),n=I({},e,t);c.default.track(l.LEAVE_ROOM,n),window.removeEventListener("resize",this.handleResize)}},{key:"getRoomInfoForAnalytics",value:function(){var e=this.props,t=e.room,n=e.roomTitle;return{roomId:a.get(t,"info.room_id"),roomTitle:n,num_active:a.get(t,"info.num_active")}}},{key:"getRoom",value:function(){var e=j(regeneratorRuntime.mark(function e(t){var n,r,o,i,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.userData,o=n.rooms,i=n.fetchRoom,s=a.get(o,t),l=a.get(s,"info",!1),!(!s||!l)){e.next=7;break}return e.next=7,i(t,r.userId);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"stayGlued",value:function(){var e=this.elMsgList;e&&(e.offsetHeight+e.scrollTop>=e.scrollHeight-100&&(e.scrollTop=e.scrollHeight))}},{key:"render",value:function(){var e=this.props,t=e.room,n=e.roomTitle,r=e.socket,i=e.userData,l=e.profiles,c=e.rooms,v=e.featuresEnabled,g=e.loadProfiles,b=this.state,T=b.userMsg,w=b.placeholderTextForInput,S=a.get(t,"info.room_id"),C=a.get(t,"info.num_active"),P=a.get(r,"connected",!0),A=a.get(r,"listener.authenticationError",!1),R=I({},i,{roomId:S,roomTitle:n,num_active:C}),M={content:{maxWidth:u.MAX_PROFILE_MODAL_WIDTH}},k=a.get(t,"info.room_type")===u.RoomTypes.THREAD,L=k?a.get(t,"info.room_payload.room_id"):S,N=c[(0,O.getRoomId)(t)];return o.createElement("div",{styleName:"room"},k?o.createElement(_.default,{room:t,profiles:l,onProfileAvatarClick:this.handleProfileAvatarClick}):o.createElement(m.default,{room:t,context:R,onProfileAvatarClick:this.handleProfileAvatarClick}),o.createElement(h.default,{room:t,roomTitle:n,onListMount:this.handleListMount,onProfileAvatarClick:this.handleProfileAvatarClick}),o.createElement("div",{styleName:"input-fields"},!P&&(A?o.createElement("span",{styleName:"connection-lost"},o.createElement(f.default,{glyph:"alert-xl",text:(0,E.__)(s.ALERT_CONNECTION_LOST)})," ",(0,E.__)(s.ERR_CONNECTION_LOST)):o.createElement("span",{styleName:"connection-lost"},o.createElement(f.default,{glyph:"alert-xl",text:(0,E.__)(s.ALERT_RECONNECT)})," ",(0,E.__)(s.ERR_CONNECTION_RECONNECT))),o.createElement("label",{htmlFor:"userMsg",styleName:"input-label"},this.state.placeholderTextForInput),o.createElement(d.default,{room:N,userMsg:T,onHandleKeyDown:this.handleKeyDown,onHandleChangeMsg:this.handleChangeMsg,addAtMention:this.addAtMention,placeholderTextForInput:w,mentionEnabled:a.get(v,"mentionsEnabled",!1),loadProfiles:g,userData:i})),o.createElement("span",null,o.createElement(p.Modal,{styleName:"profile-modal",style:M,isOpen:this.state.isProfileModalOpen,onRequestClose:this.handleProfileModalClose},this.state.clickedProfile&&o.createElement(y.default,{profile:this.state.clickedProfile,roomId:L}))))}}]),t}(),M.propTypes={room:g.RoomShape,roomTitle:v.default.string.isRequired},R=k))||R,D=(0,b.actionsBinder)("updateMessages","jumpToBottom","loadProfiles","fetchParticipants","fetchRoom");t.default=(0,T.connect)(function(e){return{profiles:e.profiles,userData:e.userData,socket:e.socket,isCommunityOpen:e.window.opened,rooms:e.rooms,featuresEnabled:e.window.features}},D)(x)}).call(this,n(7),n(6),n(1),n(4))},2506:function(e,t,n){var r=n(658),o=n(193);e.exports=function(e,t){return e&&r(t,o(t),e)}},2507:function(e,t,n){(function(e){var r=n(88),o="object"==typeof t&&t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=a&&a.exports===o?r.Buffer:void 0,s=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(115)(e))},2508:function(e,t,n){var r=n(679),o=n(2351),a=n(680),i=n(698),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,a(e)),e=o(e);return t}:i;e.exports=s},2509:function(e,t,n){var r=n(697),o=n(2508),a=n(2288);e.exports=function(e){return r(e,a,o)}},2510:function(e,t,n){var r=n(2352);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},2511:function(e,t,n){var r=n(2289),o=n(2351),a=n(394);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:r(o(e))}},2512:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=E(n(3934)),o=E(n(3965)),a=E(n(65)),i=E(n(2261)),s=E(n(197)),l=E(n(3966)),u=E(n(401)),c=E(n(2526)),f=E(n(2349)),d=E(n(193)),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=E(n(22)),m=E(n(2529)),y=n(2530),v=n(2531),g=E(n(2532)),_=E(n(3973));function E(e){return e&&e.__esModule?e:{default:e}}function b(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var T=function(e){var t=e&&(0,d.default)(e)[0];return t&&t.split("__")[0].split("--")[0]},O=function(e,t,n){if(e){var r=e.split(" ")[0],o=[].concat(b(0===t.length?n.map(function(e){return r+"--"+e.substring(1)}):[]),b(t.map(function(e){return r+"__"+e})));return 0===t.length?[e].concat(b(o)):o}};t.default=function e(t){var n=t.style,d=t.className,E=t.classNames,w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.default,S=(0,s.default)(n),C=d||T(E),P=S?n:(0,_.default)(function(t,s){var l=(0,g.default)(t);(0,h.default)((0,a.default)(l),"First parameter must be a string, an array of strings, a plain object with boolean values, or a falsy value."),(0,h.default)(!s||(0,i.default)(s),"Optional second parameter must be a plain object.");var u=(0,o.default)(v.isModifier,l),d=(0,o.default)(v.isElement,l),m=d.length>0?function(e){return(0,f.default)((0,y.pickNestedStyles)(e,d))}:function(e){return[e]},_=(0,r.default)(m,function(e){return(0,y.hoistModifierStylesRecursive)(e,u)}),T=O(C,d,u);return e(p({},(n||s)&&{style:c.default.apply(void 0,[{}].concat(b(_(s)),b(_(n))))},T&&{className:T.join(" ")},E&&{classNames:E}),w)}),A=p({},S?n:{style:n}),R=[].concat(b(A.className?A.className.split(" "):[]),b(C?C.split(" "):[])),M=E?(0,l.default)(R.map(function(e){return E[e]})):R,k=w(p({},A,M.length>0&&{className:M.join(" ")}));return(0,u.default)(P,k),P},e.exports=t.default},2513:function(e,t,n){var r=n(3936),o=n(3938);e.exports=function(e,t,n){return r(o,e,t,n)}},2514:function(e,t,n){var r=n(199),o=n(2515),a=o?function(e,t){return o.set(e,t),e}:r;e.exports=a},2515:function(e,t,n){var r=n(699),o=r&&new r;e.exports=o},2516:function(e,t,n){var r=n(2517),o=n(2518),a=n(3942),i=n(2290),s=n(2519),l=n(2524),u=n(3951),c=n(2361),f=n(88),d=1,p=2,h=8,m=16,y=128,v=512;e.exports=function e(t,n,g,_,E,b,T,O,w,S){var C=n&y,P=n&d,A=n&p,R=n&(h|m),M=n&v,k=A?void 0:i(t);return function d(){for(var p=arguments.length,h=Array(p),m=p;m--;)h[m]=arguments[m];if(R)var y=l(d),v=a(h,y);if(_&&(h=r(h,_,E,R)),b&&(h=o(h,b,T,R)),p-=v,R&&p<S){var I=c(h,y);return s(t,n,e,d.placeholder,g,h,I,O,w,S-p)}var L=P?g:this,N=A?L[t]:t;return p=h.length,O?h=u(h,O):M&&p>1&&h.reverse(),C&&w<p&&(h.length=w),this&&this!==f&&this instanceof d&&(N=k||i(N)),N.apply(L,h)}}},2517:function(e,t){var n=Math.max;e.exports=function(e,t,r,o){for(var a=-1,i=e.length,s=r.length,l=-1,u=t.length,c=n(i-s,0),f=Array(u+c),d=!o;++l<u;)f[l]=t[l];for(;++a<s;)(d||a<i)&&(f[r[a]]=e[a]);for(;c--;)f[l++]=e[a++];return f}},2518:function(e,t){var n=Math.max;e.exports=function(e,t,r,o){for(var a=-1,i=e.length,s=-1,l=r.length,u=-1,c=t.length,f=n(i-l,0),d=Array(f+c),p=!o;++a<f;)d[a]=e[a];for(var h=a;++u<c;)d[h+u]=t[u];for(;++s<l;)(p||a<i)&&(d[h+r[s]]=e[a++]);return d}},2519:function(e,t,n){var r=n(2520),o=n(2522),a=n(2523),i=1,s=2,l=4,u=8,c=32,f=64;e.exports=function(e,t,n,d,p,h,m,y,v,g){var _=t&u;t|=_?c:f,(t&=~(_?f:c))&l||(t&=~(i|s));var E=[e,t,p,_?h:void 0,_?m:void 0,_?void 0:h,_?void 0:m,y,v,g],b=n.apply(void 0,E);return r(e)&&o(b,E),b.placeholder=d,a(b,e,t)}},2520:function(e,t,n){var r=n(2357),o=n(2359),a=n(2521),i=n(3945);e.exports=function(e){var t=a(e),n=i[t];if("function"!=typeof n||!(t in r.prototype))return!1;if(e===n)return!0;var s=o(n);return!!s&&e===s[0]}},2521:function(e,t,n){var r=n(3944),o=Object.prototype.hasOwnProperty;e.exports=function(e){for(var t=e.name+"",n=r[t],a=o.call(r,t)?n.length:0;a--;){var i=n[a],s=i.func;if(null==s||s==e)return i.name}return t}},2522:function(e,t,n){var r=n(2514),o=n(689)(r);e.exports=o},2523:function(e,t,n){var r=n(3947),o=n(3948),a=n(675),i=n(3949);e.exports=function(e,t,n){var s=t+"";return a(e,o(s,i(r(s),n)))}},2524:function(e,t){e.exports=function(e){return e.placeholder}},2525:function(e,t,n){var r=n(3954);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},2526:function(e,t,n){var r=n(3967),o=n(687)(function(e,t,n){r(e,t,n)});e.exports=o},2527:function(e,t,n){var r=n(403),o=n(207);e.exports=function(e,t,n){(void 0===n||o(e[t],n))&&(void 0!==n||t in e)||r(e,t,n)}},2528:function(e,t){e.exports=function(e,t){return"__proto__"==t?void 0:e[t]}},2529:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(2530),a=["animationName"];t.default=function(e){var t=e.style,n=e.className;return r({},t?{style:(0,o.pickDirectStyles)(t,a)}:{},n?{className:n}:{})},e.exports=t.default},2530:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hoistModifierStylesRecursive=t.pickNestedStyles=t.pickDirectStyles=void 0;var r=u(n(678)),o=u(n(2349)),a=u(n(2287)),i=u(n(2526)),s=u(n(193)),l=n(2531);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})},f=(t.pickDirectStyles=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(0,s.default)(e),r={},o=0,a=n.length;o<a;o+=1){var i=n[o];("[object Object]"!==Object.prototype.toString.call(e[i])||":"===i[0]||"@"===i[0]||t.indexOf(i)>=0)&&(r[i]=e[i])}return r},t.pickNestedStyles=function(e,t){for(var n=t.map(c),r=(0,s.default)(e),o={},a=0,i=r.length;a<i;a+=1){var l=r[a];(t.indexOf(l)>=0||n.indexOf(c(l))>=0)&&(o[l]=e[l])}return o});t.hoistModifierStylesRecursive=function e(t,n){for(var u=i.default.apply(void 0,[{},(0,a.default)(t,n)].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}((0,o.default)(f(t,n))))),c=(0,r.default)((0,s.default)(u),l.isModifier),d=0,p=c.length;d<p;d+=1){var h=c[d],m=e(u[h],n);n.indexOf(h)>=0?(delete u[h],u=(0,i.default)({},u,m)):u[h]=m}return u}},2531:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isElement=t.isModifier=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(3971));var o=t.isModifier=function(e){return"&"===e[0]};t.isElement=(0,r.default)(o)},2532:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(3972)),o=i(n(2261)),a=i(n(193));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return e?(0,r.default)(e)?[e]:(0,o.default)(e)?(0,a.default)(e).reduce(function(t,n){return t.concat(e[n]?[n]:[])},[]):e:[]},e.exports=t.default},2533:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AvatarTypes={PROFILE:"profile",SUGGESTION:"suggestion",PARTICIPANT:"participant"},t.AvatarThemes={DEFAULT:"DEFAULT",PROFILE_DEFAULT:"PROFILE_DEFAULT",PROFILE_MENTOR:"PROFILE_MENTOR",PROFILE_STAFF:"PROFILE_STAFF",PARTICIPANT:"PARTICIPANT",SUGGESTION_DEFAULT:"SUGGESTION_DEFAULT",SUGGESTION_MENTOR:"SUGGESTION_MENTOR",SUGGESTION_STAFF:"SUGGESTION_STAFF"}},2534:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.loadProfiles=t.updateProfile=t.createProfile=t.fetchProfile=void 0;var o=n(2191),a=s(n(2190)),i=s(n(2206));function s(e){return e&&e.__esModule?e:{default:e}}t.fetchProfile=function(){return(0,o.createAsyncAction)(a.default.FETCH_PROFILE,a.default.FETCH_PROFILE_COMPLETE,function(){return i.default.fetchProfile()})},t.createProfile=function(e){return(0,o.createAsyncAction)(a.default.CREATE_PROFILE,a.default.CREATE_PROFILE_COMPLETE,function(){return i.default.createProfile(e)})},t.updateProfile=function(e){return(0,o.createAsyncAction)(a.default.UPDATE_PROFILE,a.default.UPDATE_PROFILE_COMPLETE,function(){return i.default.updateProfile(e)})},t.loadProfiles=function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return function(n,s){var l,u=s().profiles,c=e.filter(i,function(t){return!e.has(u,t)});return e.isEmpty(c)?r.resolve(e.map(i,function(e){return u[e]})):n((l=new o.ActionBuilder(a.default.LOAD_PROFILES).withRoom(t)).withActors.apply(l,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(c)).build()).then(function(){var t=s().profiles;return r.resolve(e.map(i,function(e){return t[e]}))})}}}).call(this,n(4),n(7))},2535:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.popScreen=t.pushScreen=t.updateScreen=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2190)),o=n(2191);t.updateScreen=function(e){return(0,o.createAction)(r.default.UPDATE_SCREEN,e)},t.pushScreen=function(e){return(0,o.createAction)(r.default.PUSH_SCREEN,e)},t.popScreen=function(e){var t=void 0;return e&&e.length>=2&&(t=e[e.length-2]),(0,o.createAction)(r.default.POP_SCREEN,t)}},2536:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchThread=void 0;var o=l(n(2190)),a=l(n(2206)),i=n(2191),s=n(2365);function l(e){return e&&e.__esModule?e:{default:e}}t.fetchThread=function(t,n){return function(l){return a.default.fetchThread(t,n).then(function(n){var u=n.room_id;return(r.get(n,"room_payload.has_replies",!1)?a.default.fetchMessages(u):function(t){return e.resolve({room_id:t,messages:[],cursor:{total:0,has_next:!1,has_prev:!1}})}(u)).then(function(e){var r=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}((0,s.extractMessageParticipants)(e.messages)),[n.room_payload.user_id]),a={info:n,messages:e},c={roomId:u,parentRoomId:t,actors:r};return l((0,i.createAction)(o.default.FETCH_ROOM,u)),l((0,i.createAction)(o.default.FETCH_ROOM_COMPLETE,a,c)),{thread:n,messages:e}})})}}}).call(this,n(7),n(4))},2537:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var o=n(2191),a=n(2188),i=c(n(2190)),s=c(n(2206)),l=n(2365),u=c(n(22));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.default={fetchRoom:function(t,n,u){return function(c,p){var h={roomId:t,userId:n},m=p(),y=e.get(m,["notifications","unread",t]),v=y&&y.count&&y.oldest&&y.count>a.MESSAGE_FETCH_COUNT,g=[s.default.fetchRoom(t)];return u?g.push(s.default.fetchMessages(t,"",u,a.MESSAGE_FETCH_COUNT)):v?g.push(s.default.fetchMessages(t,"",y.oldest,a.MESSAGE_FETCH_COUNT)):g.push(s.default.fetchMessages(t)),c((0,o.createAction)(i.default.FETCH_ROOM,t)),r.all(g).catch(function(e){throw c((0,o.createAction)(i.default.FETCH_ROOM_COMPLETE,e,h)),e}).then(function(e){var n,r=f(e,2),a=r[0],s=r[1],u=(0,l.extractMessageParticipants)(s.messages),p=(n=new o.ActionBuilder(i.default.FETCH_ROOM_COMPLETE,{info:a,messages:s}).withRoom(t)).withActors.apply(n,d(u)).build();return c(p)})}},fetchMoreMessages:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n,u){var c=u().rooms[e];if(!c)return r.resolve();if(c.pagination.fetching_prev)return r.resolve();if(t&&!c.pagination.cursor.has_prev)return r.resolve();var p={roomId:e,prev:t};n((0,o.createAction)(i.default.FETCH_MORE_MESSAGES,{},p));var h=[new r(function(e){return setTimeout(e,a.MESSAGE_FETCH_DELAY)})];return t?h.unshift(s.default.fetchMessages(e,c.pagination.cursor.prev)):h.unshift(s.default.fetchMessages(e,"",c.pagination.cursor.next,a.MESSAGE_FETCH_COUNT+1)),r.all(h).catch(function(e){throw n((0,o.createAction)(i.default.FETCH_MORE_MESSAGES_COMPLETE,e,p)),e}).then(function(t){var r,a=f(t,1)[0],s=(0,l.extractMessageParticipants)(a.messages),u=(r=new o.ActionBuilder(i.default.FETCH_MORE_MESSAGES_COMPLETE,a).withRoom(e)).withActors.apply(r,d(s)).build();return n(u),a})}},fetchParticipants:function(t){return function(n,l){var u=l(),c=e.get(u,["rooms",t]);if(!c)return r.resolve();if(e.get(c,"participants.loading",!1))return r.resolve();var f={roomId:t};return n((0,o.createAction)(i.default.FETCH_PARTICIPANTS,{},f)),s.default.viewParticipants(t).catch(function(e){throw n((0,o.createAction)(i.default.FETCH_PARTICIPANTS_COMPLETE,e,f)),e}).then(function(r){var s,l=e.take([].concat(d(e.take(e.map(r.admins,"id"),a.PARTICIPANT_BATCH_SIZE)),d(e.take(e.map(r.active,"id"),a.PARTICIPANT_BATCH_SIZE)),d(e.take(e.map(r.inactive,"id"),a.PARTICIPANT_BATCH_SIZE))),a.PARTICIPANT_BATCH_SIZE),u=(s=new o.ActionBuilder(i.default.FETCH_PARTICIPANTS_COMPLETE,r).withRoom(t)).withActors.apply(s,d(l)).build();return n(u)})}},clearParticipants:function(e){return(0,o.createAction)(i.default.CLEAR_PARTICIPANTS,e)},leaveRoom:function(e){return(0,o.createAction)(i.default.LEAVE_ROOM,e)},updateMessages:function(t,n,r){return function(l){var c=e.get(n,"info.room_id");(0,u.default)(c,"room must contain an id");var f=-e.toSafeInteger(1e6*Math.random()),d=new Date,p={message:t,timestamp:d,messageId:f,userId:r,roomId:c};l((0,o.createAction)(i.default.UPDATE_MESSAGES,p));var h=void 0;if(e.get(n,"info.room_type")===a.RoomTypes.THREAD){var m=e.get(n,"info.room_payload"),y=e.get(m,"room_id"),v=e.get(m,"message_id");h=s.default.replyTo(y,v,t)}else h=s.default.postMessage(t,c);return h.then(function(e){var t={messageId:f,userId:r,roomId:c,result:e};return l((0,o.createAction)(i.default.UPDATE_MESSAGES_COMPLETE,t)),e}).catch(function(e){var t={messageId:f,userId:r,roomId:c};throw l((0,o.createAction)(i.default.UPDATE_MESSAGES_FAILURE,t)),e})}},clearEventsList:function(e){return(0,o.createAction)(i.default.CLEAR_EVENT_LIST,e)}}}).call(this,n(4),n(7))},2538:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),a=i(n(2195));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(t){var n=t.highlight?"notice highlight":t.error?"notice error":"notice",r=t.showSep?"with-lines":"";return e.createElement("div",{styleName:n+" "+r},e.createElement("div",{styleName:"notice-content"},t.children))};s.propTypes={children:o.default.node.isRequired,highlight:o.default.bool,error:o.default.bool,showSep:o.default.bool},s.defaultProps={showSep:!0,error:!1,highlight:!1},t.default=r(a.default,{allowMultiple:!0})(s)}).call(this,n(1),n(6))},2539:function(e,t,n){"use strict";(function(e,r,o){Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(2229),s=y(n(39)),l=n(15),u=y(n(0)),c=y(n(2505)),f=y(n(2537)),d=n(2187),p=n(27),h=n(2536),m=y(n(4020));function y(e){return e&&e.__esModule?e:{default:e}}var v,g,_,E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var b=f.default.leaveRoom,T=e(m.default,{allowMultiple:!0})((_=g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isLoading:!0,hasError:!1,threadId:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),E(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.roomId,r=t.messageId;(0,t.fetchThread)(n,r).catch(function(){e.setState({isLoading:!1,hasError:!0})}).then(function(t){var n=o.get(t,"thread.room_id");e.setState({isLoading:!1,threadId:n})})}},{key:"componentWillUnmount",value:function(){var e=this.props.leaveRoom,t=this.state.threadId;t&&e(t)}},{key:"render",value:function(){var e=this.props,t=e.rooms,n=e.roomTitle,a=e.messageId,u=this.state,f=u.threadId,p=u.hasError,h=u.isLoading,m=o.get(t,f),y=o.has(m,"info");return h?r.createElement(l.LoadingWrapper,{isLoading:!0}):p?r.createElement("div",{styleName:"thread-loading-error"},r.createElement("div",{styleName:"thread-loading-error inner"},r.createElement("span",null,r.createElement(s.default,{glyph:"alert-xl",text:(0,d.__)(i.ERR_UNABLE_TO_LOAD_ROOM)}),(0,d.__)(i.ERR_UNABLE_TO_LOAD_ROOM)))):y&&r.createElement(c.default,{room:m,roomTitle:n,messageId:a})}}]),t}(),g.propTypes={roomId:u.default.string.isRequired,roomTitle:u.default.string.isRequired,messageId:u.default.number.isRequired},v=_))||v;t.default=(0,p.connect)(function(e){return{rooms:e.rooms}},{fetchThread:h.fetchThread,leaveRoom:b})(T)}).call(this,n(6),n(1),n(4))},2540:function(e,t,n){e.exports={"std-font-9":"styles--std-font-9--3QlMu","project-font":"styles--project-font--1gkS_",project:"styles--project--rNMDM","std-font-12":"styles--std-font-12--2eDjP","room-title-font":"styles--room-title-font--2TKIe","room-title":"styles--room-title--Z5B1o","user-font":"styles--user-font--33_Qa","chatroom-members-count":"styles--chatroom-members-count--3Mz-H",participants:"styles--participants--26IB2","thread-activity":"styles--thread-activity--2q2fu","std-font-14":"styles--std-font-14--MHe2A","std-font-16":"styles--std-font-16--1o_p3","std-font-18":"styles--std-font-18--3_hEt","chatroom-title-font":"styles--chatroom-title-font--1bNAa","chatroom-title":"styles--chatroom-title--Fy80_","screen-content":"styles--screen-content--2Lydw",circle:"styles--circle--3yEgt","gray-light":"styles--gray-light--J4bST",turquoise:"styles--turquoise--2cbVu","avatar-circle":"styles--avatar-circle--1E4tQ","avatar-circle-default":"styles--avatar-circle-default--26mnz","role-mentor":"styles--role-mentor--1_ALJ","role-staff":"styles--role-staff--2Ai-D","avatar-img":"styles--avatar-img--t3KSm","avatar-default":"styles--avatar-default--2qw3F",clearfix:"styles--clearfix--1M1Fq","rel-pos":"styles--rel-pos--3S-kT",invisible:"styles--invisible--1J4TL",photo:"styles--photo--3fq4l","no-photo":"styles--no-photo--1Pwy2","no-margin":"styles--no-margin--1Ke6K","chatroom-list":"styles--chatroom-list--1lhBv","chatroom-list-item":"styles--chatroom-list-item--2MCKb","chatroom-list-group":"styles--chatroom-list-group--2ysrN","chatroom-list-group-title":"styles--chatroom-list-group-title--29kKv",unread:"styles--unread--13N66","chatroom-list-group-action":"styles--chatroom-list-group-action--2xqeN","chatroom-list-part":"styles--chatroom-list-part--3hwiT","chatroom-list-part-title":"styles--chatroom-list-part-title--16ciy","chatroom-list-part-action":"styles--chatroom-list-part-action--3OwSo",trigger:"styles--trigger--2zuul",disabled:"styles--disabled--1eHLN","room-unread-badge":"styles--room-unread-badge--mHtcj","room-unread-badge-mention":"styles--room-unread-badge-mention--2Af4B"}},2541:function(e,t,n){e.exports={"std-font-9":"styles--std-font-9--1EqeB","project-font":"styles--project-font--dbGlh","std-font-12":"styles--std-font-12--2h7PF","room-title-font":"styles--room-title-font--3MP9R","user-font":"styles--user-font--3qrf2","std-font-14":"styles--std-font-14--2XWRW","std-font-16":"styles--std-font-16--2U7tg","std-font-18":"styles--std-font-18--VSbbh","chatroom-title-font":"styles--chatroom-title-font--2S_R1","screen-content":"styles--screen-content--83KgP",circle:"styles--circle--28v2h","gray-light":"styles--gray-light--14ldR",turquoise:"styles--turquoise--AtWqD","avatar-circle":"styles--avatar-circle--3e4R6","avatar-circle-default":"styles--avatar-circle-default--2gg0o","role-mentor":"styles--role-mentor--TcJwJ","role-staff":"styles--role-staff--K_Iyp","avatar-img":"styles--avatar-img--2McaM","avatar-default":"styles--avatar-default--1pw1h",clearfix:"styles--clearfix--1Soeq","rel-pos":"styles--rel-pos--1k8lA",invisible:"styles--invisible--pm_5_",photo:"styles--photo--pY26d","no-photo":"styles--no-photo--1eqG7","no-margin":"styles--no-margin--DuakF",editor:"styles--editor--m8X0x",rotate:"styles--rotate--YJo_L",label:"styles--label--SMocz",control:"styles--control--1VNl7",buttons:"styles--buttons--1dRfa",modal:"styles--modal--STFla",save:"styles--save--1nvH9",cancel:"styles--cancel--3wmZe",inline:"styles--inline--Fletn",description:"styles--description--46ByQ"}},2542:function(e,t,n){var r=n(389),o=n(145)("toStringTag"),a="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:a?r(t):"Object"==(i=r(t))&&"function"==typeof t.callee?"Arguments":i}},2543:function(e,t,n){var r=n(175),o=n(666),a=n(145)("species");e.exports=function(e,t){var n,i=r(e).constructor;return void 0===i||void 0==(n=r(i)[a])?t:o(n)}},2544:function(e,t,n){var r,o,a,i=n(388),s=n(4053),l=n(709),u=n(408),c=n(101),f=c.process,d=c.setImmediate,p=c.clearImmediate,h=c.MessageChannel,m=c.Dispatch,y=0,v={},g=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},_=function(e){g.call(e.data)};d&&p||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++y]=function(){s("function"==typeof e?e:Function(e),t)},r(y),y},p=function(e){delete v[e]},"process"==n(389)(f)?r=function(e){f.nextTick(i(g,e,1))}:m&&m.now?r=function(e){m.now(i(g,e,1))}:h?(a=(o=new h).port2,o.port1.onmessage=_,r=i(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(e){c.postMessage(e+"","*")},c.addEventListener("message",_,!1)):r="onreadystatechange"in u("script")?function(e){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),g.call(e)}}:function(e){setTimeout(i(g,e,1),0)}),e.exports={set:d,clear:p}},2545:function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},2546:function(e,t,n){var r=n(175),o=n(148),a=n(2369);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},2547:function(e,t,n){e.exports={default:n(4061),__esModule:!0}},2548:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var o=c(n(2547)),a=c(n(26)),i=c(n(95)),s=c(n(25)),l=c(n(30)),u=c(n(4069));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(t){function n(){return(0,a.default)(this,n),(0,s.default)(this,(n.__proto__||(0,o.default)(n)).apply(this,arguments))}return(0,l.default)(n,t),(0,i.default)(n,[{key:"render",value:function(){return e.createElement("div",{styleName:"progressbar"},e.createElement("div",{styleName:"bar"},e.createElement("div",{styleName:"filled",style:{width:this.props.progress+"%"}})),this.props.showText&&e.createElement("div",{styleName:"text"},this.props.progress,"%"))}}]),n}(e.Component);f.propTypes={progress:e.PropTypes.number.isRequired,showText:e.PropTypes.bool},f.defaultProps={showText:!0},t.default=r(f,u.default,{allowMultiple:!0})}).call(this,n(1),n(6))},2549:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(4071));var a=function(t){var n=t.size,r=t.image,o=t.highlight,a={width:n,height:n,backgroundImage:"url("+r+")"};return e.createElement("div",{styleName:"image "+(o&&"highlight"),style:a})};a.defaultProps={size:"2em"},a.propTypes={size:e.PropTypes.string,image:e.PropTypes.string,highlight:e.PropTypes.bool},t.default=r(a,o.default,{allowMultiple:!0})}).call(this,n(1),n(6))},3897:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(2192),i=d(n(0)),s=n(27),l=d(n(2190)),u=d(n(3906)),c=n(2191),f=d(n(4086));function d(e){return e&&e.__esModule?e:{default:e}}var p,h,m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var y=(h=p=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e)),a=f.default.getState();return r.has(a,"userData.ndId")&&a.userData.ndId!==e.ndId&&f.default.dispatch((0,c.createAction)(l.default.CLEAR_ALL)),t.updateWindowState({},t.props),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),m(n,[{key:"componentWillReceiveProps",value:function(e){this.updateWindowState(this.props,e)}},{key:"updateWindowState",value:function(e,t){e.isCommunityOpen===t.isCommunityOpen&&e.onCommunityClose===t.onCommunityClose&&e.onNotificationsChanged===t.onNotificationsChanged&&e.features===t.features||f.default.dispatch((0,c.createAction)(l.default.UPDATE_WINDOW,{opened:t.isCommunityOpen,toggleFn:function(){return t.onCommunityClose()},toggleNotification:function(e,n){return t.onNotificationsChanged(e,n)},features:t.features}))}},{key:"render",value:function(){var t=this.props,n=t.ndId,r=t.userId,o=t.ndKey,a=t.locale,i=t.ndTitle,l=t.partKey,c=t.moduleKey,d=t.lessonKey,p=t.conceptKey;return e.createElement(s.Provider,{store:f.default},e.createElement(u.default,{ndId:n,userId:r,ndKey:o,locale:a,ndTitle:i,partKey:l,moduleKey:c,lessonKey:d,conceptKey:p}))}}]),n}(),p.propTypes={isCommunityOpen:i.default.bool.isRequired,onCommunityClose:i.default.func.isRequired,onNotificationsChanged:i.default.func,features:a.FeaturesShape.isRequired,ndId:i.default.number.isRequired,ndKey:i.default.string,userId:i.default.string,locale:i.default.string,ndTitle:i.default.string,partKey:i.default.string,moduleKey:i.default.string,lessonKey:i.default.string,conceptKey:i.default.string},p.defaultProps={isCommunityOpen:!1,onNotificationsChanged:function(){}},h);t.default=y}).call(this,n(1),n(4))},3898:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3899);Object.defineProperty(t,"I18n",{enumerable:!0,get:function(){return r.I18n}}),Object.defineProperty(t,"I18N_CONSTANTS",{enumerable:!0,get:function(){return r.I18N_CONSTANTS}})},3899:function(e,t,n){"use strict";(function(e){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.I18n=t.I18N_CONSTANTS=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(399)),s=d(n(4)),l=d(n(202)),u=d(n(3900)),c=d(n(1)),f=d(n(3903));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h={GEO_API_HEADER:"X-Berlioz-Country",GLOBAL_KEY:"@udacity/ureact-i18n__locale",GLOBAL_LOCALE_MAP_KEY:"@udacity/ureact-i18n__locale_map",JWT_TOKEN_KEY:"_jwt",JWT_TOKEN_KEY_OLD:"_jwt_token",LOCATION_METHOD:{QUERY_PARAM:"_setLocaleFromQueryParam",USER_PREFERENCE_API:"_setLocaleFromUserPreferenceApi",BROWSER_PREFERENCE:"_setLocaleFromBrowserPreference",GEO_API:"_setLocaleFromGeoAPI",DEFAULT:"_setDefaultLocale"},PSEUDOLOCALIZE_KEY:"__test__",USER_PREF_LANG_API:"https://classroom-content.udacity.com/api/v1/graphql"},m=t.I18N_CONSTANTS={DEFAULT_LOCALE:"en-us",DEFAULT_LOCATION:"US",GEO_API:"https://geode.udacity.com",LOCALE_MAP:{ar:"العربية",de:"Deutsch","en-us":"English",es:"Español",id:"Bahasa Indonesia",ja:"日本語",ko:"한국어","pt-br":"Português","zh-cn":"中文（简体）"}},y=[h.LOCATION_METHOD.QUERY_PARAM,h.LOCATION_METHOD.USER_PREFERENCE_API,h.LOCATION_METHOD.BROWSER_PREFERENCE,h.LOCATION_METHOD.GEO_API,h.LOCATION_METHOD.DEFAULT];t.I18n=function(){function t(e,n){var i=this;p(this,t),this.__=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var s=i._lookup(e,i.getLocale());return function(e){var t=e[e.length-1];return t&&t.renderHTML}(n)?function(e){var t=function(t){function n(){return p(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),a(n,[{key:"render",value:function(){return c.default.createElement("span",{dangerouslySetInnerHTML:{__html:e}})}}]),n}(c.default.Component);return c.default.createElement(t,null)}(s(n[0])):s(n[0])},this._lookup=s.default.memoize(function(e,t){var n=this._getLocaleMap(t),r=void 0;return-1!==(r=this.options.debug&&t===h.PSEUDOLOCALIZE_KEY?(0,f.default)(e):e?n&&n[e]||e:"").indexOf("%s")?r:s.default.template(r)},function(e,t){return t+"-"+e}),this._tryNextLocaleMethod=function(e){return function(t){return t||i[e]()}};this.options=o({},{allowPseudo:!1},n),this._setLocaleMap(e)}return a(t,[{key:"activate",value:function(){var t=this,n=window[h.GLOBAL_KEY]||window[h.OLD_GLOBAL_KEY];return n?this._setLocale(n):y.reduce(function(e,n){return e.then(t._tryNextLocaleMethod(n)).catch(function(){return!1})},e.resolve(!1))}}]),a(t,[{key:"getLocale",value:function(){return window[h.GLOBAL_KEY]||v("UREACT-I18N - MISUSE WARNING: Component might not have been activated properly.\n         Make sure you run i18n.activate() before your DOM renders (check the docs).\n         Default language is "+m.DEFAULT_LOCALE),(window[h.GLOBAL_KEY]||m.DEFAULT_LOCALE).toLocaleLowerCase()}},{key:"_setDefaultLocale",value:function(){return this._setLocale(m.DEFAULT_LOCALE)}},{key:"_setLocaleFromGeoAPI",value:function(){var e=this;return this.fetchGeoLocation().then(function(t){return e._setLocale(t.countryCode)})}},{key:"_setLocaleFromBrowserPreference",value:function(){return this._setLocale(this._getNavigatorLocale())}},{key:"_setLocaleFromQueryParam",value:function(){return this._setLocale(function(e,t){t||(t=window.location.href);e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);if(!n)return null;if(!n[2])return"";return decodeURIComponent(n[2].replace(/\+/g," "))}("locale",this._getCurrentURLParams()))}},{key:"_setLocaleFromUserPreference",value:function(){var e=this._getJWT();return this._setLocale(e?(0,u.default)(e).l:null)}},{key:"_setLocaleFromUserPreferenceApi",value:function(){var e=this,t=this._getJWT();return t?(0,l.default)({method:"POST",url:h.USER_PREF_LANG_API,headers:{Authorization:"Bearer "+t},data:{query:"\n    query UserSettingsQuery {\n      user {\n        preferred_language\n      }\n    }"}}).then(function(t){var n;return t.error&&t.error.length&&console.error(t.error[0]),n=s.default.get(t,"data.user.preferred_language")||s.default.get(t,"data.data.user.preferred_language"),e._setLocale(n||null)}):this._setLocale(null)}},{key:"fetchGeoLocation",value:function(){return l.default.get(m.GEO_API).then(function(e){return e.data})}},{key:"_setLocale",value:function(t){var n=this;return new e(function(e){return s.default.isString(t)&&""!==t?(t=t.toLocaleLowerCase(),window[h.GLOBAL_KEY]=t,n.options&&n.options.moment&&n.options.moment.locale(t),e(n.getLocale())):e(!1)})}},{key:"_setLocaleMap",value:function(e){window[h.GLOBAL_LOCALE_MAP_KEY]=function(e,t){var n=void 0;s.default.isFunction(e)?(v("\n      UREACT-I18N - DEPRECATION WARNING: use of 'require.context' when initializing a new I18n instance is deprecated. See updated usage documentation at: https://github.com/udacity/ureact-i18n#step-1-instantiate-a-new-i18n-object\n    "),n=s.default.chain(e.keys()).filter(function(e){return/\.js$/.test(e)}).map(function(t){var n=function(e){return s.default.last(e.split("/")).split(".")[0]}(t).toLowerCase();return[n,e(t)]}).fromPairs().value()):n=e;return s.default.reduce(n,function(e,n,r){return e[r]=s.default.isUndefined(t)||s.default.isUndefined(t[r])?n:o({},t[r],n),e},t||{})}(e,window[h.GLOBAL_LOCALE_MAP_KEY])}},{key:"_getLocaleMap",value:function(e){return window[h.GLOBAL_LOCALE_MAP_KEY][e]||window[h.GLOBAL_LOCALE_MAP_KEY][e.split("-")[0]]}},{key:"_getCurrentURLParams",value:function(){return window.location.search}},{key:"_getNavigatorLocale",value:function(){return navigator.language||navigator.userLanguage}},{key:"_getJWT",value:function(){return i.get(h.JWT_TOKEN_KEY)||i.get(h.JWT_TOKEN_KEY_OLD)}}]),t}();function v(e){0}}).call(this,n(7))},3900:function(e,t,n){"use strict";var r=n(3901);function o(e){this.message=e}o.prototype=new Error,o.prototype.name="InvalidTokenError",e.exports=function(e,t){if("string"!=typeof e)throw new o("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(r(e.split(".")[n]))}catch(e){throw new o("Invalid token specified: "+e.message)}},e.exports.InvalidTokenError=o},3901:function(e,t,n){var r=n(3902);e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(r(e).replace(/(.)/g,function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}(t)}catch(e){return r(t)}}},3902:function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function r(e){this.message=e}r.prototype=new Error,r.prototype.name="InvalidCharacterError",e.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,a,i=0,s=0,l="";a=t.charAt(s++);~a&&(o=i%4?64*o+a:a,i++%4)?l+=String.fromCharCode(255&o>>(-2*i&6)):0)a=n.indexOf(a);return l}},3903:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.35,n=/(<%=?.+?%>)/g;return e.split(n).map(function(e){return n.test(e)?e:e.split(/\b/).map(function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];return e+"~".repeat(Math.floor(e.trim().length*t))}(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("").map(function(e){var t=r[e]||e;return t[Math.floor(Math.random()*t.length)]}).join("")}(e),t)}).join("")}).join("")};var r={A:String.fromCharCode(192,193,194,195,196,197,256,258,260,506,512,514),a:String.fromCharCode(224,225,226,227,228,229,257,259,261,507,513,515),B:String.fromCharCode(223,385,579,665),b:String.fromCharCode(384,386,387,388,389,595),C:String.fromCharCode(262,264,266,268),c:String.fromCharCode(263,265,267,269),D:String.fromCharCode(270,272,393,394),d:String.fromCharCode(271,273),E:String.fromCharCode(274,276,278,280,282,516,518),e:String.fromCharCode(275,277,279,281,283,517,519),F:String.fromCharCode(401),f:String.fromCharCode(402),G:String.fromCharCode(284,286,288,290),g:String.fromCharCode(285,287,289,291),H:String.fromCharCode(292,294),h:String.fromCharCode(293,295),I:String.fromCharCode(296,298,300,302,304),i:String.fromCharCode(297,299,301,303,305),J:String.fromCharCode(309),j:String.fromCharCode(308),K:String.fromCharCode(310,408),k:String.fromCharCode(311,312,409),L:String.fromCharCode(313,315,317,319,321),l:String.fromCharCode(314,316,318,320,322),N:String.fromCharCode(323,325,327,330,413),n:String.fromCharCode(324,326,328,329,331,414),O:String.fromCharCode(332,334,336,416),o:String.fromCharCode(333,335,337,417),P:String.fromCharCode(420),p:String.fromCharCode(421,447),Q:String.fromCharCode(490,492),q:String.fromCharCode(491,493,587),R:String.fromCharCode(340,342,344,422),r:String.fromCharCode(341,343,345),S:String.fromCharCode(346,348,350,352),s:String.fromCharCode(347,349,351,353),T:String.fromCharCode(354,356,358),t:String.fromCharCode(355,357,359),U:String.fromCharCode(360,362,364,366,368,370),u:String.fromCharCode(361,363,365,367,369,371),W:String.fromCharCode(372),w:String.fromCharCode(373),Y:String.fromCharCode(374,376,435,562,590),y:String.fromCharCode(375,436,563,591),Z:String.fromCharCode(377,379,381,437),z:String.fromCharCode(378,380,382,438)}},3905:function(e,t,n){(function(n){var r;t=e.exports=Y,r="object"==typeof n&&n.env&&n.env.NODE_DEBUG&&/\bsemver\b/i.test(n.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var o=256,a=Number.MAX_SAFE_INTEGER||9007199254740991,i=t.re=[],s=t.src=[],l=0,u=l++;s[u]="0|[1-9]\\d*";var c=l++;s[c]="[0-9]+";var f=l++;s[f]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=l++;s[d]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var p=l++;s[p]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var h=l++;s[h]="(?:"+s[u]+"|"+s[f]+")";var m=l++;s[m]="(?:"+s[c]+"|"+s[f]+")";var y=l++;s[y]="(?:-("+s[h]+"(?:\\."+s[h]+")*))";var v=l++;s[v]="(?:-?("+s[m]+"(?:\\."+s[m]+")*))";var g=l++;s[g]="[0-9A-Za-z-]+";var _=l++;s[_]="(?:\\+("+s[g]+"(?:\\."+s[g]+")*))";var E=l++,b="v?"+s[d]+s[y]+"?"+s[_]+"?";s[E]="^"+b+"$";var T="[v=\\s]*"+s[p]+s[v]+"?"+s[_]+"?",O=l++;s[O]="^"+T+"$";var w=l++;s[w]="((?:<|>)?=?)";var S=l++;s[S]=s[c]+"|x|X|\\*";var C=l++;s[C]=s[u]+"|x|X|\\*";var P=l++;s[P]="[v=\\s]*("+s[C]+")(?:\\.("+s[C]+")(?:\\.("+s[C]+")(?:"+s[y]+")?"+s[_]+"?)?)?";var A=l++;s[A]="[v=\\s]*("+s[S]+")(?:\\.("+s[S]+")(?:\\.("+s[S]+")(?:"+s[v]+")?"+s[_]+"?)?)?";var R=l++;s[R]="^"+s[w]+"\\s*"+s[P]+"$";var M=l++;s[M]="^"+s[w]+"\\s*"+s[A]+"$";var k=l++;s[k]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var I=l++;s[I]="(?:~>?)";var L=l++;s[L]="(\\s*)"+s[I]+"\\s+",i[L]=new RegExp(s[L],"g");var N=l++;s[N]="^"+s[I]+s[P]+"$";var j=l++;s[j]="^"+s[I]+s[A]+"$";var x=l++;s[x]="(?:\\^)";var D=l++;s[D]="(\\s*)"+s[x]+"\\s+",i[D]=new RegExp(s[D],"g");var F=l++;s[F]="^"+s[x]+s[P]+"$";var U=l++;s[U]="^"+s[x]+s[A]+"$";var q=l++;s[q]="^"+s[w]+"\\s*("+T+")$|^$";var B=l++;s[B]="^"+s[w]+"\\s*("+b+")$|^$";var H=l++;s[H]="(\\s*)"+s[w]+"\\s*("+T+"|"+s[P]+")",i[H]=new RegExp(s[H],"g");var W=l++;s[W]="^\\s*("+s[P]+")\\s+-\\s+("+s[P]+")\\s*$";var G=l++;s[G]="^\\s*("+s[A]+")\\s+-\\s+("+s[A]+")\\s*$";var K=l++;s[K]="(<|>)?=?\\s*\\*";for(var z=0;z<l;z++)r(z,s[z]),i[z]||(i[z]=new RegExp(s[z]));function V(e,t){if(e instanceof Y)return e;if("string"!=typeof e)return null;if(e.length>o)return null;if(!(t?i[O]:i[E]).test(e))return null;try{return new Y(e,t)}catch(e){return null}}function Y(e,t){if(e instanceof Y){if(e.loose===t)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>o)throw new TypeError("version is longer than "+o+" characters");if(!(this instanceof Y))return new Y(e,t);r("SemVer",e,t),this.loose=t;var n=e.trim().match(t?i[O]:i[E]);if(!n)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>a||this.major<0)throw new TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<a)return t}return e}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}t.parse=V,t.valid=function(e,t){var n=V(e,t);return n?n.version:null},t.clean=function(e,t){var n=V(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=Y,Y.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Y.prototype.toString=function(){return this.version},Y.prototype.compare=function(e){return r("SemVer.compare",this.version,this.loose,e),e instanceof Y||(e=new Y(e,this.loose)),this.compareMain(e)||this.comparePre(e)},Y.prototype.compareMain=function(e){return e instanceof Y||(e=new Y(e,this.loose)),X(this.major,e.major)||X(this.minor,e.minor)||X(this.patch,e.patch)},Y.prototype.comparePre=function(e){if(e instanceof Y||(e=new Y(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return X(n,o)}while(++t)},Y.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new Y(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(ee(e,t))return null;var n=V(e),r=V(t);if(n.prerelease.length||r.prerelease.length){for(var o in n)if(("major"===o||"minor"===o||"patch"===o)&&n[o]!==r[o])return"pre"+o;return"prerelease"}for(var o in n)if(("major"===o||"minor"===o||"patch"===o)&&n[o]!==r[o])return o},t.compareIdentifiers=X;var J=/^[0-9]+$/;function X(e,t){var n=J.test(e),r=J.test(t);return n&&r&&(e=+e,t=+t),n&&!r?-1:r&&!n?1:e<t?-1:e>t?1:0}function Q(e,t,n){return new Y(e,n).compare(new Y(t,n))}function Z(e,t,n){return Q(e,t,n)>0}function $(e,t,n){return Q(e,t,n)<0}function ee(e,t,n){return 0===Q(e,t,n)}function te(e,t,n){return 0!==Q(e,t,n)}function ne(e,t,n){return Q(e,t,n)>=0}function re(e,t,n){return Q(e,t,n)<=0}function oe(e,t,n,r){var o;switch(t){case"===":"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),o=e===n;break;case"!==":"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),o=e!==n;break;case"":case"=":case"==":o=ee(e,n,r);break;case"!=":o=te(e,n,r);break;case">":o=Z(e,n,r);break;case">=":o=ne(e,n,r);break;case"<":o=$(e,n,r);break;case"<=":o=re(e,n,r);break;default:throw new TypeError("Invalid operator: "+t)}return o}function ae(e,t){if(e instanceof ae){if(e.loose===t)return e;e=e.value}if(!(this instanceof ae))return new ae(e,t);r("comparator",e,t),this.loose=t,this.parse(e),this.semver===ie?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return X(t,e)},t.major=function(e,t){return new Y(e,t).major},t.minor=function(e,t){return new Y(e,t).minor},t.patch=function(e,t){return new Y(e,t).patch},t.compare=Q,t.compareLoose=function(e,t){return Q(e,t,!0)},t.rcompare=function(e,t,n){return Q(t,e,n)},t.sort=function(e,n){return e.sort(function(e,r){return t.compare(e,r,n)})},t.rsort=function(e,n){return e.sort(function(e,r){return t.rcompare(e,r,n)})},t.gt=Z,t.lt=$,t.eq=ee,t.neq=te,t.gte=ne,t.lte=re,t.cmp=oe,t.Comparator=ae;var ie={};function se(e,t){if(e instanceof se)return e.loose===t?e:new se(e.raw,t);if(e instanceof ae)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function le(e){return!e||"x"===e.toLowerCase()||"*"===e}function ue(e,t,n,r,o,a,i,s,l,u,c,f,d){return((t=le(n)?"":le(r)?">="+n+".0.0":le(o)?">="+n+"."+r+".0":">="+t)+" "+(s=le(l)?"":le(u)?"<"+(+l+1)+".0.0":le(c)?"<"+l+"."+(+u+1)+".0":f?"<="+l+"."+u+"."+c+"-"+f:"<="+s)).trim()}function ce(e,t){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length){for(n=0;n<e.length;n++)if(r(e[n].semver),e[n].semver!==ie&&e[n].semver.prerelease.length>0){var o=e[n].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function fe(e,t,n){try{t=new se(t,n)}catch(e){return!1}return t.test(e)}function de(e,t,n,r){var o,a,i,s,l;switch(e=new Y(e,r),t=new se(t,r),n){case">":o=Z,a=re,i=$,s=">",l=">=";break;case"<":o=$,a=ne,i=Z,s="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(fe(e,t,r))return!1;for(var u=0;u<t.set.length;++u){var c=null,f=null;if(t.set[u].forEach(function(e){e.semver===ie&&(e=new ae(">=0.0.0")),c=c||e,f=f||e,o(e.semver,c.semver,r)?c=e:i(e.semver,f.semver,r)&&(f=e)}),c.operator===s||c.operator===l)return!1;if((!f.operator||f.operator===s)&&a(e,f.semver))return!1;if(f.operator===l&&i(e,f.semver))return!1}return!0}ae.prototype.parse=function(e){var t=this.loose?i[q]:i[B],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new Y(n[2],this.loose):this.semver=ie},ae.prototype.toString=function(){return this.value},ae.prototype.test=function(e){return r("Comparator.test",e,this.loose),this.semver===ie||("string"==typeof e&&(e=new Y(e,this.loose)),oe(e,this.operator,this.semver,this.loose))},ae.prototype.intersects=function(e,t){if(!(e instanceof ae))throw new TypeError("a Comparator is required");var n;if(""===this.operator)return n=new se(e.value,t),fe(this.value,n,t);if(""===e.operator)return n=new se(this.value,t),fe(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),o=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),a=this.semver.version===e.semver.version,i=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=oe(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),l=oe(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||o||a&&i||s||l},t.Range=se,se.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.loose;e=e.trim(),r("range",e,t);var n=t?i[G]:i[W];e=e.replace(n,ue),r("hyphen replace",e),e=e.replace(i[H],"$1$2$3"),r("comparator trim",e,i[H]),e=(e=(e=e.replace(i[L],"$1~")).replace(i[D],"$1^")).split(/\s+/).join(" ");var o=t?i[q]:i[B],a=e.split(" ").map(function(e){return function(e,t){return r("comp",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){r("caret",e,t);var n=t?i[U]:i[F];return e.replace(n,function(t,n,o,a,i){var s;return r("caret",e,t,n,o,a,i),le(n)?s="":le(o)?s=">="+n+".0.0 <"+(+n+1)+".0.0":le(a)?s="0"===n?">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":">="+n+"."+o+".0 <"+(+n+1)+".0.0":i?(r("replaceCaret pr",i),"-"!==i.charAt(0)&&(i="-"+i),s="0"===n?"0"===o?">="+n+"."+o+"."+a+i+" <"+n+"."+o+"."+(+a+1):">="+n+"."+o+"."+a+i+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+a+i+" <"+(+n+1)+".0.0"):(r("no pr"),s="0"===n?"0"===o?">="+n+"."+o+"."+a+" <"+n+"."+o+"."+(+a+1):">="+n+"."+o+"."+a+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+a+" <"+(+n+1)+".0.0"),r("caret return",s),s})}(e,t)}).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){var n=t?i[j]:i[N];return e.replace(n,function(t,n,o,a,i){var s;return r("tilde",e,t,n,o,a,i),le(n)?s="":le(o)?s=">="+n+".0.0 <"+(+n+1)+".0.0":le(a)?s=">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":i?(r("replaceTilde pr",i),"-"!==i.charAt(0)&&(i="-"+i),s=">="+n+"."+o+"."+a+i+" <"+n+"."+(+o+1)+".0"):s=">="+n+"."+o+"."+a+" <"+n+"."+(+o+1)+".0",r("tilde return",s),s})}(e,t)}).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map(function(e){return function(e,t){e=e.trim();var n=t?i[M]:i[R];return e.replace(n,function(t,n,o,a,i,s){r("xRange",e,t,n,o,a,i,s);var l=le(o),u=l||le(a),c=u||le(i),f=c;return"="===n&&f&&(n=""),l?t=">"===n||"<"===n?"<0.0.0":"*":n&&f?(u&&(a=0),c&&(i=0),">"===n?(n=">=",u?(o=+o+1,a=0,i=0):c&&(a=+a+1,i=0)):"<="===n&&(n="<",u?o=+o+1:a=+a+1),t=n+o+"."+a+"."+i):u?t=">="+o+".0.0 <"+(+o+1)+".0.0":c&&(t=">="+o+"."+a+".0 <"+o+"."+(+a+1)+".0"),r("xRange return",t),t})}(e,t)}).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(i[K],"")}(e,t),r("stars",e),e}(e,t)}).join(" ").split(/\s+/);return this.loose&&(a=a.filter(function(e){return!!e.match(o)})),a=a.map(function(e){return new ae(e,t)})},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some(function(n){return n.every(function(n){return e.set.some(function(e){return e.every(function(e){return n.intersects(e,t)})})})})},t.toComparators=function(e,t){return new se(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new Y(e,this.loose));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e))return!0;return!1},t.satisfies=fe,t.maxSatisfying=function(e,t,n){var r=null,o=null;try{var a=new se(t,n)}catch(e){return null}return e.forEach(function(e){a.test(e)&&(r&&-1!==o.compare(e)||(o=new Y(r=e,n)))}),r},t.minSatisfying=function(e,t,n){var r=null,o=null;try{var a=new se(t,n)}catch(e){return null}return e.forEach(function(e){a.test(e)&&(r&&1!==o.compare(e)||(o=new Y(r=e,n)))}),r},t.validRange=function(e,t){try{return new se(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return de(e,t,"<",n)},t.gtr=function(e,t,n){return de(e,t,">",n)},t.outside=de,t.prerelease=function(e,t){var n=V(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new se(e,n),t=new se(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof Y)return e;if("string"!=typeof e)return null;var t=e.match(i[k]);return null==t?null:V((t[1]||"0")+"."+(t[2]||"0")+"."+(t[3]||"0"))}}).call(this,n(89))},3906:function(e,t,n){"use strict";(function(e,r,o){Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(2217),s=n(2198),l=w(n(2218)),u=w(n(3909)),c=w(n(4023)),f=n(15),d=w(n(4027)),p=w(n(0)),h=n(2188),m=n(2192),y=w(n(4077)),v=w(n(4081)),g=w(n(2368)),_=w(n(4082)),E=n(2191),b=n(27),T=w(n(22)),O=w(n(2231));function w(e){return e&&e.__esModule?e:{default:e}}var S,C,P,A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}var k=r(O.default,{allowMultiple:!0})((P=C=function(t){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=r=M(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),r.handleRemove=function(e){r.props.removeToast(e)},M(r,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.Component),R(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.checkWebsocket,n=e.fetchProfile,r=e.myProfile;this.trackSessionInit(this.props),this.isProfileLoaded(r)||n(),t()}},{key:"componentWillReceiveProps",value:function(t){var n=t.isCommunityOpen,r=t.onCommunityClose,o=t.hasNotification,a=t.onNotification,i=t.fetchProfile,l=t.myProfile,u=t.createToast,c=t.updateScreen,f=t.screen,d=t.mentions;if(this.trackSessionStart(t,this.props),this.props.hasNotification!==o){var p=function(t){return e.chain(t).map(e.size).values().sum().value()}(d);a(o,(0,s.displayMentionCount)(p))}if(this.props.isCommunityOpen||!n||this.isProfileLoaded(l)){if(this.props.myProfile!==l&&!l.loading)return l.error&&n?(u(g.default.createError({message:"Unable to load profile, please try again."})),void r()):void(e.get(l,"needs_initializing",!1)?c({screenType:h.Screens.PROFILE}):e.isEmpty(f)&&c({screenType:h.Screens.HOME}))}else i()}},{key:"componentDidUpdate",value:function(e){this.trackSessionEnd(this.props,e)}},{key:"componentWillUnmount",value:function(){var e=this.props.closeWebsocket;this.trackSessionEnd(null,this.props),e()}},{key:"isScreenLoaded",value:function(t){return!e.isEmpty(t)}},{key:"isProfileLoaded",value:function(e){return e&&!e.loading&&!e.error}},{key:"trackSessionInit",value:function(t){return(0,t.setUserData)(e.pick(t,["ndKey","ndId","ndTitle","userId","locale","partKey","moduleKey","lessonKey","conceptKey"]))}},{key:"trackSessionStart",value:function(t,n){var r=t.userId,o=t.ndId,a=t.setUserData,u=t.userData;if(!e.get(n,"isCommunityOpen",!1)&&t.isCommunityOpen){var c=(0,s.generateSessionIDString)(r,o),f=e.get(n,"hasNotification",!1),d=A({},u,{sessionId:c,hadNotification:f});l.default.track(i.UCHAT_START,d),a({sessionId:c})}}},{key:"trackSessionEnd",value:function(t,n){var r=n.userData;if(n.isCommunityOpen&&!e.get(t,"isCommunityOpen",!1)){var o=A({},r);l.default.track(i.UCHAT_END,o)}}},{key:"renderScreen",value:function(t,n){(0,T.default)(!e.isEmpty(t),"there should always be a screen present");var r=e.last(t);switch(r.screenType){case h.Screens.HOME:return o.createElement(c.default,{ndId:n});case h.Screens.CHAT:return o.createElement(u.default,{screen:r,roomTitle:r.roomTitle});case h.Screens.PROFILE:return o.createElement(d.default,null);case h.Screens.THREADLIST:return o.createElement(y.default,null);case h.Screens.THREAD:return o.createElement(v.default,{roomId:r.roomId,roomTitle:r.roomTitle,messageId:r.messageId});default:return(0,T.default)(!1,"UChatContainer tried to render invalid screen "+r.screenType),null}}},{key:"render",value:function(){var e=this.props,t=e.isCommunityOpen,n=e.screen,r=e.ndId,a=e.toasts,i=e.myProfile,s=this.isProfileLoaded(i),l=this.isScreenLoaded(n),u=!s||!l;return o.createElement("div",null,o.createElement("div",{styleName:t?"container":"hidden"},u?o.createElement(f.LoadingWrapper,{isLoading:!0}):this.renderScreen(n,r)),o.createElement(_.default,{toasts:a,onRemove:this.handleRemove}))}}]),n}(),C.propTypes={isCommunityOpen:p.default.bool.isRequired,onCommunityClose:p.default.func.isRequired,ndId:p.default.number.isRequired,ndKey:p.default.string,ndTitle:p.default.string,userId:p.default.string,locale:p.default.string,screen:m.ScreensShape.isRequired,partKey:p.default.string,moduleKey:p.default.string,lessonKey:p.default.string,conceptKey:p.default.string},S=P))||S,I=(0,E.actionsBinder)("updateScreen","fetchProfile","removeToast","createToast","setUserData","checkWebsocket","closeWebsocket");t.default=(0,b.connect)(function(e){return{myProfile:e.profiles.me,screen:e.screen,toasts:e.toasts,isCommunityOpen:e.window.opened,onCommunityClose:e.window.toggleFn,hasNotification:e.notifications.has_notification,mentions:e.notifications.unreadMentions,onNotification:e.window.toggleNotification,userData:e.userData}},I)(k)}).call(this,n(4),n(6),n(1))},3907:function(e,t,n){"use strict";(function(t,r){var o=n(3908),a=300;function i(e,n,o,i,s){return new t(function(t,l){if(window.analytics){var u=!1;window.analytics[e](n,o,i,c),setTimeout(c,a)}else l(new Error("Missing window.analytics"));function c(){u||(u=!0,r.isFunction(s)&&s.apply(this,arguments),t(arguments))}})}e.exports={init:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!window.analytics)throw new Error("Missing Segment snippet in index.html");if(!window.analytics.load)throw new Error("Segment has already been loaded");window.analytics.load(e),t&&window.analytics.ready(function(){window.analytics._integrations["Segment.io"].options.apiHost="analyticsevents.udacity.com/v1",window.analytics.page()})},track:function(e,t,n,r){return i("track",e,t,n,r)},page:function(e,t,n,r){return i("page",e,t,n,r)},identify:function(e,t){return i("identify",e.id,{email:e.email},null,t)},createAgent:o.createAgent}}).call(this,n(7),n(4))},3908:function(e,t,n){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var a="https://analytics-iframe.udacity.com",i=console||e.reduce(["log","error","warn"],function(t,n){return t[n]=e.noop,t},{}),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=r({interval:1e3,src:a,threshold:100},e),this.iframe=null,this.queue=[]}return o(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.key,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.config.key=t,!t)throw new Error("No write key specified");var o=this.config.interval;return n.resolve(this.iframe).then(function(n){if(n)throw new Error("Analytics agent is already initialized");return e._push("load",[t]),e._createIframe()}).then(function(t){return e.iframe=t,r&&e._push("useProxy"),setInterval(e.dispatch.bind(e),o),e})}},{key:"dispatch",value:function(){var t=Date.now()+this.config.interval;for(this.queue.length>this.config.threshold&&this._flushAll();this.queue.length>0&&Date.now()<t&&e.isFunction(this.iframe.contentWindow.postMessage);){var n=this.queue.shift()||{};this.iframe.contentWindow.postMessage(JSON.stringify(r({type:"analytics"},n)),this.config.src)}}},{key:"identify",value:function(){var t=this,n=arguments,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.id,a=r.email,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.noop;return this._push("identify",[o,{email:a},null]).then(function(){return t._invoke(i,t,n)})}},{key:"page",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this,a=arguments,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.noop,l=e.assign({},{url:window.location.href,title:document.title,referrer:document.referrer,search:window.location.search,path:document.location.href},r);return this._push("page",[t,n,l,i]).then(function(){return o._invoke(s,o,a)})}},{key:"track",value:function(t,n){var r=this,o=arguments,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.noop;return this._push("track",[t,n,a]).then(function(){return r._invoke(i,r,o)})}},{key:"_createIframe",value:function(){var e=this;return new n(function(t,n){var r=document.createElement("iframe");r.src=e.config.src,r.style.display="none",r.height=0,r.width=0,r["aria-hidden"]="true",r.onload=function(){t(r)};try{document.body.appendChild(r)}catch(e){r.parentNode.removeChild(r),n(new Error("IFrame failed to load: "+e.message))}})}},{key:"_flushAll",value:function(){i.warn("Flushing "+this.queue.length+" events..."),this.queue.length=0}},{key:"_push",value:function(e,t){var r=this;return new n(function(n,o){e||o(new Error("Must supply method")),r.queue.push({method:e,args:t}),n()})}},{key:"_invoke",value:function(t,n,r){return e.isFunction(t)&&t.apply(n,r),r}}]),t}();t.default=s,t.createAgent=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new(Function.prototype.bind.apply(s,[null].concat(t)))}}).call(this,n(4),n(7))},3909:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=d(n(3910)),i=d(n(2263)),s=d(n(0)),l=d(n(1)),u=n(2192),c=n(2187),f=d(n(2231));function d(e){return e&&e.__esModule?e:{default:e}}var p,h,m,y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var v=e(f.default)((m=h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),y(t,[{key:"render",value:function(){var e=this.props,t=e.screen,n=e.roomTitle,o=r.isNumber(t.activeThreadMessageId)?(0,c.__)("Thread: <%= roomTitle %>",{roomTitle:n}):n;return l.default.createElement("div",{styleName:"chatscreen"},l.default.createElement(i.default,{isBackButtonVisible:!0,title:o}),l.default.createElement(a.default,{roomId:t.roomId,roomTitle:n,activeThreadMessageId:t.activeThreadMessageId,messageId:t.messageId}))}}]),t}(),h.propTypes={screen:u.ScreenShape.isRequired,roomTitle:s.default.string.isRequired},p=m))||p;t.default=v}).call(this,n(6),n(4))},3910:function(e,t,n){"use strict";(function(e,r,o){Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(2229),s=g(n(39)),l=n(15),u=n(2192),c=g(n(0)),f=g(n(2505)),d=g(n(2539)),p=n(2187),h=n(2191),m=g(n(28)),y=n(27),v=g(n(2195));function g(e){return e&&e.__esModule?e:{default:e}}var _,E,b,T=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var O=e(v.default,{allowMultiple:!0})((b=E=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),T(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.roomId,n=e.myProfile,r=e.fetchRoom,o=e.updateActivity,a=e.messageId;r(t,n.id,a).then(function(){o(t,!0)})}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.leaveRoom,n=e.updateActivity,r=e.roomId,o=e.clearEventsList;t(r),n(r,!1),o(r)}},{key:"isRoomLoading",value:function(e){return!!e&&o.get(e,"loading",!1)}},{key:"hasRoomError",value:function(e){return!!e&&o.has(e,"error")}},{key:"isRoomLoaded",value:function(e){return!!e&&o.get(e,"loaded",!1)}},{key:"render",value:function(){var e=this.props,t=e.roomId,n=e.roomTitle,a=e.rooms,u=e.activeThreadMessageId,c=o.get(a,t),h=this.isRoomLoading(c),y=this.hasRoomError(c),v=this.isRoomLoaded(c),g=o.isNumber(u);return h?r.createElement(l.LoadingWrapper,{isLoading:!0}):y?r.createElement("div",{styleName:"room-loading-error"},r.createElement("div",{styleName:"room-loading-error inner"},r.createElement("span",null,r.createElement(s.default,{glyph:"alert-xl",text:(0,p.__)(i.ERR_UNABLE_TO_LOAD_ROOM)}),(0,p.__)(i.ERR_UNABLE_TO_LOAD_ROOM)))):v&&r.createElement("div",{styleName:"room-container"},r.createElement("div",{styleName:(0,m.default)("room-container-inner",{hide:g})},r.createElement(f.default,{room:c,roomTitle:n})),g&&r.createElement("div",{styleName:"room-container-inner"},r.createElement(d.default,{roomId:t,messageId:u,roomTitle:n})))}}]),t}(),E.propTypes={roomId:c.default.string.isRequired,myProfile:u.ProfileShape.isRequired,activeThreadMessageId:c.default.number,messageId:c.default.number,leaveRoom:c.default.func,fetchRoom:c.default.func,jumpToBottom:c.default.func,updateActivity:c.default.func,clearEventsList:c.default.func},_=b))||_,w=(0,h.actionsBinder)("leaveRoom","fetchRoom","jumpToBottom","updateActivity","clearEventsList");t.default=(0,y.connect)(function(e){return{myProfile:e.profiles.me,rooms:e.rooms}},w)(O)}).call(this,n(6),n(1),n(4))},3911:function(e,t,n){"use strict";(function(e,r,o,a){Object.defineProperty(t,"__esModule",{value:!0}),t.Input=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.makeParticipantsList=w,t.searchParticipants=S,t.orderSuggestions=C;var s=n(4145),l=n(2197),u=h(n(0)),c=h(n(3977)),f=n(2191),d=n(27),p=h(n(3994));function h(e){return e&&e.__esModule?e:{default:e}}var m,y,v,g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=function(){var t=T(regeneratorRuntime.mark(function t(n,r,o){var a,i,s,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.get(n,"participants.active",[]),i=r.map(function(e){return e.id}),s=e.get(n,"info.room_id"),t.next=5,o.apply(void 0,[s].concat(O(i)));case 5:return l=t.sent,t.abrupt("return",l.map(function(t){var n=!!e.find(a,{id:t.id}),r=e.get(t,"first_name",""),o=e.get(t,"last_name","");return _({},t,{isActive:n,display:r+o})}));case 7:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}();function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function T(e){return function(){var t=e.apply(this,arguments);return new r(function(e,n){return function o(a,i){try{var s=t[a](i),l=s.value}catch(e){return void n(e)}if(!s.done)return r.resolve(l).then(function(e){o("next",e)},function(e){o("throw",e)});e(l)}("next")})}}function O(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function w(e){var t=e.active,n=e.inactive,r=e.admins;return[].concat(O(r||[]),O(t||[]),O(n||[]))}function S(t,n,r){var o=e.get(n,"userId");return(t||[]).filter(function(t){var n=e.get(t,"first","");return t.id!==o&&n.toLowerCase().includes(r.toLowerCase())}).slice(0,8)}function C(t,n){var r=e.orderBy(n,["first_name","last_name"],["asc","asc"]),o=e.filter(r,function(e){return(0,l.isMentorInRoom)(e,(0,l.getRoomId)(t))}),a=e.groupBy(r,"isActive"),i=e.get(a,"true",[]),s=e.get(a,"false",[]);return e.uniq([].concat(O(o),O(i),O(s)))}var P=t.Input=o(p.default,{allowMultiple:!0})((v=y=function(t){function n(){var t,r,o,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return r=o=b(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(s))),o.queryParticipants=e.throttle(function(){var e=T(regeneratorRuntime.mark(function e(t,n){var r,i,s,u,c,f,d,p,h,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.props,i=r.room,s=r.userData,u=r.loadProfiles,c=(0,l.getRoomId)(i),e.next=4,o.getParticipants(c);case 4:return f=e.sent,d=w(f),p=S(d,s,t),e.next=9,E(i,p,u);case 9:return h=e.sent,m=C(i,h),e.abrupt("return",n(m));case 12:case"end":return e.stop()}},e,a)}));return function(t,n){return e.apply(this,arguments)}}(),30),b(o,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.Component),g(n,[{key:"getParticipants",value:function(){var t=T(regeneratorRuntime.mark(function t(n){var r,o,a,i,s,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.props,o=r.room,a=r.fetchParticipants,i=e.get(o,"participants",!1),e.get(i,"loaded",!1)){t.next=9;break}return t.next=6,a(n);case 6:return s=t.sent,l=s.payload,t.abrupt("return",l);case 9:return t.abrupt("return",i);case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.userMsg,n=e.onHandleChangeMsg,r=e.onHandleKeyDown,o=e.addAtMention,i=e.room,u=e.placeholderTextForInput,f=e.mentionEnabled,d=(0,l.getRoomId)(i);return a.createElement(s.MentionsInput,{autoFocus:!0,value:t,onChange:n,onKeyDown:r,id:"userMsg",classNames:p.default,markup:"[@__display__](__type__://__id__)",placeholder:u,displayTransform:function(e,t){return"@"+t}},f&&a.createElement(s.Mention,{type:"user",trigger:"@",data:this.queryParticipants,renderSuggestion:function(e){return a.createElement(c.default,{suggestion:e,roomId:d})},onAdd:o,appendSpaceOnAdd:!0}))}}]),n}(),y.propTypes={userMsg:u.default.string,participants:u.default.array,placeholderTextForInput:u.default.string,userData:u.default.object,onHandleChangeMsg:u.default.func,onHandleKeyDown:u.default.func,addAtMention:u.default.func,loadProfiles:u.default.func},y.defaultProps={userMsg:"",participants:[],placeholderTextForInput:"",userData:{},onHandleChangeMsg:function(){},onHandleKeyDown:function(){},addAtMention:function(){},loadProfiles:function(){}},m=v))||m,A=(0,f.actionsBinder)("fetchParticipants");t.default=(0,d.connect)(null,A)(P)}).call(this,n(4),n(7),n(6),n(1))},3912:function(e,t,n){var r=n(664);e.exports=function(e,t){return r(t,function(t){return e[t]})}},3913:function(e,t,n){var r=n(658),o=n(2288);e.exports=function(e,t){return e&&r(t,o(t),e)}},3914:function(e,t,n){var r=n(100),o=n(394),a=n(3915),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=o(e),n=[];for(var s in e)("constructor"!=s||!t&&i.call(e,s))&&n.push(s);return n}},3915:function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},3916:function(e,t,n){var r=n(658),o=n(680);e.exports=function(e,t){return r(e,o(e),t)}},3917:function(e,t,n){var r=n(658),o=n(2508);e.exports=function(e,t){return r(e,o(e),t)}},3918:function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},3919:function(e,t,n){var r=n(2352),o=n(3920),a=n(3921),i=n(3922),s=n(2510),l="[object Boolean]",u="[object Date]",c="[object Map]",f="[object Number]",d="[object RegExp]",p="[object Set]",h="[object String]",m="[object Symbol]",y="[object ArrayBuffer]",v="[object DataView]",g="[object Float32Array]",_="[object Float64Array]",E="[object Int8Array]",b="[object Int16Array]",T="[object Int32Array]",O="[object Uint8Array]",w="[object Uint8ClampedArray]",S="[object Uint16Array]",C="[object Uint32Array]";e.exports=function(e,t,n){var P=e.constructor;switch(t){case y:return r(e);case l:case u:return new P(+e);case v:return o(e,n);case g:case _:case E:case b:case T:case O:case w:case S:case C:return s(e,n);case c:return new P;case f:case h:return new P(e);case d:return a(e);case p:return new P;case m:return i(e)}}},3920:function(e,t,n){var r=n(2352);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},3921:function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},3922:function(e,t,n){var r=n(198),o=r?r.prototype:void 0,a=o?o.valueOf:void 0;e.exports=function(e){return a?Object(a.call(e)):{}}},3923:function(e,t,n){var r=n(3924),o=n(676),a=n(677),i=a&&a.isMap,s=i?o(i):r;e.exports=s},3924:function(e,t,n){var r=n(661),o=n(144),a="[object Map]";e.exports=function(e){return o(e)&&r(e)==a}},3925:function(e,t,n){var r=n(3926),o=n(676),a=n(677),i=a&&a.isSet,s=i?o(i):r;e.exports=s},3926:function(e,t,n){var r=n(661),o=n(144),a="[object Set]";e.exports=function(e){return o(e)&&r(e)==a}},3927:function(e,t,n){var r=n(398),o=n(3928),a=n(3929),i=n(201);e.exports=function(e,t){return t=r(t,e),null==(e=a(e,t))||delete e[i(o(t))]}},3928:function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},3929:function(e,t,n){var r=n(405),o=n(701);e.exports=function(e,t){return t.length<2?e:r(e,o(t,0,-1))}},3930:function(e,t,n){var r=n(2261);e.exports=function(e){return r(e)?void 0:e}},3931:function(e,t,n){var r=n(3932);e.exports=function(e){return null!=e&&e.length?r(e,1):[]}},3932:function(e,t,n){var r=n(679),o=n(3933);e.exports=function e(t,n,a,i,s){var l=-1,u=t.length;for(a||(a=o),s||(s=[]);++l<u;){var c=t[l];n>0&&a(c)?n>1?e(c,n-1,a,i,s):r(s,c):i||(s[s.length]=c)}return s}},3933:function(e,t,n){var r=n(198),o=n(395),a=n(65),i=r?r.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||o(e)||!!(i&&e&&e[i])}},3934:function(e,t,n){e.exports=n(3935)},3935:function(e,t,n){var r=n(2513)("flowRight",n(3963));r.placeholder=n(2355),e.exports=r},3936:function(e,t,n){var r=n(3937),o=n(2355),a=Array.prototype.push;function i(e,t){return 2==t?function(t,n){return e(t,n)}:function(t){return e(t)}}function s(e){for(var t=e?e.length:0,n=Array(t);t--;)n[t]=e[t];return n}function l(e,t){return function(){var n=arguments.length;if(n){for(var r=Array(n);n--;)r[n]=arguments[n];var o=r[0]=t.apply(void 0,r);return e.apply(void 0,r),o}}}e.exports=function e(t,n,u,c){var f,d="function"==typeof n,p=n===Object(n);if(p&&(c=u,u=n,n=void 0),null==u)throw new TypeError;c||(c={});var h={cap:!("cap"in c)||c.cap,curry:!("curry"in c)||c.curry,fixed:!("fixed"in c)||c.fixed,immutable:!("immutable"in c)||c.immutable,rearg:!("rearg"in c)||c.rearg},m="curry"in c&&c.curry,y="fixed"in c&&c.fixed,v="rearg"in c&&c.rearg,g=d?u:o,_=d?u.runInContext():void 0,E=d?u:{ary:t.ary,assign:t.assign,clone:t.clone,curry:t.curry,forEach:t.forEach,isArray:t.isArray,isError:t.isError,isFunction:t.isFunction,isWeakMap:t.isWeakMap,iteratee:t.iteratee,keys:t.keys,rearg:t.rearg,toInteger:t.toInteger,toPath:t.toPath},b=E.ary,T=E.assign,O=E.clone,w=E.curry,S=E.forEach,C=E.isArray,P=E.isError,A=E.isFunction,R=E.isWeakMap,M=E.keys,k=E.rearg,I=E.toInteger,L=E.toPath,N=M(r.aryMethod),j={castArray:function(e){return function(){var t=arguments[0];return C(t)?e(s(t)):e.apply(void 0,arguments)}},iteratee:function(e){return function(){var t=arguments[0],n=arguments[1],r=e(t,n),o=r.length;return h.cap&&"number"==typeof n?(n=n>2?n-2:1,o&&o<=n?r:i(r,n)):r}},mixin:function(e){return function(t){var n=this;if(!A(n))return e(n,Object(t));var r=[];return S(M(t),function(e){A(t[e])&&r.push([e,n.prototype[e]])}),e(n,Object(t)),S(r,function(e){var t=e[1];A(t)?n.prototype[e[0]]=t:delete n.prototype[e[0]]}),n}},nthArg:function(e){return function(t){var n=t<0?1:I(t)+1;return w(e(t),n)}},rearg:function(e){return function(t,n){var r=n?n.length:0;return w(e(t,n),r)}},runInContext:function(n){return function(r){return e(t,n(r),c)}}};function x(e,t){if(h.cap){var n=r.iterateeRearg[e];if(n)return function(e,t){return B(e,function(e){var n=t.length;return function(e,t){return 2==t?function(t,n){return e.apply(void 0,arguments)}:function(t){return e.apply(void 0,arguments)}}(k(i(e,n),t),n)})}(t,n);var o=!d&&r.iterateeAry[e];if(o)return function(e,t){return B(e,function(e){return"function"==typeof e?i(e,t):e})}(t,o)}return t}function D(e,t,n){if(h.fixed&&(y||!r.skipFixed[e])){var o=r.methodSpread[e],i=o&&o.start;return void 0===i?b(t,n):function(e,t){return function(){for(var n=arguments.length,r=n-1,o=Array(n);n--;)o[n]=arguments[n];var i=o[t],s=o.slice(0,t);return i&&a.apply(s,i),t!=r&&a.apply(s,o.slice(t+1)),e.apply(this,s)}}(t,i)}return t}function F(e,t,n){return h.rearg&&n>1&&(v||!r.skipRearg[e])?k(t,r.methodRearg[e]||r.aryRearg[n]):t}function U(e,t){for(var n=-1,r=(t=L(t)).length,o=r-1,a=O(Object(e)),i=a;null!=i&&++n<r;){var s=t[n],l=i[s];null==l||A(l)||P(l)||R(l)||(i[s]=O(n==o?l:Object(l))),i=i[s]}return a}function q(t,n){var o=r.aliasToReal[t]||t,a=r.remap[o]||o,i=c;return function(t){var r=d?_:E,s=d?_[a]:n,l=T(T({},i),t);return e(r,o,s,l)}}function B(e,t){return function(){var n=arguments.length;if(!n)return e();for(var r=Array(n);n--;)r[n]=arguments[n];var o=h.rearg?0:n-1;return r[o]=t(r[o]),e.apply(void 0,r)}}function H(e,t){var n,o=r.aliasToReal[e]||e,a=t,i=j[o];return i?a=i(t):h.immutable&&(r.mutate.array[o]?a=l(t,s):r.mutate.object[o]?a=l(t,function(e){return function(t){return e({},t)}}(t)):r.mutate.set[o]&&(a=l(t,U))),S(N,function(e){return S(r.aryMethod[e],function(t){if(o==t){var i=r.methodSpread[o],s=i&&i.afterRearg;return n=s?D(o,F(o,a,e),e):F(o,D(o,a,e),e),n=function(e,t,n){return m||h.curry&&n>1?w(t,n):t}(0,n=x(o,n),e),!1}}),!n}),n||(n=a),n==t&&(n=m?w(n,1):function(){return t.apply(this,arguments)}),n.convert=q(o,t),r.placeholder[o]&&(f=!0,n.placeholder=t.placeholder=g),n}if(!p)return H(n,u);var W=u,G=[];return S(N,function(e){S(r.aryMethod[e],function(e){var t=W[r.remap[e]||e];t&&G.push([e,H(e,t)])})}),S(M(W),function(e){var t=W[e];if("function"==typeof t){for(var n=G.length;n--;)if(G[n][0]==e)return;t.convert=q(e,t),G.push([e,t])}}),S(G,function(e){W[e[0]]=e[1]}),W.convert=function(e){return W.runInContext.convert(e)(void 0)},f&&(W.placeholder=g),S(M(W),function(e){S(r.realToAlias[e]||[],function(t){W[t]=W[e]})}),W}},3937:function(e,t){t.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},t.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},t.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},t.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},t.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},t.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},t.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},t.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},t.placeholder={bind:!0,bindKey:!0,curry:!0,curryRight:!0,partial:!0,partialRight:!0},t.realToAlias=function(){var e=Object.prototype.hasOwnProperty,n=t.aliasToReal,r={};for(var o in n){var a=n[o];e.call(r,a)?r[a].push(o):r[a]=[o]}return r}(),t.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},t.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},t.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},3938:function(e,t,n){e.exports={ary:n(3939),assign:n(2506),clone:n(3956),curry:n(3957),forEach:n(665),isArray:n(65),isError:n(3958),isFunction:n(197),isWeakMap:n(3959),iteratee:n(3960),keys:n(691),rearg:n(3961),toInteger:n(2525),toPath:n(3962)}},3939:function(e,t,n){var r=n(2356),o=128;e.exports=function(e,t,n){return t=n?void 0:t,t=e&&null==t?e.length:t,r(e,o,void 0,void 0,void 0,void 0,t)}},3940:function(e,t,n){var r=n(2290),o=n(88),a=1;e.exports=function(e,t,n){var i=t&a,s=r(e);return function t(){return(this&&this!==o&&this instanceof t?s:e).apply(i?n:this,arguments)}}},3941:function(e,t,n){var r=n(674),o=n(2290),a=n(2516),i=n(2519),s=n(2524),l=n(2361),u=n(88);e.exports=function(e,t,n){var c=o(e);return function o(){for(var f=arguments.length,d=Array(f),p=f,h=s(o);p--;)d[p]=arguments[p];var m=f<3&&d[0]!==h&&d[f-1]!==h?[]:l(d,h);return(f-=m.length)<n?i(e,t,a,o.placeholder,void 0,d,m,void 0,void 0,n-f):r(this&&this!==u&&this instanceof o?c:e,this,d)}}},3942:function(e,t){e.exports=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}},3943:function(e,t){e.exports=function(){}},3944:function(e,t){e.exports={}},3945:function(e,t,n){var r=n(2357),o=n(2360),a=n(2358),i=n(65),s=n(144),l=n(3946),u=Object.prototype.hasOwnProperty;function c(e){if(s(e)&&!i(e)&&!(e instanceof r)){if(e instanceof o)return e;if(u.call(e,"__wrapped__"))return l(e)}return new o(e)}c.prototype=a.prototype,c.prototype.constructor=c,e.exports=c},3946:function(e,t,n){var r=n(2357),o=n(2360),a=n(2260);e.exports=function(e){if(e instanceof r)return e.clone();var t=new o(e.__wrapped__,e.__chain__);return t.__actions__=a(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}},3947:function(e,t){var n=/\{\n\/\* \[wrapped with (.+)\] \*/,r=/,? & /;e.exports=function(e){var t=e.match(n);return t?t[1].split(r):[]}},3948:function(e,t){var n=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;e.exports=function(e,t){var r=t.length;if(!r)return e;var o=r-1;return t[o]=(r>1?"& ":"")+t[o],t=t.join(r>2?", ":" "),e.replace(n,"{\n/* [wrapped with "+t+"] */\n")}},3949:function(e,t,n){var r=n(665),o=n(3950),a=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];e.exports=function(e,t){return r(a,function(n){var r="_."+n[0];t&n[1]&&!o(e,r)&&e.push(r)}),e.sort()}},3950:function(e,t,n){var r=n(407);e.exports=function(e,t){return!(null==e||!e.length)&&r(e,t,0)>-1}},3951:function(e,t,n){var r=n(2260),o=n(283),a=Math.min;e.exports=function(e,t){for(var n=e.length,i=a(t.length,n),s=r(e);i--;){var l=t[i];e[i]=o(l,n)?s[l]:void 0}return e}},3952:function(e,t,n){var r=n(674),o=n(2290),a=n(88),i=1;e.exports=function(e,t,n,s){var l=t&i,u=o(e);return function t(){for(var o=-1,i=arguments.length,c=-1,f=s.length,d=Array(f+i),p=this&&this!==a&&this instanceof t?u:e;++c<f;)d[c]=s[c];for(;i--;)d[c++]=arguments[++o];return r(p,l?n:this,d)}}},3953:function(e,t,n){var r=n(2517),o=n(2518),a=n(2361),i="__lodash_placeholder__",s=1,l=2,u=4,c=8,f=128,d=256,p=Math.min;e.exports=function(e,t){var n=e[1],h=t[1],m=n|h,y=m<(s|l|f),v=h==f&&n==c||h==f&&n==d&&e[7].length<=t[8]||h==(f|d)&&t[7].length<=t[8]&&n==c;if(!y&&!v)return e;h&s&&(e[2]=t[2],m|=n&s?0:u);var g=t[3];if(g){var _=e[3];e[3]=_?r(_,g,t[4]):g,e[4]=_?a(e[3],i):t[4]}return(g=t[5])&&(_=e[5],e[5]=_?o(_,g,t[6]):g,e[6]=_?a(e[5],i):t[6]),(g=t[7])&&(e[7]=g),h&f&&(e[8]=null==e[8]?t[8]:p(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=m,e}},3954:function(e,t,n){var r=n(3955),o=1/0,a=1.7976931348623157e308;e.exports=function(e){return e?(e=r(e))===o||e===-o?(e<0?-1:1)*a:e==e?e:0:0===e?e:0}},3955:function(e,t,n){var r=n(100),o=n(278),a=NaN,i=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return a;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=l.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):s.test(e)?a:+e}},3956:function(e,t,n){var r=n(2350),o=4;e.exports=function(e){return r(e,o)}},3957:function(e,t,n){var r=n(2356),o=8;function a(e,t,n){var i=r(e,o,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return i.placeholder=a.placeholder,i}a.placeholder={},e.exports=a},3958:function(e,t,n){var r=n(147),o=n(144),a=n(2261),i="[object DOMException]",s="[object Error]";e.exports=function(e){if(!o(e))return!1;var t=r(e);return t==s||t==i||"string"==typeof e.message&&"string"==typeof e.name&&!a(e)}},3959:function(e,t,n){var r=n(661),o=n(144),a="[object WeakMap]";e.exports=function(e){return o(e)&&r(e)==a}},3960:function(e,t,n){var r=n(2350),o=n(694),a=1;e.exports=function(e){return o("function"==typeof e?e:r(e,a))}},3961:function(e,t,n){var r=n(2356),o=n(2353)(function(e,t){return r(e,256,void 0,void 0,void 0,t)});e.exports=o},3962:function(e,t,n){var r=n(664),o=n(2260),a=n(65),i=n(278),s=n(700),l=n(201),u=n(406);e.exports=function(e){return a(e)?r(e,l):i(e)?[e]:o(s(u(e)))}},3963:function(e,t,n){var r=n(3964)(!0);e.exports=r},3964:function(e,t,n){var r=n(2360),o=n(2353),a=n(2359),i=n(2521),s=n(65),l=n(2520),u="Expected a function",c=8,f=32,d=128,p=256;e.exports=function(e){return o(function(t){var n=t.length,o=n,h=r.prototype.thru;for(e&&t.reverse();o--;){var m=t[o];if("function"!=typeof m)throw new TypeError(u);if(h&&!y&&"wrapper"==i(m))var y=new r([],!0)}for(o=y?o:n;++o<n;){m=t[o];var v=i(m),g="wrapper"==v?a(m):void 0;y=g&&l(g[0])&&g[1]==(d|c|f|p)&&!g[4].length&&1==g[9]?y[i(g[0])].apply(y,g[3]):1==m.length&&l(m)?y[v]():y.thru(m)}return function(){var e=arguments,r=e[0];if(y&&1==e.length&&s(r))return y.plant(r).value();for(var o=0,a=n?t[o].apply(this,e):r;++o<n;)a=t[o].call(this,a);return a}})}},3965:function(e,t,n){var r=n(2513)("filter",n(678));r.placeholder=n(2355),e.exports=r},3966:function(e,t){e.exports=function(e){for(var t=-1,n=null==e?0:e.length,r=0,o=[];++t<n;){var a=e[t];a&&(o[r++]=a)}return o}},3967:function(e,t,n){var r=n(397),o=n(2527),a=n(693),i=n(3968),s=n(100),l=n(2288),u=n(2528);e.exports=function e(t,n,c,f,d){t!==n&&a(n,function(a,l){if(s(a))d||(d=new r),i(t,n,l,c,e,f,d);else{var p=f?f(u(t,l),a,l+"",t,n,d):void 0;void 0===p&&(p=a),o(t,l,p)}},l)}},3968:function(e,t,n){var r=n(2527),o=n(2507),a=n(2510),i=n(2260),s=n(2511),l=n(395),u=n(65),c=n(3969),f=n(396),d=n(197),p=n(100),h=n(2261),m=n(404),y=n(2528),v=n(3970);e.exports=function(e,t,n,g,_,E,b){var T=y(e,n),O=y(t,n),w=b.get(O);if(w)r(e,n,w);else{var S=E?E(T,O,n+"",e,t,b):void 0,C=void 0===S;if(C){var P=u(O),A=!P&&f(O),R=!P&&!A&&m(O);S=O,P||A||R?u(T)?S=T:c(T)?S=i(T):A?(C=!1,S=o(O,!0)):R?(C=!1,S=a(O,!0)):S=[]:h(O)||l(O)?(S=T,l(T)?S=v(T):(!p(T)||g&&d(T))&&(S=s(O))):C=!1}C&&(b.set(O,S),_(S,O,g,E,b),b.delete(O)),r(e,n,S)}}},3969:function(e,t,n){var r=n(200),o=n(144);e.exports=function(e){return o(e)&&r(e)}},3970:function(e,t,n){var r=n(658),o=n(2288);e.exports=function(e){return r(e,o(e))}},3971:function(e,t){var n="Expected a function";e.exports=function(e){if("function"!=typeof e)throw new TypeError(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},3972:function(e,t,n){var r=n(147),o=n(65),a=n(144),i="[object String]";e.exports=function(e){return"string"==typeof e||!o(e)&&a(e)&&r(e)==i}},3973:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2532));n(2362);var o={};t.default=function(e){return function(t,n){var a=n||o;e.memoize=e.memoize||new WeakMap;var i=void 0;e.memoize.has(a)?i=e.memoize.get(a):(i={},e.memoize.set(a,i));var s=(0,r.default)(t).join(" ");return s in i?i[s]:i[s]=e(t,n)}},e.exports=t.default},3974:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(197)),o=d(n(199)),a=d(n(2287)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=d(n(3975)),c=d(n(2512)),f=n(2362);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};return function(d){var h=function(u){function h(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,t,n)),a=t.style,i=t.className,s=t.classNames,l=p(t,["style","className","classNames"]);return o.substyle=(0,c.default)({style:a,className:i,classNames:s},o.context[f.PROPS_DECORATOR_CONTEXT_NAME]),o.setWrappedInstance=o.setWrappedInstance.bind(o),(0,r.default)(e)&&(o.defaultStyle=e(l)),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,l.Component),s(h,[{key:"componentWillReceiveProps",value:function(t){var o=t.style,a=t.className,i=t.classNames,s=p(t,["style","className","classNames"]),l=this.props,u=l.style,d=l.className,h=l.classNames,m=p(l,["style","className","classNames"]);o===u&&a===d&&i===h||(this.substyle=(0,c.default)({style:o,className:a,classNames:i},this.context[f.PROPS_DECORATOR_CONTEXT_NAME])),(0,r.default)(e)&&n(s,m)&&(this.defaultStyle=e(s))}},{key:"render",value:function(){var n=(0,a.default)(this.props,["style","className","classNames"]),r=this.getWrappedComponent(),o=t&&t(n);return(0,l.createElement)(r,i({style:this.substyle(o,this.defaultStyle||e),ref:function(e){return!e.prototype.render}(r)?void 0:this.setWrappedInstance},n))}},{key:"getWrappedComponent",value:function(){var e=this.context[f.ENHANCER_CONTEXT_NAME],t=void 0===e?o.default:e;return this.memoizedEnhance!==t&&(this.memoizedEnhance=t,this.enhancedWrappedComponent=t(d),this.enhancedWrappedComponent.propTypes&&(this.enhancedWrappedComponent.propTypes=i({},this.enhancedWrappedComponent.propTypes,{style:f.PropTypes.style}))),this.enhancedWrappedComponent||d}},{key:"getWrappedInstance",value:function(){return this.wrappedInstance}},{key:"setWrappedInstance",value:function(e){this.wrappedInstance=e}}]),h}(),m=d.displayName||d.name;return h.displayName="withDefaultStyle("+m+")",h.propTypes=i({},d.propTypes,f.PropTypes),h.contextTypes=f.ContextTypes,h.WrappedComponent=d,(0,u.default)(h,d)}},e.exports=t.default},3975:function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},a="function"==typeof Object.getOwnPropertySymbols;e.exports=function(e,t,n){if("string"!=typeof t){var i=Object.getOwnPropertyNames(t);a&&(i=i.concat(Object.getOwnPropertySymbols(t)));for(var s=0;s<i.length;++s)if(!(r[i[s]]||o[i[s]]||n&&n[i[s]]))try{e[i[s]]=t[i[s]]}catch(e){}}return e}},3976:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),a=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),i=n(2362);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"getChildContext",value:function(){var e;return s(e={},i.ENHANCER_CONTEXT_NAME,this.props.enhancer),s(e,i.PROPS_DECORATOR_CONTEXT_NAME,this.props.propsDecorator),e}},{key:"render",value:function(){return o.Children.only(this.props.children)}}]),t}();t.default=l,l.propTypes={enhancer:a.default.func,propsDecorator:a.default.func,children:a.default.element.isRequired},l.childContextTypes=i.ContextTypes,l.displayName="EnhancerProvider",e.exports=t.default},3977:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var o=n(2291),a=f(o),i=n(2197),s=f(n(2363)),l=f(n(0)),u=f(n(2364)),c=f(n(3984));function f(e){return e&&e.__esModule?e:{default:e}}var d=function(t){var n=t.suggestion,r=t.roomId,l=n.display,c={MENTOR:(0,i.isMentorInRoom)(n,r),STAFF:(0,i.isStaffInRoom)(n,r)},f=(0,o.getAvatarTheme)(o.AvatarTypes.SUGGESTION,c.MENTOR,c.STAFF);return e.createElement("div",{styleName:"mention"},e.createElement(a.default,{profile:n,theme:f,size:20}),l,c.MENTOR&&e.createElement("span",{styleName:"badge"},e.createElement(s.default,null)),c.STAFF&&e.createElement("span",{styleName:"badge"},e.createElement(u.default,null)))};d.propTypes={suggestion:l.default.object.isRequired,roomId:l.default.string.isRequired},t.default=r(c.default,{allowMultiple:!0})(d)}).call(this,n(1),n(6))},3978:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAvatarTheme=function(e,t,n){switch(!0){case e===r.AvatarTypes.PROFILE&&t:return r.AvatarThemes.PROFILE_MENTOR;case e===r.AvatarTypes.PROFILE&&n:return r.AvatarThemes.PROFILE_STAFF;case e===r.AvatarTypes.SUGGESTION&&t:return r.AvatarThemes.SUGGESTION_MENTOR;case e===r.AvatarTypes.SUGGESTION&&n:return r.AvatarThemes.SUGGESTION_STAFF;case e===r.AvatarTypes.PARTICIPANT:return r.AvatarThemes.PARTICIPANT;case e===r.AvatarTypes.PROFILE:return r.AvatarThemes.PROFILE_DEFAULT;case e===r.AvatarTypes.SUGGESTION:return r.AvatarThemes.SUGGESTION_DEFAULT;default:return r.AvatarThemes.DEFAULT}};var r=n(2533)},3979:function(e,t,n){(function(t){!function(){var r;r=void 0!==e&&void 0!==e.exports?n(3980):window.PNGlib;var o=function(e,t){if("string"!=typeof e||e.length<15)throw"A hash of at least 15 characters is required.";this.defaults={background:[240,240,240,255],margin:.08,size:64,saturation:.7,brightness:.5,format:"png"},this.options="object"==typeof t?t:this.defaults,"number"==typeof arguments[1]&&(this.options.size=arguments[1]),arguments[2]&&(this.options.margin=arguments[2]),this.hash=e,this.background=this.options.background||this.defaults.background,this.size=this.options.size||this.defaults.size,this.format=this.options.format||this.defaults.format,this.margin=void 0!==this.options.margin?this.options.margin:this.defaults.margin;var n=parseInt(this.hash.substr(-7),16)/268435455,r=this.options.saturation||this.defaults.saturation,o=this.options.brightness||this.defaults.brightness;this.foreground=this.options.foreground||this.hsl2rgb(n,r,o)};o.prototype={background:null,foreground:null,hash:null,margin:null,size:null,format:null,image:function(){return this.isSvg()?new a(this.size,this.foreground,this.background):new r(this.size,this.size,256)},render:function(){var e,t,n=this.image(),r=this.size,o=Math.floor(r*this.margin),a=Math.floor((r-2*o)/5),i=Math.floor((r-5*a)/2),s=n.color.apply(n,this.background),l=n.color.apply(n,this.foreground);for(e=0;e<15;e++)t=parseInt(this.hash.charAt(e),16)%2?s:l,e<5?this.rectangle(2*a+i,e*a+i,a,a,t,n):e<10?(this.rectangle(1*a+i,(e-5)*a+i,a,a,t,n),this.rectangle(3*a+i,(e-5)*a+i,a,a,t,n)):e<15&&(this.rectangle(0*a+i,(e-10)*a+i,a,a,t,n),this.rectangle(4*a+i,(e-10)*a+i,a,a,t,n));return n},rectangle:function(e,t,n,r,o,a){var i,s;if(this.isSvg())a.rectangles.push({x:e,y:t,w:n,h:r,color:o});else for(i=e;i<e+n;i++)for(s=t;s<t+r;s++)a.buffer[a.index(i,s)]=o},hsl2rgb:function(e,t,n){return e*=6,[255*(t=[n+=t*=n<.5?n:1-n,n-e%1*t*2,n-=t*=2,n,n+e%1*t,n+t])[~~e%6],255*t[(16|e)%6],255*t[(8|e)%6]]},toString:function(e){return e?this.render().getDump():this.render().getBase64()},isSvg:function(){return this.format.match(/svg/i)}};var a=function(e,t,n){this.size=e,this.foreground=this.color.apply(this,t),this.background=this.color.apply(this,n),this.rectangles=[]};a.prototype={size:null,foreground:null,background:null,rectangles:null,color:function(e,t,n,r){var o=[e,t,n].map(Math.round);return o.push(r>=0&&r<=255?r/255:1),"rgba("+o.join(",")+")"},getDump:function(){var e,t,n,r=this.foreground,o=this.background,a=.005*this.size;for(t="<svg xmlns='http://www.w3.org/2000/svg' width='"+this.size+"' height='"+this.size+"' style='background-color:"+o+";'><g style='fill:"+r+"; stroke:"+r+"; stroke-width:"+a+";'>",e=0;e<this.rectangles.length;e++)(n=this.rectangles[e]).color!=o&&(t+="<rect  x='"+n.x+"' y='"+n.y+"' width='"+n.w+"' height='"+n.h+"'/>");return t+="</g></svg>"},getBase64:function(){if(btoa)return btoa(this.getDump());if(t)return new t(this.getDump(),"binary").toString("base64");throw"Cannot generate base64 output"}},void 0!==e&&void 0!==e.exports?e.exports=o:window.Identicon=o}()}).call(this,n(2227).Buffer)},3980:function(e,t){
/**
* A handy class to calculate color values.
*
* @version 1.0
* @author Robert Eisele <robert@xarg.org>
* @copyright Copyright (c) 2010, Robert Eisele
* @link http://www.xarg.org/2010/03/generate-client-side-png-files-using-javascript/
* @license http://www.opensource.org/licenses/bsd-license.php BSD License
*
*/
!function(){function t(e,t){for(var n=2;n<arguments.length;n++)for(var r=0;r<arguments[n].length;r++)e[t++]=arguments[n].charAt(r)}function n(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function r(e){return String.fromCharCode(255&e,e>>8&255)}var o=function(e,o,a){this.width=e,this.height=o,this.depth=a,this.pix_size=o*(e+1),this.data_size=2+this.pix_size+5*Math.floor((65534+this.pix_size)/65535)+4,this.ihdr_offs=0,this.ihdr_size=25,this.plte_offs=this.ihdr_offs+this.ihdr_size,this.plte_size=8+3*a+4,this.trns_offs=this.plte_offs+this.plte_size,this.trns_size=8+a+4,this.idat_offs=this.trns_offs+this.trns_size,this.idat_size=8+this.data_size+4,this.iend_offs=this.idat_offs+this.idat_size,this.iend_size=12,this.buffer_size=this.iend_offs+this.iend_size,this.buffer=new Array,this.palette=new Object,this.pindex=0;for(var i=new Array,s=0;s<this.buffer_size;s++)this.buffer[s]="\0";t(this.buffer,this.ihdr_offs,n(this.ihdr_size-12),"IHDR",n(e),n(o),"\b"),t(this.buffer,this.plte_offs,n(this.plte_size-12),"PLTE"),t(this.buffer,this.trns_offs,n(this.trns_size-12),"tRNS"),t(this.buffer,this.idat_offs,n(this.idat_size-12),"IDAT"),t(this.buffer,this.iend_offs,n(this.iend_size-12),"IEND");var l=30912;l+=31-l%31,t(this.buffer,this.idat_offs+8,function(e){return String.fromCharCode(e>>8&255,255&e)}(l));for(s=0;(s<<16)-1<this.pix_size;s++){var u,c;s+65535<this.pix_size?(u=65535,c="\0"):(u=this.pix_size-(s<<16)-s,c=""),t(this.buffer,this.idat_offs+8+2+(s<<16)+(s<<2),c,r(u),r(~u))}for(s=0;s<256;s++){for(var f=s,d=0;d<8;d++)f=1&f?-306674912^f>>1&2147483647:f>>1&2147483647;i[s]=f}this.index=function(e,t){var n=t*(this.width+1)+e+1;return this.idat_offs+8+2+5*Math.floor(n/65535+1)+n},this.color=function(e,t,n,r){var o=(((r=r>=0?r:255)<<8|e)<<8|t)<<8|n;if(void 0===this.palette[o]){if(this.pindex==this.depth)return"\0";var a=this.plte_offs+8+3*this.pindex;this.buffer[a+0]=String.fromCharCode(e),this.buffer[a+1]=String.fromCharCode(t),this.buffer[a+2]=String.fromCharCode(n),this.buffer[this.trns_offs+8+this.pindex]=String.fromCharCode(r),this.palette[o]=String.fromCharCode(this.pindex++)}return this.palette[o]},this.getBase64=function(){var e,t,n,r,o,a,i,s=this.getDump(),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=s.length,c=0,f="";do{r=(e=s.charCodeAt(c))>>2,o=(3&e)<<4|(t=s.charCodeAt(c+1))>>4,n=s.charCodeAt(c+2),a=u<c+2?64:(15&t)<<2|n>>6,i=u<c+3?64:63&n,f+=l.charAt(r)+l.charAt(o)+l.charAt(a)+l.charAt(i)}while((c+=3)<u);return f},this.getDump=function(){for(var e=1,r=0,o=5552,a=0;a<this.height;a++)for(var s=-1;s<this.width;s++)r+=e+=this.buffer[this.index(s,a)].charCodeAt(0),0==(o-=1)&&(e%=65521,r%=65521,o=5552);function l(e,r,o){for(var a=-1,s=4;s<o-4;s+=1)a=i[255&(a^e[r+s].charCodeAt(0))]^a>>8&16777215;t(e,r+o-4,n(-1^a))}return e%=65521,r%=65521,t(this.buffer,this.idat_offs+this.idat_size-8,n(r<<16|e)),l(this.buffer,this.ihdr_offs,this.ihdr_size),l(this.buffer,this.plte_offs,this.plte_size),l(this.buffer,this.trns_offs,this.trns_size),l(this.buffer,this.idat_offs,this.idat_size),l(this.buffer,this.iend_offs,this.iend_size),"PNG\r\n\n"+this.buffer.join("")}};void 0!==e&&void 0!==e.exports?e.exports=o:window.PNGlib=o}()},3981:function(e,t,n){e.exports={"std-font-9":"styles--std-font-9--1UysA","project-font":"styles--project-font--3mm3-","std-font-12":"styles--std-font-12--3RNuw","room-title-font":"styles--room-title-font--2rMBc","user-font":"styles--user-font--3yVAw","std-font-14":"styles--std-font-14--1tsuU","std-font-16":"styles--std-font-16--2kQVj","std-font-18":"styles--std-font-18--2K3lu","chatroom-title-font":"styles--chatroom-title-font--3Wtup","screen-content":"styles--screen-content--1Dx-Q",circle:"styles--circle--4k4E8","gray-light":"styles--gray-light--2YE7D",turquoise:"styles--turquoise--2frJp","avatar-circle":"styles--avatar-circle--uxo5F","avatar-circle-default":"styles--avatar-circle-default--2DPqV","role-mentor":"styles--role-mentor--1SLJB","role-staff":"styles--role-staff--3D6su","avatar-img":"styles--avatar-img--3nYsQ","avatar-default":"styles--avatar-default--uO3eV",clearfix:"styles--clearfix--3Du5F","rel-pos":"styles--rel-pos--3L8ZR",invisible:"styles--invisible--1-9ZO",photo:"styles--photo--3YTZo","no-photo":"styles--no-photo--1MZzN","no-margin":"styles--no-margin--g8jhz","participant-avatar":"styles--participant-avatar--M9l3u","no-photo-loading":"styles--no-photo-loading--3t_PD","display-avatar-img":"styles--display-avatar-img--2pdUL","display-avatar-img-mentor":"styles--display-avatar-img-mentor--3dTi0 styles--display-avatar-img--2pdUL","display-avatar-img-staff":"styles--display-avatar-img-staff--1w4RL styles--display-avatar-img--2pdUL",suggestion:"styles--suggestion--3uKS2","suggestion-mentor":"styles--suggestion-mentor--3t_Xf styles--suggestion--3uKS2","suggestion-staff":"styles--suggestion-staff--1LjmB styles--suggestion--3uKS2"}},3984:function(e,t,n){e.exports={mention:"mention-suggestion--mention--1uYH2",badge:"mention-suggestion--badge--19D4H"}},3986:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=m(n(2534)),o=m(n(2535)),a=m(n(2536)),i=h(n(2190)),s=h(n(3987)),l=h(n(3988)),u=h(n(3989)),c=h(n(2537)),f=h(n(3990)),d=h(n(3992)),p=h(n(3993));function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=y({Types:i.default},s.default,o,c.default,r,f.default,d.default,l.default,p.default,a,u.default)},3987:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(2190)),o=i(n(2206)),a=n(2191);function i(e){return e&&e.__esModule?e:{default:e}}t.default={fetchChatRooms:function(e){return(0,a.createAsyncAction)(r.default.FETCH_CHAT_ROOMS,r.default.FETCH_CHAT_ROOMS_COMPLETE,function(){return o.default.fetchChatRooms(e)})}}},3988:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2188),o=function(e){return e&&e.__esModule?e:{default:e}}(n(2190)),a=n(2191);t.default={jumpToBottom:function(e){var t={roomId:e},n={type:r.ScrollType.ABSOLUTE,value:r.ScrollType.BOTTOM};return(0,a.createAction)(o.default.JUMP_TO,n,t)},jumpToPrevious:function(e,t){var n={roomId:e},i={type:r.ScrollType.RELATIVE,value:t};return(0,a.createAction)(o.default.JUMP_TO,i,n)},jumpToMsg:function(e,t){var n={roomId:e},i={type:r.ScrollType.MSG,msg:t};return(0,a.createAction)(o.default.JUMP_TO,i,n)},jumpToCompleted:function(e){var t={roomId:e},n={type:r.ScrollType.NOOP};return(0,a.createAction)(o.default.JUMP_TO_COMPLETED,n,t)}}},3989:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(2190)),o=i(n(2206)),a=n(2191);function i(e){return e&&e.__esModule?e:{default:e}}t.default={updateLastVisited:function(e,t,n){return(0,a.createAsyncAction)(r.default.UPDATE_LAST_VISITED,r.default.UPDATE_LAST_VISITED_COMPLETE,function(){return o.default.updateLastVisited(e,t,n)})}}},3990:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var o=n(2191),a=n(2188),i=f(n(2259)),s=f(n(2190)),l=f(n(2503)),u=f(n(22)),c=n(3991);function f(e){return e&&e.__esModule?e:{default:e}}var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default={closeWebsocket:function(){return(0,o.createAction)(s.default.SOCKET_CLOSE,{})},updateActivity:function(t,n){return function(o,a){var i=a();if(!e.has(i,"socket.listener"))return r.resolve();var s=i.socket.listener;return n?s.enterRoom(t):s.leaveRoom(t),r.resolve()}},checkWebsocket:function(){return function(t,n){var f=n();if(!e.has(f,"lobby")||!e.has(f,"profiles.me.id"))return r.resolve();var p=f.lobby,h=f.profiles.me.id,m=e.uniq(e.filter(p.rooms,"is_available").map(function(e){return e.room_id}));if(0===m.length)return r.resolve();if(m.sort(),e.join(e.get(f,["socket","rooms"],[]))===e.join(m))return r.resolve();e.has(f,["socket","listener"])&&f.socket.listener.close();var y=new l.default(i.default.uchatRealTimeApiUrl,h,m);y.onmessage=function(n){var r=JSON.parse(n.data),i=r.room_id;(0,u.default)(i,"no room id associated with event, skipping"),r.type===a.EventTypes.MESSAGE&&(r.payload=d({},e.get(r,"payload",{}),{room_id:i}));var l=new o.ActionBuilder(s.default.SOCKET_EVENT,r).withRoom(i).withUser(h);if(r.payload.user_id&&(l=l.withActors(r.payload.user_id)),r.type===a.EventTypes.MESSAGE||r.type===a.EventTypes.REPLY){var f=e.get(r,["payload","content"]);if((0,c.msgHasLinks)(f)){var p=e.get(r,["payload","message_id"]);l=l.withLink(p,f)}}var m=l.build();t(m)},y.onauthenticated=function(){t((0,o.createAction)(s.default.SOCKET_CONNECTED));var r=n(),i=e.last(r.screen);if(i&&i.screenType===a.Screens.CHAT){var l=i.roomId;l&&e.get(r,["rooms",l,"loaded"],!1)&&y.enterRoom(l)}};var v=0,g=Date.now();y.onping=function(r){var a=Date.now(),i=a-g;g=a,r?v=0:v<5e3&&(v=Math.min(5e3,v+i));var l=e.get(n(),["socket","connected"],!1);v>=5e3&&l&&t((0,o.createAction)(s.default.SOCKET_DISCONNECTED))};var _={listener:y,rooms:m};return t((0,o.createAction)(s.default.SOCKET_OPEN,_)),y.listen(),r.resolve(_)}}}}).call(this,n(4),n(7))},3991:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.msgHasLinks=function(e){return/(^(.*)(https|http)?:\/\/knowledge\.udacity\.com\/questions\/.*$)/.test(e)}},3992:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2190)),o=n(2191);t.default={createToast:function(e){return(0,o.createAction)(r.default.CREATE_TOAST,e)},removeToast:function(e){return(0,o.createAction)(r.default.REMOVE_TOAST,e)}}},3993:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2190)),o=n(2191);t.default={setUserData:function(e){return(0,o.createAction)(r.default.SET_USER_DATA,e)}}},3994:function(e,t,n){e.exports={mentions:"input--mentions--pWb8m",mentions__suggestions__list:"input--mentions__suggestions__list--2Xsbh",mentions__suggestions__item:"input--mentions__suggestions__item--aoGuF","mentions__suggestions__item--focused":"input--mentions__suggestions__item--focused--3YDY6",mentions__suggestions:"input--mentions__suggestions--28gBb"}},3996:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(2188),i=n(2192),s=n(2197),l=n(2229),u=T(n(3997)),c=T(n(3998)),f=T(n(2538)),d=T(n(0)),p=T(n(1)),h=T(n(3999)),m=T(n(2367)),y=n(2187),v=n(2191),g=n(2366),_=T(n(28)),E=n(27),b=T(n(2195));function T(e){return e&&e.__esModule?e:{default:e}}var O,w,S,C=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var P=e(b.default,{allowMultiple:!0})((S=w=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setActiveMessage=function(e){n.setState({activeMessage:e})},n.handleClearActiveMessage=function(){n.setState({activeMessage:null})},n.setShowMarkRead=function(){n.setState({showMarkRead:!0})},n.clearShowMarkRead=function(){n.setState({showMarkRead:!1})},n.handleScroll=function(e,t){var o=n.props,a=o.fetchMoreMessages,i=o.notifications,s=o.room,l=r.get(i.unread,[e,"count"]),u=r.get(s,"events"),c=r.get(s,["pagination","fetching_next"]),f=r.get(s,["pagination","cursor","has_next"]),d=n.messagesContainer;d.offsetHeight+t>=d.scrollHeight-100?n.clearShowMarkRead():l>0?n.setShowMarkRead():n.clearShowMarkRead(),t<=0?a(e):t>=d.scrollHeight-d.clientHeight&&(l>0&&n.markRead(r.last(u),l),f&&!c&&a(e,!1))},n.markRead=function(e,t){if(!r.isEmpty(e)){var o=r.get(e,"timestamp"),i=r.get(e,"room_id"),s=t>a.MESSAGE_FETCH_COUNT?a.MESSAGE_FETCH_COUNT:t;n.props.updateLastVisited(i,o,s)}},n.markReadAll=function(){var e=n.props,t=e.room,o=e.notifications,a=e.updateLastVisited,i=r.get(t,["info","room_id"]),s=r.get(o.unread,[i,"count"]);s>0&&a(i,new Date(Date.now()).toISOString(),s)},n.handleJumpToRecent=function(){var e=n.props,t=e.jumpToMsg,o=e.room,a=e.notifications,i=r.get(o,["info","room_id"]);t(i,r.get(a.unread,[i,"oldest"]))},n.handleMarkAllRead=function(){n.markReadAll(),n.clearShowMarkRead()},n.handleThreadClick=function(e,t){var r=n.props,o=r.roomTitle;(0,r.pushScreen)({screenType:a.Screens.CHAT,roomId:e,roomTitle:o,activeThreadMessageId:t})},n.handleListMount=function(e){n.messagesContainer=e,n.props.onListMount(e)},n.state={activeMessage:null,showMarkRead:!1},n.handleScroll=r.debounce(n.handleScroll,100,{trailing:!0}),n.markRead=r.debounce(n.markRead,5e3,{trailing:!0}),n.markReadAll=r.debounce(n.markReadAll,100,{trailing:!0}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.default.PureComponent),C(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.room,n=e.notifications,o=e.jumpToMsg,i=e.screens,s=e.fetchMoreMessages,l=r.get(t,["info","room_id"]),u=r.get(t,"events"),c=r.get(t,"pagination.cursor.has_prev",!1),f=r.get(n.unread,[l,"oldest"]),d=r.get(n.unread,[l,"count"]),p=this.messagesContainer,h=p.scrollHeight<=p.clientHeight,m=i[i.length-1],y=void 0;m&&m.screenType===a.Screens.CHAT&&m.messageId&&(y=m.messageId,c&&s(l)),d>a.MAX_NEW_MESSAGES?o(l,f):y?o(l,y):(p.scrollTop=p.scrollHeight,h&&d>0&&this.markRead(r.last(u),d))}},{key:"componentWillReceiveProps",value:function(e){var t=r.get(e,["room","info","room_id"]),n=this.messagesContainer,o=e.jumpToBottom,i=e.jumpToPrevious,l=e.jumpToMsg,u=r.get(e.notifications.unread,[t,"last_visited"]);if(!this.props.room.pagination.fetching_prev||e.room.pagination.fetching_prev)if(!this.props.room.pagination.fetching_next||e.room.pagination.fetching_next){var c=n.offsetHeight+n.scrollTop>=n.scrollHeight-100,f=r.get(this.props.room,"sent",[]);r.get(e.room,"sent",[]).length<f.length&&c&&o(t);var d=(0,s.getNewEvents)(this.props.room.events,e.room.events);if(0!==d.length)if(c)o(t);else{var p=e.myProfile;if(r.find(d,function(e){return e.payload.user_id===p.id}))o(t);else d.filter(function(e){return e.type===a.EventTypes.MESSAGE&&e.timestamp>u}).length>0&&this.setShowMarkRead()}}else{var h=r.get(this.props,["room","events"]).filter(function(e){return e.type===a.EventTypes.MESSAGE}),m=r.get(r.last(h),["payload","message_id"]);m&&l(t,m)}else i(t,n.scrollHeight)}},{key:"componentDidUpdate",value:function(e){var t=this.messagesContainer,n=this.props,o=n.room,i=n.jumpToCompleted,s=o.info.room_id,l=r.get(o,["ui","scrollTo"],{type:a.ScrollType.NOOP}),u=r.get(e.room,["ui","scrollTo"],{type:a.ScrollType.NOOP});if(!r.isEqual(l,u))switch(l.type){case a.ScrollType.ABSOLUTE:l.value===a.ScrollType.BOTTOM?t.scrollTop=t.scrollHeight:l.value===a.ScrollType.TOP&&(t.scrollTop=0),i(s);break;case a.ScrollType.RELATIVE:var c=l.value;t.scrollTop=t.scrollHeight-c,i(s);break;case a.ScrollType.MSG:var f=l.msg,d=Array.from(t.children),p=r.findLastIndex(d,function(e){var t=r.parseInt(e.getAttribute("data-id"));return t&&t===f});-1!==p&&(t.scrollTop=d[p].offsetTop-50),i(s);break;case a.ScrollType.NOOP:}}},{key:"componentWillUnmount",value:function(){this.markRead.cancel(),this.markReadAll.cancel()}},{key:"render",value:function(){var e=this,t=this.props,n=t.room,o=t.profiles,i=t.myProfile,d=t.onProfileAvatarClick,v=t.notifications,E=t.features,b=n.info.room_id,T=n.events,O=n.pagination.cursor.has_prev,w=r.get(n,["pagination","fetching_prev"]),S=r.get(n,["pagination","fetching_next"]),C=n.pagination.error,P=this.state,A=P.activeMessage,R=P.showMarkRead,M=r.get(n,"info.room_type")===a.RoomTypes.THREAD,k=r.get(E,"threadingEnabled",!1),I=r.get(v.unread,[b,"count"]),L=r.get(v.unread,[b,"oldest"]);return p.default.createElement("div",{styleName:"msg-list"},p.default.createElement("div",{onMouseLeave:this.handleClearActiveMessage},p.default.createElement("ul",{styleName:"msg-list-inner",onScroll:function(t){return e.handleScroll(b,t.target.scrollTop)},ref:this.handleListMount},!O&&!M&&p.default.createElement("li",{key:"message-history-start"},p.default.createElement(f.default,null,(0,y.__)("Beginning of the Conversation"))),p.default.createElement(u.default,{fetching:w,hasFetchError:C}),r.map(T,function(t,n,u){var c=o[t.payload.user_id],E=t.payload.user_id===i.id,b=n===u.length-1;if(!c)return null;var T=(0,s.toListKey)(t),O=t.timestamp,w=[a.EventTypes.JOINED,a.EventTypes.QUIT].includes(t.type),S=!1,C=!1,P=!0,R=!1,M="",N=void 0;0!==n&&(S=u[n-1].payload.user_id===t.payload.user_id&&u[n-1].type===a.EventTypes.MESSAGE,P=(N=(0,g.calcTimeDiffValues)(O,u[n-1].timestamp)).showTime,R=N.showDate,M=N.calendarTime),n<u.length-1&&(C=u[n+1].payload.user_id===t.payload.user_id&&u[n+1].type===a.EventTypes.MESSAGE);var j=[];if(R&&j.push(p.default.createElement("li",{key:T+"-date"},p.default.createElement(f.default,{error:!1,showSep:!1},M))),w)j.push(p.default.createElement("li",{key:T},p.default.createElement(h.default,{event:t,profiles:o,showTime:P})));else{var x=r.get(t,["payload","message_id"]),D={"role-mentor":(0,s.isMessageFromMentor)(t.payload,o[t.payload.user_id]),"role-staff":(0,s.isMessageFromStaff)(t.payload,o[t.payload.user_id])};j.push(p.default.createElement("li",{key:T,"data-id":x,styleName:(0,_.default)("msg-list-message-container",D,{"same-as-prev":S,"same-as-next":C})},p.default.createElement(m.default,{uuid:T,active:T===A,setActive:e.setActiveMessage,message:t.payload,showTime:P,showActions:!0,sameAsPrev:S,isMsgFromCurrentUser:E,isLastMessage:b,avatarClickable:!0,onProfileAvatarClick:d,onThreadClick:e.handleThreadClick,threadingEnabled:k,profiles:o,notifications:v})))}return r.get(t,"delivery_error",!1)&&j.push(p.default.createElement("li",{key:T+"-delivery-error"},p.default.createElement(f.default,{error:!0,showSep:!1},(0,y.__)(l.ERR_UNABLE_TO_SEND_MSG)))),I>0&&t.payload.message_id===L?[p.default.createElement("li",{key:"unread-message-notice"},p.default.createElement(f.default,{highlight:!0},(0,y.__)("<%= count %> new messages",{count:I})))].concat(j):j}),p.default.createElement(u.default,{fetching:S,hasFetchError:C}))),R&&I>0&&p.default.createElement(c.default,{unreadCount:I,onJumpToRecent:this.handleJumpToRecent,onMarkAllRead:this.handleMarkAllRead}))}}]),t}(),w.propTypes={room:i.RoomShape.isRequired,roomTitle:d.default.string.isRequired,myProfile:i.ProfileShape.isRequired,onListMount:d.default.func.isRequired,onProfileAvatarClick:d.default.func.isRequired,fetchMoreMessages:d.default.func,jumpToBottom:d.default.func,jumpToPrevious:d.default.func,jumpToMsg:d.default.func,jumpToCompleted:d.default.func,pushScreen:d.default.func,updateLastVisited:d.default.func},O=S))||O,A=(0,v.actionsBinder)("fetchMoreMessages","jumpToBottom","jumpToPrevious","jumpToMsg","jumpToCompleted","pushScreen","updateLastVisited");t.default=(0,E.connect)(function(e){return{features:e.window.features,profiles:e.profiles,myProfile:e.profiles.me,notifications:e.notifications,screens:e.screen}},A)(P)}).call(this,n(6),n(4))},3997:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var o=n(15),a=n(2229),i=u(n(0)),s=n(2187),l=u(n(2195));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(t){var n=t.fetching,r=t.hasFetchError;return n?e.createElement("li",{key:"fetching-next",styleName:"fetching-more show"},e.createElement(o.DotLoading,null)):r?e.createElement("li",{key:"fetching-next",styleName:"fetching-more error"},e.createElement("span",null,(0,s.__)(a.ERR_UNABLE_TO_FETCH_MSG))):e.createElement("li",{key:"fetching-next",styleName:"fetching-more"})};c.propTypes={fetching:i.default.bool.isRequired,hasFetchError:i.default.bool},t.default=r(l.default,{allowMultiple:!0})(c)}).call(this,n(1),n(6))},3998:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var o=l(n(39)),a=l(n(0)),i=n(2187),s=l(n(2195));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(t){var n=t.unreadCount,r=t.onJumpToRecent,a=t.onMarkAllRead;return e.createElement("div",{styleName:"new-msg-links"},e.createElement("div",{styleName:"new-msg-links-inner"},e.createElement("a",{href:"#",onClick:r},(0,i.__)("<%= count %> new messages",{count:n})),e.createElement("a",{href:"#",onClick:a,styleName:"mark-read"},(0,i.__)("Mark As Read"),e.createElement("span",{styleName:"mark-read-close"},e.createElement(o.default,{glyph:"close-md",text:(0,i.__)("Mark As Read")})))))};u.propTypes={unreadCount:a.default.number,onJumpToRecent:a.default.func.isRequired,onMarkAllRead:a.default.func.isRequired},t.default=r(s.default,{allowMultiple:!0})(u)}).call(this,n(1),n(6))},3999:function(e,t,n){"use strict";(function(e,r,o){Object.defineProperty(t,"__esModule",{value:!0});var a=n(2192),i=n(2188),s=p(n(2538)),l=p(n(0)),u=n(2366),c=p(n(22)),f=n(2198),d=p(n(2195));function p(e){return e&&e.__esModule?e:{default:e}}var h=function(t){var n=t.event,o=t.profiles,a=t.showTime;(0,c.default)(n.type===i.EventTypes.JOINED,"only JOINED event is supported");var l=e.filter(n.payload.users||[n.payload.user_id],function(t){return e.has(o,t)});if(0===l.length)return null;var d=a?" ("+(0,u.getLocalTime)(n.timestamp)+")":"",p=(0,f.makeJoinedNotice)(l,o,d);return r.createElement(s.default,{showSep:!1},p)};h.propTypes={event:a.EventShape.isRequired,profiles:l.default.objectOf(a.ProfileShape).isRequired,showTime:l.default.bool},t.default=o(d.default,{allowMultiple:!0})(h)}).call(this,n(4),n(1),n(6))},4000:function(e,t,n){"use strict";(function(e,r,o){Object.defineProperty(t,"__esModule",{value:!0});var a=c(n(4001)),i=n(2188),s=n(2192),l=c(n(0)),u=c(n(4004));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(t){var n=t.links,o=t.isMsgFromCurrentUser;return e.createElement("ul",{styleName:"links-list"},r.map(n,function(t){var n=r.get(t,["metadata","id"]);switch(t.type){case i.LinkTypes.KNOWLEDGE:return e.createElement("li",{key:n,styleName:"knowledge-link"},e.createElement(a.default,{question:t.metadata,href:t.url,isMsgFromCurrentUser:o}));default:return null}}))};f.propTypes={isMsgFromCurrentUser:l.default.bool,links:s.LinksShape},t.default=o(u.default,{allowMultiple:!0})(f)}).call(this,n(1),n(4),n(6))},4001:function(e,t,n){"use strict";(function(e,r,o){Object.defineProperty(t,"__esModule",{value:!0});var a=f(n(39)),i=n(2192),s=n(2188),l=f(n(0)),u=n(2187),c=f(n(4002));function f(e){return e&&e.__esModule?e:{default:e}}var d=function(t){var n=t.question,o=t.href,i=t.isMsgFromCurrentUser,l=n.title,c=n.answers,f=e.truncate(l,{length:s.MAX_KNOWLEDGE_LINK_TITLE,separator:" "}),d=!e.isEmpty(c),p=e.some(c,"accepted"),h=e.some(c,"verified"),m=e.size(c),y=h?"badge-with-check-md":p?"chat-with-check-md":"chat-bubble-md",v="answer-glyph "+(d?" answered":"")+" "+(h?" verified":"")+" "+(p?" accepted":""),g=1===m?"1 "+(0,u.__)("answer"):m+" "+(0,u.__)("answers"),_="answer-text "+(d?"answered":""),E="knowledge-link "+(i?"":"border");return r.createElement("a",{styleName:E,target:"_blank",href:o},r.createElement("div",{styleName:"title"}," ",(0,u.__)("Knowledge Post")),r.createElement("h3",null,f),r.createElement("div",{styleName:"knowledge-answers"},r.createElement("span",{styleName:v},r.createElement(a.default,{glyph:y,text:"{__('knowledge answers')}"})),r.createElement("span",{styleName:_},g)))};d.propTypes={href:l.default.string,isMsgFromCurrentUser:l.default.bool,question:i.KnowledgeMetadataShape},t.default=o(c.default,{allowMultiple:!0})(d)}).call(this,n(4),n(1),n(6))},4002:function(e,t,n){e.exports={"std-font-9":"knowledge-link--std-font-9--DGeuo","project-font":"knowledge-link--project-font--1_uOV","std-font-12":"knowledge-link--std-font-12--32LGg","room-title-font":"knowledge-link--room-title-font--1dUtt","user-font":"knowledge-link--user-font--3lQk4","knowledge-link":"knowledge-link--knowledge-link--3qreA",title:"knowledge-link--title--3xHDx","knowledge-answers":"knowledge-link--knowledge-answers--20-2n","answer-text":"knowledge-link--answer-text--376MU","std-font-14":"knowledge-link--std-font-14--1XLiQ","std-font-16":"knowledge-link--std-font-16--3ugc6","std-font-18":"knowledge-link--std-font-18--3dKl_","chatroom-title-font":"knowledge-link--chatroom-title-font--3ZmHO","screen-content":"knowledge-link--screen-content--10Ko5",circle:"knowledge-link--circle--3OWPe","gray-light":"knowledge-link--gray-light--31UDE",turquoise:"knowledge-link--turquoise--2bq9l","avatar-circle":"knowledge-link--avatar-circle--2g6qs","avatar-circle-default":"knowledge-link--avatar-circle-default--ArVcz","role-mentor":"knowledge-link--role-mentor--2RDGg","role-staff":"knowledge-link--role-staff--3uOc8","avatar-img":"knowledge-link--avatar-img--1WNGp","avatar-default":"knowledge-link--avatar-default--27LnN",clearfix:"knowledge-link--clearfix--28bfY","rel-pos":"knowledge-link--rel-pos--3P9-k",invisible:"knowledge-link--invisible--1fTbc",photo:"knowledge-link--photo--4tZit","no-photo":"knowledge-link--no-photo--29sjt","no-margin":"knowledge-link--no-margin--2HvdF",border:"knowledge-link--border--gqVV6","answer-glyph":"knowledge-link--answer-glyph--1JE4p",answered:"knowledge-link--answered--2evvM",accepted:"knowledge-link--accepted--2QRvV",verified:"knowledge-link--verified--_0RnM"}},4004:function(e,t,n){e.exports={"links-list":"styles--links-list--1vjNr","knowledge-link":"styles--knowledge-link--3UiWT"}},4006:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(2192),i=c(n(0)),s=c(n(1)),l=c(n(667)),u=c(n(4007));function c(e){return e&&e.__esModule?e:{default:e}}var f,d,p,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}var y=/(user:\/\/u?\d.*)/,v=function(t,n){var r=new l.default.Renderer;r.link=function(r,o,a){var i="@"===a.charAt(0),s=y.test(r);if(i&&a.slice(1)&&s){var c=l.default.Renderer.prototype.link.call(this,"#",a,a);return function(t,n,r,o){var a=e.get(t,"mentions",[]),i=o.slice(7).toString();if((a||[]).includes(i)){var s=e.get(n,"id").toString()===e.get(t,"user_id","").toString()?"mention-me":"mention-other";return r.slice(0,2)+"\n       data-id="+i+"\n       data-tst='mention'\n       class="+u.default[s]+"\n       "+r.slice(3)}return r}(t,n,c,r)}var f=l.default.Renderer.prototype.link.call(this,r,r,r);return f.slice(0,2)+' target="_blank" '+f.slice(3)},r.heading=function(e,t,n){return l.default.Renderer.prototype.heading.call(this,e,5,n)},r.image=function(e,t){return l.default.Renderer.prototype.link.call(this,e,t,e)};var o=e.assign({},l.default.defaults,{renderer:r,tables:!1,sanitize:!0}),a=new l.default.Lexer(o),i=new l.default.Parser(o),s=function(){};return s.exec=s,a.rules.table=s,{lexer:a,parser:i}},g=r(u.default,{allowMultiple:!0})((p=d=function(t){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=r=m(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),r.getDOMAtMentions=function(){if(r.node)return r.node.querySelectorAll("a[data-tst='mention']")},r.addProfileToDOMAtMentions=function(e){Array.from(e).forEach(function(e){e.addEventListener("click",function(t){t.preventDefault(),r.props.onProfileAvatarClick(e.dataset.id)})})},m(r,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.default.PureComponent),h(n,[{key:"componentDidMount",value:function(){var e=this.getDOMAtMentions();e&&this.addProfileToDOMAtMentions(e)}},{key:"shouldComponentUpdate",value:function(e){return this.props.text!==e.text}},{key:"render",value:function(){var t=this,n=this.props,r=n.className,o=n.message,a=n.me,i=v(o,a),l=i.lexer,u=i.parser,c=e.get(o,"content.message",o.content),f=l.lex(c),d=u.parse(f);return s.default.createElement("div",{styleName:"markdown "+r,dangerouslySetInnerHTML:{__html:d},ref:function(e){return t.node=e}})}}]),n}(),d.propTypes={message:a.MessageEventPayloadShape.isRequired,me:a.ProfileShape.isRequired,className:i.default.string},d.defaultProps={message:{},me:{},className:"",onProfileAvatarClick:function(){}},f=p))||f;t.default=g}).call(this,n(4),n(6))},4007:function(e,t,n){e.exports={markdown:"renderer_styles--markdown--1AqxT","this-user":"renderer_styles--this-user--3KvKz","other-user":"renderer_styles--other-user--pjYV-","thread-user":"renderer_styles--thread-user--1uOnS","mention-me":"renderer_styles--mention-me--1iukJ","mention-other":"renderer_styles--mention-other--1wVpb"}},4009:function(e,t,n){"use strict";(function(e,r,o){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageActions=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2217)),s=n(2348),l=m(n(2218)),u=m(n(39)),c=n(2192),f=m(n(0)),d=n(2187),p=n(27),h=m(n(2195));function m(e){return e&&e.__esModule?e:{default:e}}var y,v,g,_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var b=t.MessageActions=e(h.default,{allowMultiple:!0})((g=v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleViewThreadClick=function(e){(0,n.props.onThreadClick)(e),l.default.track(i.ACTION_VIEW_THREAD,n.trackingProperties())},n.handleMoreClick=function(e){e&&e.preventDefault(),n.setState(function(e){return{showMore:!e.showMore}}),l.default.track(i.ACTION_VIEW_MORE,n.trackingProperties())},n.handleReportPost=function(){l.default.track(i.ACTION_REPORT_MESSAGE,n.trackingProperties())},n.state={showMore:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.PureComponent),E(t,[{key:"trackingProperties",value:function(){var e=this.props,t=e.userData,n=e.message;return _({},t,{roomId:n.room_id,messageId:n.message_id,userId:n.user_id,has_thread:o.get(n,"has_replies",!1),thread_count:o.get(n,"thread.message_count",0)})}},{key:"render",value:function(){var e=this.props,t=e.active,n=e.message,a=e.isLastMessage,i=e.features,l=e.onActive,c=e.userData,f=o.get(n,"has_replies",!1)&&o.get(n,"thread.message_count",0)>0,p=o.get(i,"reportMessageEnabled",!1),h=t?"active":"",m=f?"chat-view-thread-sm":"chat-new-thread-sm",y=a?"last":"",v=o.get(s.supportEmails,o.get(c,"ndKey"),s.supportEmailDefault),g=o.get(n,"parent_message_id",0)>0;return r.createElement("div",{styleName:"message-content-actions-container "+h},r.createElement("div",{styleName:"message-content-actions-standard "+h},!g&&r.createElement("a",{href:"#",onFocus:l,onClick:this.handleViewThreadClick},r.createElement(u.default,{glyph:m,text:(0,d.__)("Reply to this message")})),p&&r.createElement("a",{href:"#",onFocus:l,onClick:this.handleMoreClick},r.createElement(u.default,{glyph:"more-options-sm",text:(0,d.__)("More actions...")}))),p&&this.state.showMore&&r.createElement("div",{styleName:"message-content-actions-more-container"},r.createElement("div",{styleName:"message-content-actions-more "+y},r.createElement("a",{href:"mailto:"+v+"?subject="+s.supportSubject+"&body="+(0,s.reportMessageBody)(n.user_id,n.message_id)+"\n                ",onClick:this.handleReportPost},r.createElement(u.default,{glyph:"alert-xl",text:(0,d.__)("Report Post")})," ",r.createElement("span",{styleName:"action-label"},(0,d.__)("Report Post"))))))}}]),t}(),v.propTypes={active:f.default.bool.isRequired,message:c.MessageEventPayloadShape.isRequired,isLastMessage:f.default.bool.isRequired,onActive:f.default.func.isRequired,onThreadClick:f.default.func.isRequired},y=g))||y;t.default=(0,p.connect)(function(e){return{features:e.window.features,userData:e.userData}})(b)}).call(this,n(6),n(1),n(4))},4010:function(e,t,n){"use strict";(function(e,r,o){Object.defineProperty(t,"__esModule",{value:!0}),t.Participants=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(2188),s=n(2217),l=E(n(2218)),u=E(n(4011)),c=n(15),f=E(n(4012)),d=E(n(0)),p=n(2192),h=n(2187),m=n(2191),y=n(27),v=n(2197),g=n(2198),_=E(n(2195));function E(e){return e&&e.__esModule?e:{default:e}}var b,T,O,w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var S=t.Participants=e(_.default,{allowMultiple:!0})((O=T=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleOnOpen=function(){var e=n.props,t=e.room,r=e.context,a=e.fetchParticipants,i=t.info.room_id,u=t.participants;o.get(u,"loaded",!1)||a(i),l.default.track(s.PROFILE_BAR_OPEN,r)},n.handleOnClose=function(){var e=n.props.context;l.default.track(s.PROFILE_BAR_CLOSE,e)},n.handleScroll=function(){var e=n.props,t=e.room,r=e.loadProfiles,a=t.info.room_id,i=(0,v.getElementsInView)(n.profilesPane.getBoundingClientRect(),n.profilesPane.children),s=o.map(i,function(e){return e.getAttribute("data-participant-id")}).filter(function(e){return e});r.apply(void 0,[a].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(s)))},n.state={invalidProfilePhotos:{}},e.onScrollWaitTime&&(n.handleScroll=o.debounce(n.handleScroll,e.onScrollWaitTime)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),w(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.room.info!==e.room.info||this.props.room.participants!==e.room.participants||this.props.profiles!==e.profiles||this.state.invalidProfilePhotos!==t.invalidProfilePhotos}},{key:"componentWillUnmount",value:function(){this.handleScroll.cancel&&this.handleScroll.cancel()}},{key:"render",value:function(){var e=this,t=this.props,n=t.room,a=t.profiles,s=t.onProfileAvatarClick,l=o.get(n,"participants.loading",!1),d=o.get(n,"participants.active",[]),p=o.get(n,"participants.inactive",[]),m=o.get(n,"participants.admins",[]),y=o.filter(m,{type:i.RoleTypes.MENTOR}),v=o.filter(m,{type:i.RoleTypes.STAFF}),E=o.get(n,"info.num_active"),b="circle "+(E?"turquoise":"gray-light"),T=(0,g.makeActiveStudentsMsg)(E),O=function(e,t,n){return r.createElement(f.default,{participant:e,isActive:t,roleType:n,profile:a[e.id],onParticipantAvatarClick:s,key:e.id})};return r.createElement("div",{styleName:"room-header"},r.createElement("div",{styleName:"room-header-mask"},r.createElement("span",{styleName:b}),r.createElement("span",null,T),r.createElement("span",null,r.createElement(u.default,{collapsingProp:"width",trigger:(0,h.__)("PROFILES"),triggerWhenOpen:(0,h.__)("HIDE"),transitionTime:200,overflowWhenOpen:"visible",className:_.default["profile-parent"],openedClassName:_.default["profile-parent"],lazyRender:!0,onOpening:this.handleOnOpen,onClosing:this.handleOnClose,contentInnerClassName:_.default["profile-inner-content"],contentOuterClassName:_.default["profile-outer-content"]},r.createElement(c.LoadingWrapper,{isLoading:l},r.createElement("ul",{styleName:"profiles-pane",onScroll:this.handleScroll,ref:function(t){e.profilesPane=t}},o.map(y,function(e){return O(e,e.is_active||!1,i.RoleTypes.MENTOR)}),o.map(v,function(e){return O(e,e.is_active||!1,i.RoleTypes.STAFF)}),o.map(d,function(e){return O(e,!0)}),o.map(p,function(e){return O(e,!1)})))))))}}]),t}(),T.propTypes={room:p.RoomShape.isRequired,context:d.default.object.isRequired,onProfileAvatarClick:d.default.func.isRequired,onScrollWaitTime:d.default.number},T.defaultProps={onScrollWaitTime:i.PARTICIPANT_SCROLLING_DEBOUNCE},b=O))||b,C=(0,m.actionsBinder)("fetchParticipants","clearParticipants","loadProfiles");t.default=(0,y.connect)(function(e){return{profiles:e.profiles}},C)(S)}).call(this,n(6),n(1),n(4))},4011:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(1),a=s(o),i=s(n(0));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.continueOpenCollapsible=function(){var e,t="height"===o.props.collapsingProp?o.refs.inner.offsetHeight:o.refs.inner.offsetWidth;o.setState((u(e={},o.props.collapsingProp,t),u(e,"transition",o.props.collapsingProp+" "+o.props.transitionTime+"ms "+o.props.easing),u(e,"isClosed",!1),u(e,"hasBeenOpened",!0),u(e,"inTransition",!0),u(e,"shouldOpenOnNextCycle",!1),e))},o.handleTriggerClick=function(e){e.preventDefault(),o.props.handleTriggerClick?o.props.handleTriggerClick(o.props.accordionPosition):!0===o.state.isClosed?(o.openCollapsible(),o.props.onOpening()):(o.closeCollapsible(),o.props.onClosing())},o.handleTransitionEnd=function(){var e;o.state.isClosed?(o.setState({inTransition:!1}),o.props.onClose()):(o.setState((u(e={},o.props.collapsingProp,"auto"),u(e,"overflow",o.props.overflowWhenOpen),u(e,"inTransition",!1),e)),o.props.onOpen())},o.state=(u(n={isClosed:!0,shouldSwitchAutoOnNextCycle:!1,hasBeenOpened:!1,overflow:"hidden",inTransition:!1},e.collapsingProp,0),u(n,"transition",e.collapsingProp+" "+e.transitionTime+"ms "+e.easing),n),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),l(t,[{key:"componentDidUpdate",value:function(e,t){var n=this;this.state.shouldOpenOnNextCycle&&this.continueOpenCollapsible(),"auto"===t[this.props.collapsingProp]&&!0===this.state.shouldSwitchAutoOnNextCycle&&(this.timeout=window.setTimeout(function(){var e;n.setState((u(e={},n.props.collapsingProp,0),u(e,"overflow","hidden"),u(e,"isClosed",!0),u(e,"shouldSwitchAutoOnNextCycle",!1),e)),n.timeout=null},50))}},{key:"componentWillUnmount",value:function(){this.timeout&&clearTimeout(this.timeout)}},{key:"closeCollapsible",value:function(){var e,t="height"===this.props.collapsingProp?this.refs.inner.offsetHeight:this.refs.inner.offsetWidth;this.setState((u(e={shouldSwitchAutoOnNextCycle:!0},this.props.collapsingProp,t),u(e,"transition","height "+this.props.transitionTime+"ms "+this.props.easing),u(e,"inTransition",!0),e))}},{key:"openCollapsible",value:function(){this.setState({inTransition:!0,shouldOpenOnNextCycle:!0})}},{key:"render",value:function(){var e=u({WebkitTransition:this.state.transition,msTransition:this.state.transition,transition:this.state.transition,overflow:this.state.overflow},this.props.collapsingProp,this.state[this.props.collapsingProp]),t=this.state.isClosed?"is-closed":"is-open",n=!1===this.state.isClosed&&void 0!==this.props.triggerWhenOpen?this.props.triggerWhenOpen:this.props.trigger,r=this.props.lazyRender&&!this.state.hasBeenOpened&&this.state.isClosed&&!this.state.inTransition?null:this.props.children,o=this.props.classParentString+"__trigger "+t+" "+(this.state.isClosed?this.props.triggerClassName:this.props.triggerOpenedClassName),i=this.props.classParentString+" "+(this.state.isClosed?this.props.className:this.props.openedClassName),s=this.props.classParentString+"__contentOuter "+this.props.contentOuterClassName,l=this.props.classParentString+"__contentInner "+this.props.contentInnerClassName;return a.default.createElement("div",{className:i.trim()},a.default.createElement("span",{className:o.trim(),onClick:this.handleTriggerClick},n),a.default.createElement("div",{className:s.trim(),ref:"outer",style:e,onTransitionEnd:this.handleTransitionEnd,"aria-expanded":!this.state.isClosed},a.default.createElement("div",{className:l.trim(),ref:"inner"},r)))}}]),t}();c.propTypes={transitionTime:i.default.number,easing:i.default.string,classParentString:i.default.string,openedClassName:i.default.string,triggerClassName:i.default.string,triggerOpenedClassName:i.default.string,contentOuterClassName:i.default.string,contentInnerClassName:i.default.string,accordionPosition:i.default.oneOfType([i.default.string,i.default.number]),handleTriggerClick:i.default.func,onOpen:i.default.func,onClose:i.default.func,onOpening:i.default.func,onClosing:i.default.func,trigger:i.default.oneOfType([i.default.string,i.default.element]),triggerWhenOpen:i.default.oneOfType([i.default.string,i.default.element]),lazyRender:i.default.bool,overflowWhenOpen:i.default.oneOf(["hidden","visible","auto","scroll","inherit","initial","unset"]),collapsingProp:i.default.oneOf(["height","width"])},c.defaultProps={transitionTime:400,easing:"linear",classParentString:"Collapsible",lazyRender:!1,overflowWhenOpen:"hidden",openedClassName:"",triggerClassName:"",triggerOpenedClassName:"",contentOuterClassName:"",contentInnerClassName:"",className:"",onOpen:function(){},onClose:function(){},onOpening:function(){},onClosing:function(){},collapsingProp:"height"},t.default=c},4012:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var o=n(2291),a=f(o),i=n(2192),s=f(n(0)),l=n(2188),u=f(n(28)),c=f(n(2195));function f(e){return e&&e.__esModule?e:{default:e}}var d=function(t){var n=t.participant,r=t.isActive,i=t.profile,s=t.roleType,c=t.onParticipantAvatarClick,f=r?"active":"inactive",d={"role-mentor":s===l.RoleTypes.MENTOR,"role-staff":s===l.RoleTypes.STAFF};return e.createElement("li",{key:n.id,"data-participant-id":n.id},e.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),c(n.id)},styleName:"profile-avatar "+f},e.createElement("span",{styleName:(0,u.default)("participant-avatar",d)},e.createElement(a.default,{profile:i,participant:n,theme:(0,o.getAvatarTheme)(o.AvatarTypes.PARTICIPANT),size:32}))))};d.propTypes={participant:i.ParticipantShape.isRequired,isActive:s.default.bool.isRequired,profile:i.ProfileShape,roleType:i.RoleTypeShape,onParticipantAvatarClick:s.default.func.isRequired},t.default=r(c.default,{allowMultiple:!0})(d)}).call(this,n(1),n(6))},4013:function(e,t,n){"use strict";(function(e,r,o){Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(2291),s=w(i),l=n(2217),u=n(2197),c=w(n(2218)),f=w(n(2363)),d=w(n(4014)),p=w(n(4016)),h=w(n(4017)),m=n(2192),y=w(n(0)),v=n(2188),g=w(n(2364)),_=n(2191),E=w(n(28)),b=n(27),T=n(2198),O=w(n(2262));function w(e){return e&&e.__esModule?e:{default:e}}var S,C,P,A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}var k=e(O.default,{allowMultiple:!0})((P=C=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=M(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleEditProfileClick=function(e){e.preventDefault(),r.props.pushScreen({screenType:v.Screens.PROFILE})},r.handleTrackReportBehavior=function(){var e=r.props,t=e.userData,n=e.profile,o=A({},t,{reported_profile:n.id});c.default.track(l.REPORT_BEHAVIOR,o)},M(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),R(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.userData,n=e.profile,r=A({},t,{viewed_profile:n.id});c.default.track(l.VIEW_PROFILE,r)}},{key:"render",value:function(){var e=this.props,t=e.profile,n=e.myProfile,a=e.userData,l=e.roomId,c=o.get(a,"ndKey"),m=(0,u.isMentorInRoom)(t,l),y=(0,u.isStaffInRoom)(t,l),v={"role-mentor":m,"role-staff":y};return r.createElement("div",{"aria-describedby":t.id},r.createElement("div",{styleName:(0,E.default)("display-header",v)},r.createElement("div",{styleName:"display-avatar"},r.createElement(s.default,{profile:t,theme:(0,i.getAvatarTheme)(i.AvatarTypes.PROFILE,m,y),size:45})),r.createElement("div",{styleName:"display-user-name-container"},r.createElement("h5",{styleName:"display-user-name"},(0,T.makeUserName)(t.first_name,t.last_name)),m&&r.createElement(f.default,null),y&&r.createElement(g.default,null))),r.createElement("div",{styleName:"display-content"},m||y?m?r.createElement(d.default,{profile:t}):r.createElement(p.default,{profile:t}):r.createElement(h.default,{profile:t,ndKey:c,viewerId:n.id,onEditProfileClick:this.handleEditProfileClick,onReportBehaviourClick:this.handleTrackReportBehavior})))}}]),t}(),C.propTypes={profile:m.ProfileShape,roomId:y.default.string.isRequired},S=P))||S,I=(0,_.actionsBinder)("pushScreen");t.default=(0,b.connect)(function(e){return{myProfile:e.profiles.me,userData:e.userData}},I)(k)}).call(this,n(6),n(1),n(4))},4014:function(e,t,n){"use strict";(function(e,r,o){Object.defineProperty(t,"__esModule",{value:!0});var a=n(2192),i=n(2188),s=n(2187),l=function(e){return e&&e.__esModule?e:{default:e}}(n(2262));var u=function(t){var n=t.profile,o=e.find(n.roles,{type:i.RoleTypes.MENTOR});if(!o)return null;var a=e.get(o,"payload.bio"),l=e.get(o,"payload.certifications",[]),u=!e.isEmpty(l);return r.createElement("div",null,r.createElement("div",null,r.createElement("h3",{styleName:"display-title"},(0,s.__)("Biography")),r.createElement("p",{styleName:"display-detail"},a)),u&&r.createElement("div",null,r.createElement("h3",{styleName:"display-title"},(0,s.__)("Certification")),r.createElement("ul",null,e.map(l,function(e,t){return r.createElement("li",{key:t},e)}))))};u.propTypes={profile:a.ProfileShape.isRequired},t.default=o(l.default,{allowMultiple:!0})(u)}).call(this,n(4),n(1),n(6))},4016:function(e,t,n){"use strict";(function(e,r,o){Object.defineProperty(t,"__esModule",{value:!0});var a=n(2192),i=n(2188),s=n(2187),l=function(e){return e&&e.__esModule?e:{default:e}}(n(2262));var u=function(t){var n=t.profile,o=e.find(n.roles,{type:i.RoleTypes.STAFF});if(!o)return null;var a=e.get(o,"payload.bio");return r.createElement("div",null,r.createElement("h3",{styleName:"display-title"},(0,s.__)("Biography")),r.createElement("p",{styleName:"display-detail"},a))};u.propTypes={profile:a.ProfileShape.isRequired},t.default=o(l.default,{allowMultiple:!0})(u)}).call(this,n(4),n(1),n(6))},4017:function(e,t,n){"use strict";(function(e,r,o){Object.defineProperty(t,"__esModule",{value:!0});var a=n(2348),i=d(n(39)),s=n(2192),l=d(n(0)),u=n(2187),c=n(2198),f=d(n(2262));function d(e){return e&&e.__esModule?e:{default:e}}var p=function(t){var n=t.profile,o=t.viewerId,s=t.ndKey,l=t.onEditProfileClick,f=t.onReportBehaviourClick,d=e.get(n,"show_location",!1),p=n.id===o,h=(0,c.makeSupportEmail)(s);return r.createElement("div",null,d&&r.createElement("div",null,r.createElement("h3",{styleName:"display-title"},(0,u.__)("Learning From")),r.createElement("p",{styleName:"display-detail"},e.get(n,"location.description"))),r.createElement("h3",{styleName:"display-title"},(0,u.__)("Program Enrollments")),r.createElement("ul",{styleName:"display-detail enrollments"},e.map(n.nanodegrees,function(e){return r.createElement("li",{key:e.id},e.title)})),!p&&r.createElement("div",{styleName:"display-report"},r.createElement("a",{onClick:f,href:"mailto:"+h+"?subject="+a.supportSubject+"&body="+a.supportBody},r.createElement("span",{styleName:"display-alert-icon"},r.createElement(i.default,{glyph:"alert-sm",text:(0,u.__)("Alert")})),r.createElement("span",null,(0,u.__)("Report User Behavior to Support")))),p&&r.createElement("a",{href:"#",onClick:l,title:"edit",styleName:"display-edit-profile"},(0,u.__)("Edit Student Profile")))};p.propTypes={viewerId:l.default.string.isRequired,ndKey:l.default.string.isRequired,profile:s.ProfileShape.isRequired,onEditProfileClick:l.default.func.isRequired,onReportBehaviourClick:l.default.func.isRequired},t.default=o(f.default,{allowMultiple:!0})(p)}).call(this,n(4),n(1),n(6))},4018:function(e,t,n){"use strict";(function(e,r,o){Object.defineProperty(t,"__esModule",{value:!0});var a=n(2192),i=n(2197),s=p(n(0)),l=p(n(2367)),u=n(2187),c=p(n(28)),f=p(n(12)),d=p(n(2195));function p(e){return e&&e.__esModule?e:{default:e}}var h=function(t){var n=t.room,o=t.profiles,a=t.onProfileAvatarClick,s=e.get(n,"info.room_payload"),d=e.get(s,"user_id"),p=e.get(o,d),h=!e.isEmpty(p),m=e.get(p,"first_name"),y=(0,f.default)(s.created_at).format("L"),v={"role-mentor":(0,i.isMessageFromMentor)(s,p),"role-staff":(0,i.isMessageFromStaff)(s,p)};return r.createElement("div",{styleName:"thread-header"},r.createElement("div",{styleName:"room-header"},r.createElement("div",{styleName:"room-header-mask"},r.createElement("span",{styleName:"circle turquoise"}),h?r.createElement("span",null,(0,u.__)("<%= first_name %>'s original post from <%= date %>",{first_name:m,date:y})):r.createElement("span",null,(0,u.__)("Original post from <%= date %>",{date:y})))),r.createElement("div",{styleName:(0,c.default)("thread-header-message",v)},r.createElement(l.default,{message:s,timeFormat:"long",showActions:!1,threadingEnabled:!1,sameAsPrev:!1,isMsgFromCurrentUser:!1,isThreadHeader:!0,profiles:o,avatarClickable:!0,onProfileAvatarClick:a})))};h.propTypes={room:a.RoomShape.isRequired,profiles:s.default.objectOf(a.ProfileShape).isRequired,onProfileAvatarClick:s.default.func.isRequired},t.default=o(d.default,{allowMultiple:!0})(h)}).call(this,n(4),n(1),n(6))},4019:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.prompts=["Say hello!","Share your thoughts","Need some help?","Tip: Use 3 back ticks to post code snippets like this...```code goes here```","Tip: Use Shift + Enter to move to the next line","Tip: Hover over messages to reveal more actions"]},4020:function(e,t,n){e.exports={"std-font-9":"styles--std-font-9--2ndRM","project-font":"styles--project-font--2gZa5","std-font-12":"styles--std-font-12--3rm10","room-title-font":"styles--room-title-font--3lmsz","user-font":"styles--user-font--170FD","std-font-14":"styles--std-font-14--3_-gS","thread-loading-error":"styles--thread-loading-error--3xBA3",inner:"styles--inner--nb4xD","std-font-16":"styles--std-font-16--3VMw-","std-font-18":"styles--std-font-18--2jYWk","chatroom-title-font":"styles--chatroom-title-font--101AX","screen-content":"styles--screen-content--3peoN",circle:"styles--circle--Y0cHt","gray-light":"styles--gray-light--3cJMR",turquoise:"styles--turquoise--2BrKk","avatar-circle":"styles--avatar-circle--2FzEM","avatar-circle-default":"styles--avatar-circle-default--S65mA","role-mentor":"styles--role-mentor--Hz-2f","role-staff":"styles--role-staff--3pSx4","avatar-img":"styles--avatar-img--21dVq","avatar-default":"styles--avatar-default--2BmKy",clearfix:"styles--clearfix--ueEtT","rel-pos":"styles--rel-pos--18sQT",invisible:"styles--invisible--12Ou6",photo:"styles--photo--3WReV","no-photo":"styles--no-photo--2OFXD","no-margin":"styles--no-margin--2kfRz"}},4023:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=u(n(4024)),a=u(n(2263)),i=u(n(0)),s=u(n(1)),l=u(n(2231));function u(e){return e&&e.__esModule?e:{default:e}}var c,f,d,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var h=e(l.default)((d=f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),p(t,[{key:"render",value:function(){var e=this.props.ndId;return s.default.createElement("div",{styleName:"homescreen"},s.default.createElement(a.default,{isBackButtonVisible:!1}),s.default.createElement(o.default,{ndId:e}))}}]),t}(),f.propTypes={ndId:i.default.number.isRequired},c=d))||c;t.default=h}).call(this,n(6))},4024:function(e,t,n){"use strict";(function(e,r,o,a){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(2188),l=_(n(2218)),u=n(2217),c=n(2229),f=n(15),d=_(n(0)),p=_(n(4025)),h=_(n(2368)),m=n(2187),y=n(2191),v=n(27),g=_(n(2540));function _(e){return e&&e.__esModule?e:{default:e}}var E,b,T,O=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}var S=e(g.default,{allowMultiple:!0})((T=b=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=r=w(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleRoomClick=function(e){e.preventDefault(),r.props.pushScreen({screenType:s.Screens.CHAT,roomTitle:e.currentTarget.getAttribute("data-title"),roomId:e.currentTarget.getAttribute("data-id")})},r.handleThreadsClick=function(e){e.preventDefault(),r.props.pushScreen({screenType:s.Screens.THREADLIST})},r.getThreadMentions=function(e){return o.chain(e).filter(function(e,t){return t.toLowerCase().includes("thread")}).map(o.size).values().sum().value()},w(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),O(t,[{key:"componentDidMount",value:function(){this.loadChatRooms(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.isCommunityOpen&&!this.props.isCommunityOpen&&this.loadChatRooms(e)}},{key:"loadChatRooms",value:function(e){var t=e.createToast,n=e.fetchChatRooms,r=e.checkWebsocket,o=e.onCommunityClose,i=e.isCommunityOpen,s=e.userData;n(e.ndId).then(function(e){return r(),e}).then(function(){return i?l.default.track(u.CHATLIST_OPEN,s):a.resolve()}).catch(function(){i&&(t(h.default.createError({message:(0,m.__)(c.ERR_UNABLE_TO_LOAD)})),o())})}},{key:"renderClassmatesGroup",value:function(e,t,n,a){var i=o.get(n,[e.room_id,"count"],0)>0,s=!o.isEmpty(t),l=o.filter(t,function(e){return o.get(n,e.room_id)}),u=!o.isEmpty(l),c=l.length,f=o.get(a,e.room_id,[]).length,d=this.getThreadMentions(a);return r.createElement("div",null,r.createElement("h3",{styleName:"room-title"},(0,m.__)("General")),r.createElement("ul",null,r.createElement("li",{key:e.room_id,styleName:"chatroom-list-item"},r.createElement(p.default,{subpart:e,title:(0,m.__)("My Classmates"),type:"cohort",onRoomClick:this.handleRoomClick,hasUnread:i,mentionCount:f})),s&&r.createElement("li",{key:"threads",styleName:"chatroom-list-item"},r.createElement(p.default,{subpart:t[0],title:(0,m.__)("All Threads"),type:"threads",onRoomClick:this.handleThreadsClick,hasUnread:u,unreadThreadCount:c,mentionCount:d}))))}},{key:"renderStudyGroups",value:function(e,t,n){var a=this;return r.createElement("ul",{styleName:"chatroom-list"},o.map(e,function(e){var i=e.room_title,s=o.get(t,[e.room_id,"count"],0)>0,l=o.get(n,e.room_id,[]).length;return r.createElement("li",{key:e.room_id,styleName:"chatroom-list-item"},r.createElement(p.default,{subpart:e,title:i,type:"project",onRoomClick:a.handleRoomClick,hasUnread:s,mentionCount:l}))}))}},{key:"isLobbyLoaded",value:function(e){return e&&!e.loading&&!e.error&&!o.isEmpty(e.rooms)}},{key:"render",value:function(){var e=this.props,t=e.lobby,n=e.unread,a=e.features,i=e.mentions,l=this.isLobbyLoaded(t),u=!!t.error,d=a.threadingEnabled?t.threads:[],p=o.find(t.rooms,{room_type:s.RoomTypes.COHORT}),h=o.reject(t.rooms,{room_type:s.RoomTypes.COHORT}),y=!o.isEmpty(h);return r.createElement(f.LoadingWrapper,{isLoading:t.loading},u&&r.createElement("div",null,c.ERR_UNABLE_TO_LOAD),l&&r.createElement("div",null,this.renderClassmatesGroup(p,d,n,i),y&&r.createElement("div",null,r.createElement("h3",{styleName:"room-title"},(0,m.__)("Project Channels")),this.renderStudyGroups(h,n,i))))}}]),t}(),b.propTypes={onCommunityClose:d.default.func.isRequired,ndId:d.default.number.isRequired,lobby:d.default.shape({loading:d.default.bool,error:d.default.shape({stack:d.default.string.isRequired,message:d.default.string.isRequired})})},E=T))||E,C=(0,y.actionsBinder)("checkWebsocket","fetchChatRooms","pushScreen","createToast");t.default=(0,v.connect)(function(e){return{lobby:e.lobby,isCommunityOpen:e.window.opened,onCommunityClose:e.window.toggleFn,userData:e.userData,unread:e.notifications.unread,mentions:e.notifications.unreadMentions,features:e.window.features}},C)(S)}).call(this,n(6),n(1),n(4),n(7))},4025:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.renderThreadActivity=f;var o=c(n(39)),a=c(n(0)),i=n(2192),s=n(2187),l=n(2198),u=c(n(2540));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return e>0?(0,s.__)("New Activity in your Threads"):null}var d=function(t){var n=t.subpart,r=t.title,a=t.onRoomClick,i=t.type,u=t.hasUnread,c=t.unreadThreadCount,d=t.mentionCount,p=!n.is_available,h="chatroom-list-part"+(p?" disabled":"");return e.createElement("a",{href:"#",onClick:a,styleName:h,"data-id":n.room_id,"data-title":r},e.createElement("div",{styleName:"chatroom-list-part-title"},e.createElement("div",{styleName:"chatroom-title"},r),"threads"===i?e.createElement("span",{styleName:"thread-activity"},f(c)):null),e.createElement("div",{styleName:"chatroom-list-part-action"},p?e.createElement("span",null,e.createElement(o.default,{glyph:"locked-md",text:(0,s.__)("Locked")})):e.createElement("span",null,u&&e.createElement("span",{styleName:d>0?"room-unread-badge-mention":"room-unread-badge","data-mention-count":(0,l.displayMentionCount)(d)}))))};d.propTypes={subpart:i.RoomInfoShape.isRequired,title:a.default.string.isRequired,onRoomClick:a.default.func.isRequired,hasUnread:a.default.bool.isRequired,unreadThreadCount:a.default.number,type:a.default.oneOf(["cohort","project","lessons","threads"])},t.default=r(u.default,{allowMultiple:!0})(d)}).call(this,n(1),n(6))},4027:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=s(n(2263)),a=s(n(4028)),i=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),l(t,[{key:"render",value:function(){return i.default.createElement("div",null,i.default.createElement(o.default,{isBackButtonVisible:!1}),i.default.createElement(a.default,null))}}]),t}();t.default=u},4028:function(e,t,n){"use strict";(function(e,r,o){Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=v(n(2218)),s=v(n(4029)),l=v(n(4030)),u=v(n(4034)),c=n(2217),f=n(2188),d=v(n(2368)),p=n(2187),h=n(2191),m=n(27),y=n(2198);function v(e){return e&&e.__esModule?e:{default:e}}var g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}var b=function(t){function n(){var e,t,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return t=o=E(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(l))),o.state={userLocation:r.get(o.props.profile,"location"),isLoadingLocations:!1,locationPredictions:null,locationQueryTimestamp:null,isCroppingPhoto:!1,showLocation:r.get(o.props.profile,"show_location"),photo_url:r.get(o.props.profile,"photo_url"),photo_base64:null,agreeToGuidelines:!1,editedPhoto:!1,editedGeo:!1,madeGeoPrivate:!1,madeGeoPublic:!0},o.handleRemovePhotoClick=function(e){e.preventDefault(),o.setState({photo_url:"",photo_base64:"",editedPhoto:!0})},o.handlePhotoEditorCloseClick=function(e){e.preventDefault(),o.setState({isCroppingPhoto:!1,photo_base64:null})},o.handleSavePhotoClick=function(e){o.setState({photo_base64:e,isCroppingPhoto:!1,editedPhoto:!0})},o.handleAgreeCheckboxChange=function(e){o.setState({agreeToGuidelines:e.target.checked})},o.trackSaveProfile=function(){var e=o.state,t=e.editedGeo,n=e.editedPhoto,r=e.madeGeoPublic,a=e.madeGeoPrivate,s=o.props.userData,l=g({},s,{editedPhoto:n,editedGeo:t,madeGeoPublic:r,madeGeoPrivate:a});i.default.track(c.SAVE_PROFILE,l)},o.handleSave=function(e){e.preventDefault();var t=o.props,n=t.createProfile,a=t.updateProfile,i=t.profile,s=t.updateScreen,l=t.popScreen,u={};u.location_id=r.get(o.state.userLocation,"location_id",null),u.photo_base64=o.state.photo_base64,u.show_location=o.state.showLocation,i.needs_initializing?n(u).then(function(){s({screenType:f.Screens.HOME})}):a(u).then(function(){l()}),o.trackSaveProfile()},o.handleLocationInputChange=function(e){if(e){var t=new Date,n=function(){return t>=o.state.locationQueryTimestamp};n()&&(o.setState({isLoadingLocations:!0,locationQueryTimestamp:t}),setTimeout(function(){if(n())return o.fetchLocations(e).then(function(e){n()&&o.setState({isLoadingLocations:!1,locationPredictions:e.options})})},300))}},o.handleLocationChange=function(e){o.setState({userLocation:e,editedGeo:!0})},o.handleShowLocationClick=function(){o.setState(function(e){var t=e.showLocation,n=!e.showLocation;return{showLocation:!e.showLocation,madeGeoPublic:n,madeGeoPrivate:t}})},o.verifyPhotoFile=function(e){if(e.length>1)throw new Error((0,p.__)("Only allowed to upload one photo"));var t=r.first(e);if(!r.includes(["image/jpeg","image/jpg","image/png"],t.type))throw new Error((0,p.__)("Please upload a .jpg or .png"));if(t.size>5242880)throw new Error((0,p.__)("Max file size allowed is 5MB"))},o.uploadPhotoFile=function(e,t){var n=t.updateProgress,a=r.first(e);s.default.getBase64(a).then(function(e){var t=new Image;t.onload=function(){t.width<120||t.height<120?o.props.createToast(d.default.createError({message:(0,p.__)("Image must be at least 120px by 120px")})):(n({progress:100}),o.setState({photo_base64:e,isCroppingPhoto:!0}))},t.src=e}).catch(function(e){d.default.createError(e)})},E(o,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),_(n,[{key:"fetchLocations",value:function(e){return r.isEmpty(e)?o.resolve({options:[]}):l.default.autocomplete(e).then(function(e){return{options:e}})}},{key:"render",value:function(){var t=this.state,n=t.userLocation,o=t.locationPredictions,a=t.isLoadingLocations,i=t.isCroppingPhoto,s=t.photo_base64,l=t.showLocation,c=t.photo_url,f=t.agreeToGuidelines,d=this.props.profile;return e.createElement("div",null,d&&e.createElement(u.default,{onSubmit:this.handleSave,userLocation:n,onLocationChange:this.handleLocationChange,onLocationInputChange:this.handleLocationInputChange,locationPredictions:o,isLoadingLocations:a,needs_initializing:d.needs_initializing,nanodegrees:r.map(d.nanodegrees,function(e){return e.title}),user:(0,y.makeUserName)(d.first_name,d.last_name),isCroppingPhoto:i,photoUrl:c,photoBase64:s,onRemovePhotoClick:this.handleRemovePhotoClick,onPhotoEditorCloseClick:this.handlePhotoEditorCloseClick,onSavePhotoClick:this.handleSavePhotoClick,showLocation:l,onShowLocationClick:this.handleShowLocationClick,uploadPhotoFile:this.uploadPhotoFile,verifyPhotoFile:this.verifyPhotoFile,agreeToGuidelines:f,onAgreeCheckboxChange:this.handleAgreeCheckboxChange}))}}]),n}(),T=(0,h.actionsBinder)("updateScreen","popScreen","createToast","createProfile","updateProfile");t.default=(0,m.connect)(function(e){return{profile:e.profiles.me,userData:e.userData}},T)(b)}).call(this,n(1),n(4),n(7))},4029:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={getBase64:function(t){return new e(function(e,n){var r=new window.FileReader;r.onloadend=function(){e(r.result)},r.onerror=function(e){n(e)},r.readAsDataURL(t)})}}}).call(this,n(7))},4030:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var o=l(n(2259)),a=l(n(4031)),i=l(n(4032)),s=l(n(4033));function l(e){return e&&e.__esModule?e:{default:e}}var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c={drivers:{google:{_loadService:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,n=c.drivers.google._getApiKey(),o=function(){return e.get(t,"google.maps.places.AutocompleteService",null)},i=o();if(i)return r.resolve(i);if(e.isEmpty(n))return r.reject(new Error("Missing Google Places API key"));var s="https://maps.googleapis.com/maps/api/js?key="+c.drivers.google._getApiKey()+"&libraries=places";return a.default.loadExternalScript(s,o)},_getApiKey:function(){return o.default.googleMapsApiKey},search:function(t,n){return n=e.assign({},{types:["(cities)"]},n),c.drivers.google._loadService().then(function(e){if(e)return new e;throw new Error("Google Places API failed to load")}).then(function(e){return new r(function(r,o){e.getPlacePredictions(u({input:t},n),function(e,t){switch(t){case"OK":case"ZERO_RESULTS":r(e||[]);break;default:o(new Error("Google Places API failed with status code: "+t))}})})}).then(function(e){return r.map(e,function(e){return c.drivers.profiles.decode(e.place_id).then(function(t){return{prediction:e,location:t}})})}).then(function(t){return e.chain(t).filter(function(t){var n=t.prediction,r=void 0===n?{}:n,o=t.location,a=void 0===o?{}:o,i=e.chain(a).get("address_components",[]).some(function(t){return"country"===t.type&&e.includes(s.default.whitelist,t.short_name)}).value();return!i&&e.includes(window.location.search,"debug")&&console.warn("Omitting;",r.description),i}).map(function(e){var t=e.prediction,n=void 0===t?{}:t;return u({},n,{location_id:n.place_id})}).value()})}},profiles:{decode:function(e){return i.default.fetchLocation(e)},search:function(e){return i.default.fetchProfileLocations(e)}}},autocomplete:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.drivers;return n.google.search(e,t).catch(function(t){return console.warn(t),n.profiles.search(e)}).catch(function(e){return console.error("Unable to get auto-complete results",e),[]})},decode:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.drivers.profiles).decode(e)},format:function(t,n){e.isNil(t)&&(t={});var r=e.get(t,"address_components",[]);if(void 0===n&&t.description)return t.description;if(e.isEmpty(r))return null;var o=void 0;return r.map(function(e){return"country"===e.type&&"US"===e.short_name&&(o=!0),e}).map(function(e){return o?r.length>2?"country"===e.type?null:n?e[n]:e.short_name||e.long_name:e.long_name:"administrative_area_level_1"===e.type?null:e.long_name}).filter(function(t){return!e.isEmpty(t)}).join(", ")}};t.default=c}).call(this,n(4),n(7))},4031:function(e,t,n){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={loadExternalScript:function(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return new e(function(e,a){var i=function(){return e((r||n.noop)())},s=document.getElementsByTagName("head")[0],l=document.createElement("script");l.type="text/javascript",l.src=t,l.onreadystatechange=i,l.onload=i,s.appendChild(l),setTimeout(function(){a(new Error("Timed out loading script:",t))},o)})}}}).call(this,n(7),n(4))},4032:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(2259)),o=a(n(203));function a(e){return e&&e.__esModule?e:{default:e}}var i=function(e){return o.default.makeGqlRequest(r.default.profilesApiUrl,e)};t.default={fetchProfileLocations:function(t){var n=function(e){return'query LocationsQuery {\n    locations(search: "'+e+'") {\n      description\n      location_id\n      }\n  }'}(t);return i({query:n}).then(function(t){return e.get(t,"data.locations",[])})},fetchLocation:function(t){var n=function(e){return'query LocationQuery {\n    location(location_id: "'+e+'") {\n      address_components {\n        long_name\n        short_name\n        type\n      }\n      location_id\n    }\n  }\n  '}(t);return i({query:n}).then(function(t){return e.get(t,"data.location",null)})}}}).call(this,n(4))},4033:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={blacklist:["BY","CD","CI","CU","IR","IQ","KP","LR","MM","SD","SY","ZW","AL","BA","BG","HR","MK","ME","RO","RS","SI","XK"],whitelist:["AF","AX","DZ","AS","AD","AO","AI","AQ","AG","AR","AM","AW","AU","AT","AZ","BS","BH","BD","BB","BE","BZ","BJ","BM","BT","BO","BQ","BW","BV","BR","IO","BN","BF","BI","KH","CM","CA","CV","KY","CF","TD","CL","CN","CX","CC","CO","KM","CG","CK","CR","CW","CY","CZ","DK","DJ","DM","DO","EC","EG","SV","GQ","ER","EE","ET","FK","FO","FJ","FI","FR","GF","PF","TF","GA","GM","GE","DE","GH","GI","GR","GL","GD","GP","GU","GT","GG","GN","GW","GY","HT","HM","VA","HN","HK","HU","IS","IN","ID","IE","IM","IL","IT","JM","JP","JE","JO","KZ","KE","KI","KR","KW","KG","LA","LV","LB","LS","LY","LI","LT","LU","MO","MG","MW","MY","MV","ML","MT","MH","MQ","MR","MU","YT","MX","FM","MD","MC","MN","MS","MA","MZ","NA","NR","NP","NL","NC","NZ","NI","NE","NG","NU","NF","MP","NO","OM","PK","PW","PS","PA","PG","PY","PE","PH","PN","PL","PT","PR","QA","RE","RU","RW","BL","SH","KN","LC","MF","PM","VC","WS","SM","ST","SA","SN","SC","SL","SG","SX","SK","SB","SO","ZA","GS","SS","ES","LK","SR","SJ","SZ","SE","CH","TW","TJ","TZ","TH","TL","TG","TK","TO","TT","TN","TR","TM","TC","TV","UG","UA","AE","GB","US","UM","UY","UZ","VU","VE","VN","VG","VI","WF","EH","YE","ZM"]}},4034:function(e,t,n){"use strict";(function(e,r,o){Object.defineProperty(t,"__esModule",{value:!0});var a=n(15),i=h(n(4035)),s=n(4039),l=h(n(39)),u=h(n(0)),c=h(n(114)),f=n(2187),d=h(n(4075)),p=h(n(2262));function h(e){return e&&e.__esModule?e:{default:e}}var m=function(t){var n=t.onSubmit,o=t.userLocation,u=t.onLocationChange,p=t.onLocationInputChange,h=t.locationPredictions,m=t.isLoadingLocations,y=t.nanodegrees,v=t.user,g=t.isCroppingPhoto,_=t.photoUrl,E=t.photoBase64,b=t.onRemovePhotoClick,T=t.onPhotoEditorCloseClick,O=t.onSavePhotoClick,w=t.uploadPhotoFile,S=t.showLocation,C=t.onShowLocationClick,P=t.verifyPhotoFile,A=t.needs_initializing,R=t.agreeToGuidelines,M=t.onAgreeCheckboxChange,k=_||E,I=k?(0,f.__)("Change Photo"):(0,f.__)("Add Photo"),L=A?(0,f.__)("You’re one short step away! Fill out your profile to share & connect with your classmates."):(0,f.__)("Edit your student profile and return to the conversation."),N="profile-container "+(A?"":"profile-height-with-agree-checkbox");return e.createElement("form",{styleName:N},e.createElement("h3",{styleName:"direction"},L),e.createElement("hr",{styleName:"line-break"}),e.createElement("div",{styleName:"form-content"},e.createElement("h4",{styleName:"name"},v),e.createElement("div",{styleName:"photo-container"},function(t,n,r){var o=void 0;return t&&(o=e.createElement("img",{src:t,alt:(0,f.__)("Profile photo"),styleName:"profile-avatar-img"})),n&&(o=e.createElement("img",{src:n,alt:(0,f.__)("Profile photo"),styleName:"profile-avatar-img"})),t||n||(o=e.createElement("div",{styleName:"avatar-default"},r[0])),o}(_,E,v),e.createElement("div",{styleName:"avatar-direction"},e.createElement("div",{styleName:"avatar-title"},(0,f.__)("Profile photo")),e.createElement("div",{styleName:"avatar-size"},(0,f.__)("Min: 120px by 120px, Max: 5MB")),e.createElement(s.Dropfile,{theme:d.default,verify:P,uploadFiles:w},e.createElement("div",{styleName:"add-photo"},I)),k&&e.createElement("a",{href:"#",onClick:b,styleName:"remove-photo",title:"remove"},(0,f.__)("remove"))),e.createElement(i.default,{isOpen:g,photoUrl:_,photoBase64:E,onPhotoEditorCloseClick:T,onSavePhotoClick:O})),e.createElement("label",{htmlFor:"userLocation",styleName:"label"},(0,f.__)("Where are you studying from?")),e.createElement(c.default,{autoBlur:!0,id:"userLocation",isLoading:m,labelKey:"description",name:"location",styleName:"location",arrowRenderer:null,onChange:u,onInputChange:p,options:h,disabled:!S,placeholder:(0,f.__)("Enter your city"),noResultsText:(0,f.__)("Type to search"),value:o,valueKey:"location_id"}),e.createElement("div",{styleName:"location-pref"},e.createElement(a.Checkbox,{onChange:C,defaultChecked:S,required:!0,"aria-required":"true"},e.createElement("span",null,(0,f.__)("Share my location")))),e.createElement("div",{styleName:"label"},(0,f.__)("Program Enrollments")),e.createElement("ul",{styleName:"nanodegrees-list"},r.map(y,function(t,n){return e.createElement("li",{styleName:"nanodegrees-entry",key:t+n},t)}))),e.createElement("div",{styleName:"btn-container"},A&&e.createElement("div",{styleName:"agree-checkbox"},e.createElement(a.Checkbox,{onChange:M,checked:R},e.createElement("div",{styleName:"agree-label-text"},e.createElement("span",{styleName:"red-asterisk"},"*"),(0,f.__)("I agree to adhere to the Udacity")," ",e.createElement("a",{href:"https://www.udacity.com/legal/community-guidelines",target:"_blank"},(0,f.__)("Community Guidelines")),".",e.createElement(l.default,{glyph:"information-md",text:(0,f.__)("Information about community guidelines")})))),e.createElement(a.Button,{type:"primary",onClick:n,styleName:"save-btn",disabled:A&&!R},(0,f.__)("Save and Continue"))))};m.propTypes={onSubmit:u.default.func.isRequired,userLocation:u.default.object,onLocationChange:u.default.func.isRequired,onLocationInputChange:u.default.func.isRequired,isLoadingLocations:u.default.bool,nanodegrees:u.default.arrayOf(u.default.string),user:u.default.string.isRequired,isCroppingPhoto:u.default.bool,photoUrl:u.default.string,photoBase64:u.default.string,onRemovePhotoClick:u.default.func.isRequired,onPhotoEditorCloseClick:u.default.func.isRequired,onSavePhotoClick:u.default.func.isRequired,showLocation:u.default.bool.isRequired,onShowLocationClick:u.default.func.isRequired,verifyPhotoFile:u.default.func.isRequired,uploadPhotoFile:u.default.func.isRequired},t.default=o(p.default,{allowMultiple:!0})(m)}).call(this,n(1),n(4),n(6))},4035:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var o=u(n(4036)),a=n(15),i=u(n(0)),s=n(2187),l=u(n(2541));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(t){var n=t.photoUrl,r=t.photoBase64,i=t.isOpen,l=t.onPhotoEditorCloseClick,u=t.onSavePhotoClick;return e.createElement(a.Modal,{contentLabel:(0,s.__)("crop photo"),isOpen:i,onRequestClose:l,styleName:"modal"},i&&e.createElement(o.default,{image:r||n,onClose:l,onSave:u}))};c.propTypes={photoUrl:i.default.string,photoBase64:i.default.string,isOpen:i.default.bool.isRequired,onPhotoEditorCloseClick:i.default.func.isRequired,onSavePhotoClick:i.default.func.isRequired},t.default=r(l.default)(c)}).call(this,n(1),n(6))},4036:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(15),i=c(n(4037)),s=c(n(0)),l=n(2187),u=c(n(2541));function c(e){return e&&e.__esModule?e:{default:e}}var f,d,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}var m=(d=f=function(t){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=r=h(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),r.state={rotateAngle:0,scaleValue:1},r.handleLeftRotate=function(e){e.preventDefault();var t=r.state.rotateAngle;r.setState({rotateAngle:(t-90)%360})},r.handleRightRotate=function(e){e.preventDefault();var t=r.state.rotateAngle;r.setState({rotateAngle:(t+90)%360})},r.handleSaveClick=function(e){e.preventDefault();var t=r.editor.getImageScaledToCanvas();r.props.onSave(t.toDataURL("image/jpeg"))},h(r,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),p(n,[{key:"handleZoomChange",value:function(e){var t=this.sanitizeZoomValue(e);this.setState({scaleValue:t})}},{key:"handleZoomComplete",value:function(e){var t=this.sanitizeZoomValue(e);this.setState({scaleValue:t,scaleFinal:t})}},{key:"sanitizeZoomValue",value:function(e){return Number(e.toFixed(2))}},{key:"setEditorRef",value:function(e){e&&(this.editor=e)}},{key:"render",value:function(){var t=this,n=this.state,r=n.scaleFinal,o=n.rotateAngle,s=n.scaleValue,u=this.props,c=u.onClose,f=u.image;return e.createElement("div",{styleName:"editor"},e.createElement(i.default,{ref:this.setEditorRef.bind(this),image:f,width:400,height:400,border:0,borderRadius:200,scale:r,rotate:o,onSave:this.handleSaveClick,onClose:c}),e.createElement("div",{styleName:"control"},e.createElement("span",{styleName:"label description"},(0,l.__)("zoom")),e.createElement(a.RangeInput,{min:1,max:2,step:.01,value:s,disabled:!1,benchmarks:!1,onChange:function(e){return t.handleZoomChange(e)},onChangeComplete:function(e){return t.handleZoomComplete(e)}})),e.createElement("div",{styleName:"control inline"},e.createElement("span",{styleName:"label description"},"rotate"),e.createElement(a.Button,{onClick:this.handleLeftRotate,styleName:"rotate"},(0,l.__)("left")),e.createElement(a.Button,{onClick:this.handleRightRotate,styleName:"rotate"},(0,l.__)("right"))),e.createElement("div",{styleName:"buttons"},e.createElement(a.Button,{label:(0,l.__)("save photo"),onClick:this.handleSaveClick,type:"primary",styleName:"save"}),e.createElement(a.Button,{label:(0,l.__)("cancel"),onClick:c,type:"default",styleName:"cancel"})))}}]),n}(),f.displayName="ImageEditor",d);m.propTypes={image:s.default.string,onClose:s.default.func.isRequired,onSave:s.default.func.isRequired},t.default=r(u.default,{allowMultiple:!0})(m)}).call(this,n(1),n(6))},4037:function(e,t,n){e.exports=function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n;var o=function(e){var t="undefined"==typeof DOMParser?null:new DOMParser;return t?t.parseFromString(e,"text/html"):null},a=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if("text/html"===r.type){r.getAsString(function(e){var n=o(e).querySelector("img");n&&n.src&&t(n.src)});break}}},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=!("undefined"==typeof window||"undefined"==typeof navigator||!("ontouchstart"in window||navigator.msMaxTouchPoints>0)),c="undefined"!=typeof File,f={touch:{react:{down:"onTouchStart",mouseDown:"onMouseDown",drag:"onTouchMove",drop:"onTouchEnd",move:"onTouchMove",mouseMove:"onMouseMove",up:"onTouchEnd",mouseUp:"onMouseUp"},native:{down:"touchstart",mouseDown:"mousedown",drag:"touchmove",drop:"touchend",move:"touchmove",mouseMove:"mousemove",up:"touchend",mouseUp:"mouseup"}},desktop:{react:{down:"onMouseDown",drag:"onDragOver",drop:"onDrop",move:"onMouseMove",up:"onMouseUp"},native:{down:"mousedown",drag:"dragStart",drop:"drop",move:"mousemove",up:"mouseup"}}},d=u?f.touch:f.desktop,p="undefined"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1,h=function(e){function o(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return t=n=r(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(l))),n.state={drag:!1,my:null,mx:null,image:{x:.5,y:.5}},n.handleMouseDown=function(e){(e=e||window.event).preventDefault(),n.setState({drag:!0,mx:null,my:null})},n.handleMouseUp=function(){n.state.drag&&(n.setState({drag:!1}),n.props.onMouseUp())},n.handleMouseMove=function(e){if(e=e||window.event,!1!==n.state.drag){var t=e.targetTouches?e.targetTouches[0].pageX:e.clientX,r=e.targetTouches?e.targetTouches[0].pageY:e.clientY,o={mx:t,my:r},a=n.props.rotate;if(a=(a%=360)<0?a+360:a,n.state.mx&&n.state.my){var i=n.state.mx-t,l=n.state.my-r,u=n.state.image.width*n.props.scale,c=n.state.image.height*n.props.scale,f=n.getCroppingRect(),d=f.x,p=f.y;d*=u,p*=c;var h=function(e){return e*(Math.PI/180)},m=Math.cos(h(a)),y=Math.sin(h(a)),v=p+-i*y+l*m,g={x:(d+i*m+l*y)/u+1/n.props.scale*n.getXScale()/2,y:v/c+1/n.props.scale*n.getYScale()/2};n.props.onPositionChange(g),o.image=s({},n.state.image,g)}n.setState(o),n.props.onMouseMove(e)}},n.handleDragOver=function(e){(e=e||window.event).preventDefault()},n.handleDrop=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event;if(e.stopPropagation(),e.preventDefault(),e.dataTransfer){var t=e.dataTransfer,r=t.files,o=t.items;r&&r.length?(n.props.onDropFile(e),n.loadImageFile(r[0])):o&&o.length&&a(o,function(e){return n.loadImage(e)})}},n.setCanvas=function(e){n.canvas=e},r(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,t.Component),l(o,[{key:"isVertical",value:function(){return this.props.rotate%180!=0}},{key:"getBorders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.border;return Array.isArray(e)?e:[e,e]}},{key:"getDimensions",value:function(){var e=this.props,t=e.width,n=e.height,r=e.rotate,o=e.border,a={},s=this.getBorders(o),l=i(s,2),u=l[0],c=l[1],f=t,d=n;return this.isVertical()?(a.width=d,a.height=f):(a.width=f,a.height=d),a.width+=2*u,a.height+=2*c,{canvas:a,rotate:r,width:t,height:n,border:o}}},{key:"getImage",value:function(){var e=this.getCroppingRect(),t=this.state.image;e.x*=t.resource.width,e.y*=t.resource.height,e.width*=t.resource.width,e.height*=t.resource.height;var n=document.createElement("canvas");this.isVertical()?(n.width=e.height,n.height=e.width):(n.width=e.width,n.height=e.height);var r=n.getContext("2d");return r.translate(n.width/2,n.height/2),r.rotate(this.props.rotate*Math.PI/180),r.translate(-n.width/2,-n.height/2),this.isVertical()&&r.translate((n.width-n.height)/2,(n.height-n.width)/2),r.drawImage(t.resource,-e.x,-e.y),n}},{key:"getImageScaledToCanvas",value:function(){var e=this.getDimensions(),t=e.width,n=e.height,r=document.createElement("canvas");return this.isVertical()?(r.width=n,r.height=t):(r.width=t,r.height=n),this.paintImage(r.getContext("2d"),this.state.image,0,1),r}},{key:"getXScale",value:function(){var e=this.props.width/this.props.height,t=this.state.image.width/this.state.image.height;return Math.min(1,e/t)}},{key:"getYScale",value:function(){var e=this.props.height/this.props.width,t=this.state.image.height/this.state.image.width;return Math.min(1,e/t)}},{key:"getCroppingRect",value:function(){var e=this.props.position||{x:this.state.image.x,y:this.state.image.y},t=1/this.props.scale*this.getXScale(),n=1/this.props.scale*this.getYScale(),r={x:e.x-t/2,y:e.y-n/2,width:t,height:n},o=0,a=1-r.width,i=0,l=1-r.height;return(t>1||n>1)&&(o=-r.width,a=1,i=-r.height,l=1),s({},r,{x:Math.max(o,Math.min(r.x,a)),y:Math.max(i,Math.min(r.y,l))})}},{key:"isDataURL",value:function(e){return null!==e&&!!e.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@/?%\s]*\s*$/i)}},{key:"loadImage",value:function(e){c&&e instanceof File?this.loadImageFile(e):"string"==typeof e&&this.loadImageURL(e)}},{key:"loadImageURL",value:function(e){var t=new Image;t.onload=this.handleImageReady.bind(this,t),t.onerror=this.props.onLoadFailure,!this.isDataURL(e)&&this.props.crossOrigin&&(t.crossOrigin=this.props.crossOrigin),t.src=e}},{key:"loadImageFile",value:function(e){var t=this,n=new FileReader;n.onload=function(e){return t.loadImageURL(e.target.result)},n.readAsDataURL(e)}},{key:"componentDidMount",value:function(){var e=n.findDOMNode(this.canvas).getContext("2d");if(this.props.image&&this.loadImage(this.props.image),this.paint(e),document){var t=d.native;document.addEventListener(t.move,this.handleMouseMove,!1),document.addEventListener(t.up,this.handleMouseUp,!1),u&&(document.addEventListener(t.mouseMove,this.handleMouseMove,!1),document.addEventListener(t.mouseUp,this.handleMouseUp,!1))}}},{key:"componentWillUnmount",value:function(){if(document){var e=d.native;document.removeEventListener(e.move,this.handleMouseMove,!1),document.removeEventListener(e.up,this.handleMouseUp,!1),u&&(document.removeEventListener(e.mouseMove,this.handleMouseMove,!1),document.removeEventListener(e.mouseUp,this.handleMouseUp,!1))}}},{key:"componentDidUpdate",value:function(e,t){var r=n.findDOMNode(this.canvas),o=r.getContext("2d");o.clearRect(0,0,r.width,r.height),this.paint(o),this.paintImage(o,this.state.image,this.props.border),e.image===this.props.image&&e.width===this.props.width&&e.height===this.props.height&&e.position===this.props.position&&e.scale===this.props.scale&&e.rotate===this.props.rotate&&t.my===this.state.my&&t.mx===this.state.mx&&t.image.x===this.state.image.x&&t.image.y===this.state.image.y||this.props.onImageChange()}},{key:"handleImageReady",value:function(e){var t=this.getInitialSize(e.width,e.height);t.resource=e,t.x=.5,t.y=.5,this.setState({drag:!1,image:t},this.props.onImageReady),this.props.onLoadSuccess(t)}},{key:"getInitialSize",value:function(e,t){var n=void 0,r=void 0,o=this.getDimensions();return o.height/o.width>t/e?r=e*((n=this.getDimensions().height)/t):n=t*((r=this.getDimensions().width)/e),{height:n,width:r}}},{key:"componentWillReceiveProps",value:function(e){(e.image&&this.props.image!==e.image||this.props.width!==e.width||this.props.height!==e.height)&&this.loadImage(e.image)}},{key:"paintImage",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p;if(t.resource){var o=this.calculatePosition(t,n);e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(this.props.rotate*Math.PI/180),e.translate(-e.canvas.width/2,-e.canvas.height/2),this.isVertical()&&e.translate((e.canvas.width-e.canvas.height)/2,(e.canvas.height-e.canvas.width)/2),e.scale(r,r),e.globalCompositeOperation="destination-over",e.drawImage(t.resource,o.x,o.y,o.width,o.height),e.restore()}}},{key:"calculatePosition",value:function(e,t){e=e||this.state.image;var n=this.getBorders(t),r=i(n,2),o=r[0],a=r[1],s=this.getCroppingRect(),l=e.width*this.props.scale,u=e.height*this.props.scale,c=-s.x*l,f=-s.y*u;return this.isVertical()?(c+=a,f+=o):(c+=o,f+=a),{x:c,y:f,height:u,width:l}}},{key:"paint",value:function(e){e.save(),e.scale(p,p),e.translate(0,0),e.fillStyle="rgba("+this.props.color.slice(0,4).join(",")+")";var t=this.props.borderRadius,n=this.getDimensions(),r=this.getBorders(n.border),o=i(r,2),a=o[0],s=o[1],l=n.canvas.height,u=n.canvas.width;t=Math.max(t,0),t=Math.min(t,u/2-a,l/2-s),e.beginPath(),function(e,t,n,r,o,a){if(0===a)e.rect(t,n,r,o);else{var i=r-a,s=o-a;e.translate(t,n),e.arc(a,a,a,Math.PI,1.5*Math.PI),e.lineTo(i,0),e.arc(i,a,a,1.5*Math.PI,2*Math.PI),e.lineTo(r,s),e.arc(i,s,a,2*Math.PI,.5*Math.PI),e.lineTo(a,o),e.arc(a,s,a,.5*Math.PI,Math.PI),e.translate(-t,-n)}}(e,a,s,u-2*a,l-2*s,t),e.rect(u,0,-u,l),e.fill("evenodd"),e.restore()}},{key:"render",value:function(){var e=this.getDimensions(),n={width:e.canvas.width,height:e.canvas.height,cursor:this.state.drag?"grabbing":"grab"},r={width:e.canvas.width*p,height:e.canvas.height*p,style:s({},n,this.props.style)};return r[d.react.down]=this.handleMouseDown,r[d.react.drag]=this.handleDragOver,this.props.disableDrop||(r[d.react.drop]=this.handleDrop),u&&(r[d.react.mouseDown]=this.handleMouseDown),t.createElement("canvas",s({ref:this.setCanvas},r))}}]),o}();return h.propTypes={scale:e.number,rotate:e.number,image:e.oneOfType([e.string].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(c?[e.instanceOf(File)]:[]))),border:e.oneOfType([e.number,e.arrayOf(e.number)]),borderRadius:e.number,width:e.number,height:e.number,position:e.shape({x:e.number,y:e.number}),color:e.arrayOf(e.number),style:e.object,crossOrigin:e.oneOf(["","anonymous","use-credentials"]),onDropFile:e.func,onLoadFailure:e.func,onLoadSuccess:e.func,onImageReady:e.func,onImageChange:e.func,onMouseUp:e.func,onMouseMove:e.func,onPositionChange:e.func,disableDrop:e.bool},h.defaultProps={disableDrop:!1,scale:1,rotate:0,border:25,borderRadius:0,width:200,height:200,color:[0,0,0,.5],style:{},onDropFile:function(){},onLoadFailure:function(){},onLoadSuccess:function(){},onImageReady:function(){},onImageChange:function(){},onMouseUp:function(){},onMouseMove:function(){},onPositionChange:function(){}},h}(n(0),n(1),n(16))},4039:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Image=t.Progressbar=t.Dropfile=void 0;var r=i(n(4040)),o=i(n(2548)),a=i(n(2549));function i(e){return e&&e.__esModule?e:{default:e}}t.Dropfile=r.default,t.Progressbar=o.default,t.Image=a.default},4040:function(e,t,n){"use strict";(function(e,r,o){Object.defineProperty(t,"__esModule",{value:!0});var a,i,s,l=_(n(4041)),u=_(n(4044)),c=_(n(2547)),f=_(n(26)),d=_(n(95)),p=_(n(25)),h=_(n(30)),m=n(4064),y=_(n(2548)),v=_(n(2549)),g=_(n(4073));function _(e){return e&&e.__esModule?e:{default:e}}var E=(0,m.themr)("Dropfile",g.default)((s=i=function(t){function n(){var e,t,r,o,a=this;(0,f.default)(this,n);for(var i=arguments.length,s=Array(i),d=0;d<i;d++)s[d]=arguments[d];return t=r=(0,p.default)(this,(e=n.__proto__||(0,c.default)(n)).call.apply(e,[this].concat(s))),r.state={error:void 0,isDragging:!1,isUploading:!1,preview:void 0,progress:0},r.handleClick=function(){r.state.isUploading||r.fileInput.click()},r.handleDragEnter=function(e){e.preventDefault(),r.state.isUploading||r.setState({isDragging:!0})},r.handleDragLeave=function(e){e.preventDefault(),r.state.isUploading||r.setState({isDragging:!1})},r.handleDragOver=function(e){e.preventDefault(),e.stopPropagation()},r.handleDrop=function(){var e=(0,u.default)(l.default.mark(function e(t){var n,o,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!r.state.isUploading){e.next=3;break}return e.abrupt("return");case 3:for(r.setState({isDragging:!1,error:void 0}),n=t.dataTransfer?t.dataTransfer.files:t.target.files,o=0;o<n.length;o++)(i=n[o]).preview=window.URL.createObjectURL(i);if(!r.props.verify){e.next=15;break}e.prev=7,n=r.props.verify(n)||n,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(7),r.setState({error:e.t0.toString()}),e.abrupt("return");case 15:return r.updateProgress({progress:0,isUploading:!0}),e.prev=16,e.next=19,r.props.uploadFiles(n,{updateProgress:r.updateProgress,setDoneCallback:r.setDoneCallback});case 19:r.doneProgress(),e.next=26;break;case 22:e.prev=22,e.t1=e.catch(16),r.updateProgress({progress:0,isUploading:!1}),r.setState({error:e.t1.toString()});case 26:case"end":return e.stop()}},e,a,[[7,11],[16,22]])}));return function(t){return e.apply(this,arguments)}}(),r.setDoneCallback=function(e){r._doneCallback=e},r.doneProgress=function(){r.updateProgress({progress:100,isUploading:!0}),setTimeout(function(){r.updateProgress({progress:0,isUploading:!1}),r._doneCallback&&r._doneCallback()},1e3)},r.updateProgress=function(e){var t=e.progress,n={isUploading:e.isUploading,progress:t,preview:e.preview};r.setState(n)},o=t,(0,p.default)(r,o)}return(0,h.default)(n,t),(0,d.default)(n,[{key:"render",value:function(){var t=this,n=this.state,o=n.isDragging,a=n.isUploading,i=n.progress,s=n.preview,l=n.error,u=this.props.theme;return e.createElement("div",{className:r.compact([u.dropfile,o&&u.dragging,a&&u.uploading]).join(" "),onClick:this.handleClick,onDragEnter:this.handleDragEnter,onDragLeave:this.handleDragLeave,onDragOver:this.handleDragOver,onDrop:this.handleDrop},a?e.createElement("div",{className:u.uploading},e.createElement("div",{className:u.preview},s&&e.createElement(v.default,{image:s,size:"100%"})),e.createElement("div",{className:u.progressbar},e.createElement(y.default,{progress:i}))):e.createElement("div",{className:u.placeholder},l&&e.createElement("div",{className:u.error},l),this.props.children,e.createElement("input",{type:"file",style:{display:"none"},multiple:!1,ref:function(e){return t.fileInput=e},onChange:this.handleDrop})))}}]),n}(e.Component),i.propTypes={children:e.PropTypes.node,verify:e.PropTypes.func,uploadFiles:e.PropTypes.func.isRequired},i.defaultProps={children:e.createElement("div",{style:{textAlign:"center"}},"Drag and drop file here or ",e.createElement("br",null),e.createElement("a",null," browse your computer "))},a=s))||a;t.default=o(E,g.default,{allowMultiple:!0})}).call(this,n(1),n(4),n(6))},4041:function(e,t,n){e.exports=n(4042)},4042:function(e,t,n){var r=function(){return this}()||Function("return this")(),o=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,a=o&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(4043),o)r.regeneratorRuntime=a;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},4043:function(e,t,n){(function(t){!function(n){"use strict";var r,o=Object.prototype,a=o.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag",c="object"==typeof e,f=n.regeneratorRuntime;if(f)c&&(e.exports=f);else{(f=n.regeneratorRuntime=c?e.exports:{}).wrap=b;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={},v={};v[s]=function(){return this};var g=Object.getPrototypeOf,_=g&&g(g(I([])));_&&_!==o&&a.call(_,s)&&(v=_);var E=S.prototype=O.prototype=Object.create(v);w.prototype=E.constructor=S,S.constructor=w,S[u]=w.displayName="GeneratorFunction",f.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},f.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(E),e},f.awrap=function(e){return{__await:e}},C(P.prototype),P.prototype[l]=function(){return this},f.AsyncIterator=P,f.async=function(e,t,n,r){var o=new P(b(e,t,n,r));return f.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},C(E),E[u]="Generator",E[s]=function(){return this},E.toString=function(){return"[object Generator]"},f.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},f.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,o){return s.type="throw",s.arg=e,t.next=n,o&&(t.method="next",t.arg=r),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;M(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),y}}}function b(e,t,n,r){var o=t&&t.prototype instanceof O?t:O,a=Object.create(o.prototype),i=new k(r||[]);return a._invoke=function(e,t,n){var r=d;return function(o,a){if(r===h)throw new Error("Generator is already running");if(r===m){if("throw"===o)throw a;return L()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=A(i,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var l=T(e,t,n);if("normal"===l.type){if(r=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=m,n.method="throw",n.arg=l.arg)}}}(e,n,i),a}function T(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function O(){}function w(){}function S(){}function C(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function P(e){var n;this._invoke=function(r,o){function i(){return new t(function(n,i){!function n(r,o,i,s){var l=T(e[r],e,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==typeof c&&a.call(c,"__await")?t.resolve(c.__await).then(function(e){n("next",e,i,s)},function(e){n("throw",e,i,s)}):t.resolve(c).then(function(e){u.value=e,i(u)},s)}s(l.arg)}(r,o,n,i)})}return n=n?n.then(i,i):i()}}function A(e,t){var n=e.iterator[t.method];if(n===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,A(e,t),"throw"===t.method))return y;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=T(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,y;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,y):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function I(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=r,t.done=!0,t};return o.next=o}}return{next:L}}function L(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())}).call(this,n(7))},4044:function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(4045));t.default=function(e){return function(){var t=e.apply(this,arguments);return new r.default(function(e,n){return function o(a,i){try{var s=t[a](i),l=s.value}catch(e){return void n(e)}if(!s.done)return r.default.resolve(l).then(function(e){o("next",e)},function(e){o("throw",e)});e(l)}("next")})}}},4045:function(e,t,n){e.exports={default:n(4046),__esModule:!0}},4046:function(e,t,n){n(712),n(708),n(711),n(4047),n(4059),n(4060),e.exports=n(99).Promise},4047:function(e,t,n){"use strict";var r,o,a,i,s=n(210),l=n(101),u=n(388),c=n(2542),f=n(146),d=n(148),p=n(666),h=n(4048),m=n(4049),y=n(2543),v=n(2544).set,g=n(4054)(),_=n(2369),E=n(2545),b=n(4055),T=n(2546),O=l.TypeError,w=l.process,S=w&&w.versions,C=S&&S.v8||"",P=l.Promise,A="process"==c(w),R=function(){},M=o=_.f,k=!!function(){try{var e=P.resolve(1),t=(e.constructor={})[n(145)("species")]=function(e){e(R,R)};return(A||"function"==typeof PromiseRejectionEvent)&&e.then(R)instanceof t&&0!==C.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(e){}}(),I=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},L=function(e,t){if(!e._n){e._n=!0;var n=e._c;g(function(){for(var r=e._v,o=1==e._s,a=0,i=function(t){var n,a,i,s=o?t.ok:t.fail,l=t.resolve,u=t.reject,c=t.domain;try{s?(o||(2==e._h&&x(e),e._h=1),!0===s?n=r:(c&&c.enter(),n=s(r),c&&(c.exit(),i=!0)),n===t.promise?u(O("Promise-chain cycle")):(a=I(n))?a.call(n,l,u):l(n)):u(r)}catch(e){c&&!i&&c.exit(),u(e)}};n.length>a;)i(n[a++]);e._c=[],e._n=!1,t&&!e._h&&N(e)})}},N=function(e){v.call(l,function(){var t,n,r,o=e._v,a=j(e);if(a&&(t=E(function(){A?w.emit("unhandledRejection",o,e):(n=l.onunhandledrejection)?n({promise:e,reason:o}):(r=l.console)&&r.error&&r.error("Unhandled promise rejection",o)}),e._h=A||j(e)?2:1),e._a=void 0,a&&t.e)throw t.v})},j=function(e){return 1!==e._h&&0===(e._a||e._c).length},x=function(e){v.call(l,function(){var t;A?w.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},D=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),L(t,!0))},F=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw O("Promise can't be resolved itself");(t=I(e))?g(function(){var r={_w:n,_d:!1};try{t.call(e,u(F,r,1),u(D,r,1))}catch(e){D.call(r,e)}}):(n._v=e,n._s=1,L(n,!1))}catch(e){D.call({_w:n,_d:!1},e)}}};k||(P=function(e){h(this,P,"Promise","_h"),p(e),r.call(this);try{e(u(F,this,1),u(D,this,1))}catch(e){D.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(4056)(P.prototype,{then:function(e,t){var n=M(y(this,P));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=A?w.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&L(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new r;this.promise=e,this.resolve=u(F,e,1),this.reject=u(D,e,1)},_.f=M=function(e){return e===P||e===i?new a(e):o(e)}),f(f.G+f.W+f.F*!k,{Promise:P}),n(284)(P,"Promise"),n(4057)("Promise"),i=n(99).Promise,f(f.S+f.F*!k,"Promise",{reject:function(e){var t=M(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!k),"Promise",{resolve:function(e){return T(s&&this===i?P:this,e)}}),f(f.S+f.F*!(k&&n(4058)(function(e){P.all(e).catch(R)})),"Promise",{all:function(e){var t=this,n=M(t),r=n.resolve,o=n.reject,a=E(function(){var n=[],a=0,i=1;m(e,!1,function(e){var s=a++,l=!1;n.push(void 0),i++,t.resolve(e).then(function(e){l||(l=!0,n[s]=e,--i||r(n))},o)}),--i||r(n)});return a.e&&o(a.v),n.promise},race:function(e){var t=this,n=M(t),r=n.reject,o=E(function(){m(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},4048:function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},4049:function(e,t,n){var r=n(388),o=n(4050),a=n(4051),i=n(175),s=n(707),l=n(4052),u={},c={};(t=e.exports=function(e,t,n,f,d){var p,h,m,y,v=d?function(){return e}:l(e),g=r(n,f,t?2:1),_=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(a(v)){for(p=s(e.length);p>_;_++)if((y=t?g(i(h=e[_])[0],h[1]):g(e[_]))===u||y===c)return y}else for(m=v.call(e);!(h=m.next()).done;)if((y=o(m,g,h.value,t))===u||y===c)return y}).BREAK=u,t.RETURN=c},4050:function(e,t,n){var r=n(175);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var a=e.return;throw void 0!==a&&r(a.call(e)),t}}},4051:function(e,t,n){var r=n(279),o=n(145)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[o]===e)}},4052:function(e,t,n){var r=n(2542),o=n(145)("iterator"),a=n(279);e.exports=n(99).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||a[r(e)]}},4053:function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},4054:function(e,t,n){var r=n(101),o=n(2544).set,a=r.MutationObserver||r.WebKitMutationObserver,i=r.process,s=r.Promise,l="process"==n(389)(i);e.exports=function(){var e,t,n,u=function(){var r,o;for(l&&(r=i.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(l)n=function(){i.nextTick(u)};else if(!a||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);n=function(){c.then(u)}}else n=function(){o.call(r,u)};else{var f=!0,d=document.createTextNode("");new a(u).observe(d,{characterData:!0}),n=function(){d.data=f=!f}}return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},4055:function(e,t,n){var r=n(101).navigator;e.exports=r&&r.userAgent||""},4056:function(e,t,n){var r=n(149);e.exports=function(e,t,n){for(var o in t)n&&e[o]?e[o]=t[o]:r(e,o,t[o]);return e}},4057:function(e,t,n){"use strict";var r=n(101),o=n(99),a=n(116),i=n(117),s=n(145)("species");e.exports=function(e){var t="function"==typeof o[e]?o[e]:r[e];i&&t&&!t[s]&&a.f(t,s,{configurable:!0,get:function(){return this}})}},4058:function(e,t,n){var r=n(145)("iterator"),o=!1;try{var a=[7][r]();a.return=function(){o=!0},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var a=[7],i=a[r]();i.next=function(){return{done:n=!0}},a[r]=function(){return i},e(a)}catch(e){}return n}},4059:function(e,t,n){"use strict";var r=n(146),o=n(99),a=n(101),i=n(2543),s=n(2546);r(r.P+r.R,"Promise",{finally:function(e){var t=i(this,o.Promise||a.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},4060:function(e,t,n){"use strict";var r=n(146),o=n(2369),a=n(2545);r(r.S,"Promise",{try:function(e){var t=o.f(this),n=a(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},4061:function(e,t,n){n(4062),e.exports=n(99).Object.getPrototypeOf},4062:function(e,t,n){var r=n(409),o=n(710);n(4063)("getPrototypeOf",function(){return function(e){return o(r(e))}})},4063:function(e,t,n){var r=n(146),o=n(99),a=n(177);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],i={};i[e]=t(n),r(r.S+r.F*a(function(){n(1)}),"Object",i)}},4064:function(e,t,n){"use strict";t.__esModule=!0;var r=n(4065);Object.defineProperty(t,"ThemeProvider",{enumerable:!0,get:function(){return a(r).default}});var o=n(4067);function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"themr",{enumerable:!0,get:function(){return a(o).default}}),Object.defineProperty(t,"themeable",{enumerable:!0,get:function(){return o.themeable}})},4065:function(e,t,n){"use strict";var r,o;t.__esModule=!0,t.default=void 0;var a=n(1),i=l(n(0)),s=l(n(4066));function l(e){return e&&e.__esModule?e:{default:e}}var u=(o=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{themr:{theme:this.props.theme}}},t.prototype.render=function(){return a.Children.only(this.props.children)},t}(a.Component),r.propTypes={children:i.default.element.isRequired,theme:i.default.object.isRequired},r.defaultProps={theme:{}},r.childContextTypes={themr:s.default.isRequired},o);t.default=u},4066:function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(0));t.default=r.default.shape({theme:r.default.object.isRequired})},4067:function(e,t,n){"use strict";t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.themeable=y;var a=n(1),i=c(a),s=c(n(0)),l=c(n(4068)),u=c(n(22));function c(e){return e&&e.__esModule?e:{default:e}}var f="deeply",d="softly",p=!1,h={composeTheme:f,mapThemrProps:function(e,t){e.composeTheme;var n=e.innerRef,r=(e.themeNamespace,e.mapThemrProps,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["composeTheme","innerRef","themeNamespace","mapThemrProps"]));return o({},r,{ref:n,theme:t})}},m="undefined"!=typeof Symbol?Symbol("THEMR_CONFIG"):"__REACT_CSS_THEMR_CONFIG__";function y(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var o=Object.keys(t).reduce(function(e,n){var r=t[n];return"function"!=typeof r&&(e[n]=r),e},{});Object.keys(n).forEach(function(t){var a=o[t],i=n[t];switch(void 0===i?"undefined":r(i)){case"object":switch(void 0===a?"undefined":r(a)){case"object":o[t]=e(a,i);break;case"undefined":o[t]=i;break;default:throw new Error("You are merging object "+t+" with a non-object "+a)}break;case"undefined":case"function":break;default:switch(void 0===a?"undefined":r(a)){case"object":throw new Error("You are merging non-object "+i+" with an object "+t);case"undefined":o[t]=i;break;case"function":break;default:o[t]=a.split(" ").concat(i.split(" ")).filter(function(e,t,n){return n.indexOf(e)===t&&""!==e}).join(" ")}}});return o}(e,t)},{})}t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var c,v,g=o({},h,n),_=g.composeTheme,E=g.mapThemrProps;!function(e){if(-1===[f,d,p].indexOf(e))throw new Error("Invalid composeTheme option for react-css-themr. Valid composition options are "+f+", "+d+" and "+p+". The given option was "+e)}(_);var b=r[m];if(b&&b.componentName===e)return b.localTheme=y(b.localTheme,t),r;b={componentName:e,localTheme:t};var T=(v=c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call.apply(e,[this].concat(r)));return a.theme_=a.calcTheme(a.props),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getWrappedInstance=function(){return(0,u.default)(!0,"DEPRECATED: To access the wrapped instance, you have to pass { innerRef: fn } and retrieve with a callback ref style."),this.refs.wrappedInstance},t.prototype.getNamespacedTheme=function(e){var t=e.themeNamespace,n=e.theme;if(!t)return n;if(t&&!n)throw new Error("Invalid themeNamespace use in react-css-themr. themeNamespace prop should be used only with theme prop.");return Object.keys(n).filter(function(e){return e.startsWith(t)}).reduce(function(e,r){var a;return o({},e,((a={})[function(e,t){var n=e.substr(t.length);return n.slice(0,1).toLowerCase()+n.slice(1)}(r,t)]=n[r],a))},{})},t.prototype.getThemeNotComposed=function(e){return e.theme?this.getNamespacedTheme(e):b.localTheme?b.localTheme:this.getContextTheme()},t.prototype.getContextTheme=function(){return this.context.themr?this.context.themr.theme[b.componentName]:{}},t.prototype.getTheme=function(e){return e.composeTheme===d?o({},this.getContextTheme(),b.localTheme,this.getNamespacedTheme(e)):y(y(this.getContextTheme(),b.localTheme),this.getNamespacedTheme(e))},t.prototype.calcTheme=function(e){return e.composeTheme?this.getTheme(e):this.getThemeNotComposed(e)},t.prototype.componentWillReceiveProps=function(e){e.composeTheme===this.props.composeTheme&&e.theme===this.props.theme&&e.themeNamespace===this.props.themeNamespace||(this.theme_=this.calcTheme(e))},t.prototype.render=function(){return i.default.createElement(r,this.props.mapThemrProps(this.props,this.theme_))},t}(a.Component),c.displayName="Themed"+r.name,c.contextTypes={themr:s.default.object},c.propTypes=o({},r.propTypes,{composeTheme:s.default.oneOf([f,d,p]),innerRef:s.default.func,theme:s.default.object,themeNamespace:s.default.string,mapThemrProps:s.default.func}),c.defaultProps=o({},r.defaultProps,{composeTheme:_,mapThemrProps:E}),v);return T[m]=b,(0,l.default)(T,r)}}},4068:function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},a="function"==typeof Object.getOwnPropertySymbols;e.exports=function(e,t,n){if("string"!=typeof t){var i=Object.getOwnPropertyNames(t);a&&(i=i.concat(Object.getOwnPropertySymbols(t)));for(var s=0;s<i.length;++s)if(!(r[i[s]]||o[i[s]]||n&&n[i[s]]))try{e[i[s]]=t[i[s]]}catch(e){}}return e}},4069:function(e,t,n){e.exports={progressbar:"progressbar--progressbar--5ncsS",bar:"progressbar--bar--1JKK2",filled:"progressbar--filled--2zadW",text:"progressbar--text--4bHBT"}},4071:function(e,t,n){e.exports={image:"image--image--3HFK9",highlight:"image--highlight--27WPX"}},4073:function(e,t,n){e.exports={dropfile:"dropfile--dropfile--3juQJ",placeholder:"dropfile--placeholder--1K7dC",dragging:"dropfile--dragging--2KQ_M",uploading:"dropfile--uploading--3_olU",header:"dropfile--header--1v4u7",preview:"dropfile--preview--eV7NW",progressbar:"dropfile--progressbar--1BWg_",text:"dropfile--text--3Re6a",error:"dropfile--error--nuf9-"}},4075:function(e,t,n){e.exports={"std-font-9":"dropfileStyles--std-font-9--2hCPP","project-font":"dropfileStyles--project-font--EySma","std-font-12":"dropfileStyles--std-font-12--iw7we","room-title-font":"dropfileStyles--room-title-font--1uZZB","user-font":"dropfileStyles--user-font--LWU8l",error:"dropfileStyles--error--11zba","std-font-14":"dropfileStyles--std-font-14--qB-B2","std-font-16":"dropfileStyles--std-font-16--3K0WP","std-font-18":"dropfileStyles--std-font-18--2IDGd","chatroom-title-font":"dropfileStyles--chatroom-title-font--27ZO-","screen-content":"dropfileStyles--screen-content--1j1a5",circle:"dropfileStyles--circle--1OpK9","gray-light":"dropfileStyles--gray-light--2ObcO",turquoise:"dropfileStyles--turquoise--2bnOb","avatar-circle":"dropfileStyles--avatar-circle--2zuO7","avatar-circle-default":"dropfileStyles--avatar-circle-default--oMg8V","role-mentor":"dropfileStyles--role-mentor--2jm6w","role-staff":"dropfileStyles--role-staff--303bZ","avatar-img":"dropfileStyles--avatar-img--rWqZb","avatar-default":"dropfileStyles--avatar-default--13hrv",clearfix:"dropfileStyles--clearfix--263il","rel-pos":"dropfileStyles--rel-pos--324fz",invisible:"dropfileStyles--invisible--1VlBX",photo:"dropfileStyles--photo--y2Cyo","no-photo":"dropfileStyles--no-photo--2g3Ih","no-margin":"dropfileStyles--no-margin--218V0",dropfile:"dropfileStyles--dropfile--1AuZY",placeholder:"dropfileStyles--placeholder--gevLc"}},4077:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=u(n(2263)),a=u(n(1)),i=u(n(4078)),s=n(2187),l=u(n(2231));function u(e){return e&&e.__esModule?e:{default:e}}var c,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var d=e(l.default)(c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),f(t,[{key:"render",value:function(){return a.default.createElement("div",{styleName:"thread-list-screen"},a.default.createElement(o.default,{title:(0,s.__)("All Threads"),isBackButtonVisible:!0}),a.default.createElement(i.default,null))}}]),t}())||c;t.default=d}).call(this,n(6))},4078:function(e,t,n){"use strict";(function(e,r,o,a){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(15),l=n(2197),u=n(2198),c=n(2188),f=_(n(2367)),d=n(2187),p=_(n(28)),h=n(27),m=n(2365),y=n(2534),v=n(2535),g=_(n(4079));function _(e){return e&&e.__esModule?e:{default:e}}var E,b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var T=e(g.default,{allowMultiple:!0})(E=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleThreadOrMsgClick=function(e,t,r,o){(0,n.props.pushScreen)({screenType:o,roomId:e,roomTitle:t,messageId:r})},n.state={loading:!0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),b(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.lobby,r=t.loadProfiles,i=o.map(o.get(n,"threads",[]),"room_payload"),s=o.chain(i).groupBy("room_id").mapValues(m.extractMessageParticipants).mapValues(function(e,t){return o.map(e,function(e){return{user:e,room:t}})}).flatMap().uniqBy("user").groupBy("room").mapValues(function(e){return o.map(e,"user")}).value();a.all(o.map(s,function(e,t){return r.apply(void 0,[t].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e)))})).then(function(){e.setState({loading:!1})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.lobby,a=t.profiles,i=t.notifications,h=o.get(this.state,"loading",!0),m=o.get(n,"threads",[]),y=o.chain(n.rooms).map(function(e){return[e.room_id,e.room_title]}).fromPairs().value();return h?r.createElement(s.LoadingWrapper,{isLoading:!0}):r.createElement("ul",{styleName:"thread-list"},m.map(function(t){var n=o.get(t,"room_id"),h=o.get(i.unread,[n,"count"],0)>0,m=t.room_payload,v="message-"+m.user_id+"-"+m.message_id,g=o.get(m,"thread.message_count",0),_=y[m.room_id],E=o.get(m,"thread.participants",[]),b=(0,l.isMessageFromMentor)(m,o.get(a,m.user_id)),T=(0,l.isMessageFromStaff)(m,o.get(a,m.user_id)),O=o.get(i.unreadMentions,n,[]).length,w={"role-mentor":b,"role-staff":T};return r.createElement("li",{key:v,styleName:(0,p.default)("thread-item-container",w)},r.createElement("div",{styleName:"thread-item-meta-container"},r.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),e.handleThreadOrMsgClick(m.room_id,_,m.message_id,c.Screens.CHAT)}},r.createElement("span",{styleName:"thread-item-meta-room"},_))),r.createElement(f.default,{message:m,timeFormat:"long",showActions:!1,threadingEnabled:!1,sameAsPrev:!1,isMsgFromCurrentUser:!1,avatarClickable:!1,profiles:a}),r.createElement("div",{styleName:"thread-item-action-container"},h&&r.createElement("span",{styleName:O>0?"thread-unread-badge-mention":"thread-unread-badge","data-mention-count":(0,u.displayMentionCount)(O)}),r.createElement(s.Tooltip,{placement:"right",overlay:r.createElement("div",null,r.createElement("h6",{style:{fontWeight:600}},(0,d.__)("Participants")),r.createElement("div",null,r.createElement("span",null,(0,u.makeUserListRight)(E,a))))},r.createElement("a",{href:"#",styleName:"thread-item-action-link",onClick:function(t){t.preventDefault(),e.handleThreadOrMsgClick(m.room_id,_,m.message_id,c.Screens.THREAD)}},(0,u.makeThreadRepliesMessage)(g)))))}))}}]),t}())||E;t.default=(0,h.connect)(function(e){return{lobby:e.lobby,unread:e.notifications.unread,profiles:e.profiles,notifications:e.notifications}},{loadProfiles:y.loadProfiles,pushScreen:v.pushScreen})(T)}).call(this,n(6),n(1),n(4),n(7))},4079:function(e,t,n){e.exports={"std-font-9":"styles--std-font-9--3WpmS","project-font":"styles--project-font--19Oq_","std-font-12":"styles--std-font-12--2zO0Y","room-title-font":"styles--room-title-font--2cuKT","user-font":"styles--user-font--REgsh","thread-item-action-link":"styles--thread-item-action-link--MMDra","std-font-14":"styles--std-font-14--1mv1-","std-font-16":"styles--std-font-16--3lq0B","std-font-18":"styles--std-font-18--3sMKS","chatroom-title-font":"styles--chatroom-title-font--19M08","thread-item-meta-room":"styles--thread-item-meta-room--28Qj-","screen-content":"styles--screen-content--14Hzc",circle:"styles--circle--2UTBT","gray-light":"styles--gray-light--2-V0-",turquoise:"styles--turquoise--1Ttdd","avatar-circle":"styles--avatar-circle--1UeFj","avatar-circle-default":"styles--avatar-circle-default--1mjAf","role-mentor":"styles--role-mentor--2TOA0","role-staff":"styles--role-staff--29laH","avatar-img":"styles--avatar-img--GXzCS","avatar-default":"styles--avatar-default--H-GXi",clearfix:"styles--clearfix--2w_T5","rel-pos":"styles--rel-pos--2qHui",invisible:"styles--invisible--2l3lL",photo:"styles--photo--1ldvX","no-photo":"styles--no-photo--3m1_Y","no-margin":"styles--no-margin--f3Lw-","thread-list":"styles--thread-list--1pem1","thread-item-container":"styles--thread-item-container--NGk04","thread-item-meta-container":"styles--thread-item-meta-container--3and6","thread-item-action-container":"styles--thread-item-action-container--UeiqD","thread-unread-badge":"styles--thread-unread-badge--ax_3D","thread-unread-badge-mention":"styles--thread-unread-badge-mention--2rthc"}},4081:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=c(n(2263)),i=c(n(0)),s=c(n(2539)),l=n(2187),u=c(n(2231));function c(e){return e&&e.__esModule?e:{default:e}}var f,d,p,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var m=e(u.default,{allowMultiple:!0})((p=d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),h(t,[{key:"render",value:function(){var e=this.props,t=e.roomId,n=e.roomTitle,o=e.messageId;return r.createElement("div",{styleName:"thread-screen"},r.createElement(a.default,{title:(0,l.__)("Thread: <%= roomTitle %>",{roomTitle:n}),isBackButtonVisible:!0}),r.createElement(s.default,{roomId:t,roomTitle:n,messageId:o}))}}]),t}(),d.propTypes={roomId:i.default.string.isRequired,roomTitle:i.default.string.isRequired,messageId:i.default.number.isRequired},f=p))||f;t.default=m}).call(this,n(6),n(1))},4082:function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}}(n(4083));e.exports=r.default},4083:function(e,t,n){"use strict";(function(e,r,o){var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,s,l,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=d(n(671)),f=d(n(4084));function d(e){return e&&e.__esModule?e:{default:e}}var p=e(f.default)((l=s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),u(t,[{key:"componentDidMount",value:function(){this._autoRemoveToasts(this.props.toasts)}},{key:"componentWillReceiveProps",value:function(e){var t=o.differenceBy(e.toasts,this.props.toasts,"id");this._autoRemoveToasts(t)}},{key:"_autoRemoveToasts",value:function(e){var t=this;o.isEmpty(e)||setTimeout(function(){o.each(e,function(e){t.props.onRemove(e)})},8e3)}},{key:"_getTransitionNames",value:function(){return{enter:f.default["toast-enter"],enterActive:f.default["toast-enter-active"],leave:f.default["toast-leave"],leaveActive:f.default["toast-leave-active"]}}},{key:"render",value:function(){var e=this,t=this.props.toasts;return r.createElement("div",{styleName:"container",className:this.props.className},r.createElement(c.default,{transitionName:this._getTransitionNames(),transitionEnterTimeout:300,transitionLeaveTimeout:300},o.map(t,function(t){return r.createElement("div",{key:t.id,styleName:t.type},r.createElement("div",{styleName:"message"},t.message),r.createElement("div",{styleName:"dismiss",onClick:function(){return e.props.onRemove(t)}}))})))}}]),t}(),s.propTypes={onRemove:r.PropTypes.func.isRequired,toasts:r.PropTypes.arrayOf(r.PropTypes.shape({id:r.PropTypes.string.isRequired,type:r.PropTypes.oneOf(["error","notification"]).isRequired,message:r.PropTypes.string.isRequired})),className:r.PropTypes.string},s.defaultProps={className:null},i=l))||i;t.default=p}).call(this,n(6),n(1),n(4))},4084:function(e,t,n){e.exports={container:"toast--container--2TRXN",toast:"toast--toast--3-Dkf",notification:"toast--notification--1R46Z toast--toast--3-Dkf",error:"toast--error--J0r-o toast--toast--3-Dkf",message:"toast--message--1R0h7",dismiss:"toast--dismiss--1Q7eI","toast-enter":"toast--toast-enter--2PNut","toast-enter-active":"toast--toast-enter-active--1_EbD",fadeInUp:"toast--fadeInUp--1iwaX","toast-leave":"toast--toast-leave--2jsl5","toast-leave-active":"toast--toast-leave-active--6RXD4",fadeOutDown:"toast--fadeOutDown--3C2zc"}},4086:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),o=i(n(4087)),a=i(n(4090));function i(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.compose)(r.applyMiddleware.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(o.default)),window.devToolsExtension?window.devToolsExtension():function(e){return e})(r.createStore);t.default=s(a.default)},4087:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4088),o=n(4089),a=function(e){return e&&e.__esModule?e:{default:e}}(n(721));t.default=[a.default,o.profilesResolver,r.linksResolver]},4088:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.linksResolver=void 0;var r=i(n(2206)),o=i(n(22)),a=i(n(400));function i(e){return e&&e.__esModule?e:{default:e}}t.linksResolver=function(t){return function(t){return function(n){if(!n.meta||!n.meta.link)return t(n);var i=n.meta.link,s=i.messageID,l=i.content;return e.isEmpty(l)?t(n):r.default.loadURLLinksInfo(s,l).then(function(e){return t((0,a.default)(n,{meta:{linkResolved:{$set:e}}}))}).catch(function(e){console.log(e),(0,o.default)(!1,"unable to resolve links, skipping")})}}}}).call(this,n(4))},4089:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.profilesResolver=void 0;var r=s(n(2190)),o=s(n(2206)),a=n(2191),i=s(n(22));function s(e){return e&&e.__esModule?e:{default:e}}t.profilesResolver=function(t){return function(n){return function(s){if(!s.meta||!s.meta.actors)return n(s);var l=t.getState().profiles,u=e.get(s.meta,"parentRoomId",s.meta.roomId),c=e.filter(s.meta.actors,function(t){return!e.has(l,t)});return 0===c.length?(s.meta.resolved=e.map(s.meta.actors,function(t){return e.get(l,t)}),n(s)):o.default.viewProfiles(u,c).then(function(o){t.dispatch((0,a.createAction)(r.default.RESOLVED_PROFILES,o));var i=t.getState();return s.meta.resolved=e.map(s.meta.actors,function(t){return e.get(i.profiles,t)}),n(s)}).catch(function(e){console.log(e),(0,i.default)(!1,"unable to resolve profiles, skipping")})}}}}).call(this,n(4))},4090:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),o=n(4091),a=n(4092),i=n(4093),s=n(4094),l=n(4096),u=n(4097),c=n(4098),f=n(4099),d=n(4100),p=(0,r.combineReducers)({lobby:o.lobby,screen:l.screen,rooms:s.rooms,profiles:i.profiles,toasts:c.toasts,window:d.window,userData:f.userData,socket:u.socket,notifications:a.notifications});t.default=p},4091:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lobby=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case r.default.CLEAR_ALL:return{};case r.default.FETCH_CHAT_ROOMS:return{loading:!0};case r.default.FETCH_CHAT_ROOMS_COMPLETE:return t.error?{error:t.payload}:o({},t.payload,{loading:!1});default:return e}};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2190));var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},4092:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.notifications=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];switch(n.type){case o.default.CLEAR_ALL:return{};case o.default.PUSH_SCREEN:var i=n.payload,u=i.screenType,c=i.roomId;return u===r.Screens.CHAT||u===r.Screens.THREAD&&c?s({},t,{active_room:c}):e.omit(t,["active_room","has_notification_other"]);case o.default.POP_SCREEN:var f=n.payload;if(f){if(f.screenType===r.Screens.HOME)return e.omit(t,["active_room","has_notification_other"]);if(f.screenType===r.Screens.THREADLIST)return e.omit(t,"active_room")}return t;case o.default.FETCH_CHAT_ROOMS_COMPLETE:var d=n.payload,p=d.notifications,h=d.unread_mentions,m=e.get(t,"active_window",!1),y=!1;return e.isEmpty(p)||(y=!m),s({},t,{has_notification:y,unread:p,unreadMentions:h});case o.default.UPDATE_LAST_VISITED_COMPLETE:var v=n.payload,g=v.roomId,_=v.lastVisited,E=v.numNextMessages,b=e.get(t,"unread",{}),T=s({},e.get(b,g,{}));return T.oldest&&(T=e.omit(T,"oldest")),T.last_visited=_,T.count-=E,s({},t,{unread:s({},b,l({},g,T))});case o.default.UPDATE_WINDOW:var O=n.payload.opened,w=s({},t,{active_window:O});return O&&e.get(t,"has_notification",!1)&&(w.has_notification=!1),O&&t.active_room&&(w.unread=e.omit(e.get(t,"unread",{}),t.active_room)),w;case o.default.SOCKET_EVENT:if(n.error)return t;var S=n.meta,C=S.roomId,P=S.userId,A=n.payload,R=e.get(t,"active_window",!1);if((0,a.default)(P,"missing session userId in action"),(0,a.default)(C,"missing roomId in action"),(0,a.default)(A.room_id===C,"unexpected room.  Got "+A.room_id+", expected "+C),A.type!==r.EventTypes.MESSAGE&&A.type!==r.EventTypes.REPLY)return t;if((0,a.default)(e.has(A,"payload.user_id"),"missing user_id in payload"),A.payload.user_id===P)return t;var M=e.get(t,"unread",{}),k=void 0,I=void 0;if(A.type===r.EventTypes.MESSAGE)I=C,k=s({},e.get(M,C,{}));else if(A.type===r.EventTypes.REPLY){var L=e.get(A,["payload","thread_room_id"]);I=L,k=s({},e.get(M,L,{}))}e.isEmpty(k)?(k.oldest=A.payload.message_id,k.count=0,k.last_visited=A.timestamp):k.oldest||(k.oldest=A.payload.message_id),k.count+=1;var N=!R,j=!R&&t.active_room&&t.active_room!==C,x=e.get(A,"payload.mentions",[]),D=e.includes(x,P.toString())?s({},e.get(t,"unreadMentions",{}),l({},I,[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.get(t,["unreadMentions",I])||[]),[{room_id:I,message_id:A.payload.message_id,created_at:A.payload.created_at}]))):t.unreadMentions;return s({},t,{has_notification:N,has_notification_other:j,unread:s({},M,l({},I,k)),unreadMentions:D});default:return t}};var r=n(2188),o=i(n(2190)),a=i(n(22));function i(e){return e&&e.__esModule?e:{default:e}}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}}).call(this,n(4))},4093:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.profiles=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];switch(n.type){case r.default.CLEAR_ALL:return{};case r.default.FETCH_PROFILE:return o(t,{loading:!0});case r.default.FETCH_PROFILE_COMPLETE:case r.default.CREATE_PROFILE_COMPLETE:case r.default.UPDATE_PROFILE_COMPLETE:if(n.error){var a={error:n.payload};return o(t,a)}var i=n.payload;return o(t,i);case r.default.RESOLVED_PROFILES:var s=n.payload;return function(t,n){return Object.assign({},t,e.reduce(n,function(e,t){return t.id?(e[t.id]=t,e):e},{}))}(t,s);default:return t}};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2190));function o(e,t){var n=Object.assign({},e);return n.me=t,t.id&&(n[t.id]=t),n}}).call(this,n(4))},4094:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.rooms=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];switch(n.type){case o.default.CLEAR_ALL:return{};case o.default.CLEAR_EVENT_LIST:var l=n.payload,h=u({},e.get(t,l));return h.events=[],u({},t,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},l,h));case o.default.FETCH_ROOM:var m=n.payload,y=d(t,m);return y.loading=!0,y.loaded=!1,p(t,m,y);case o.default.FETCH_ROOM_COMPLETE:if(n.error){var v=n.meta.roomId,g=d(t,v);return g.error=n.payload,p(t,v,g)}var _=n.meta.roomId,E=n.payload,b=E.info,T=E.messages,O=d(t,_);return O.loading=!1,O.loaded=!0,O.pagination={fetching_prev:!1,fetching_next:!1,cursor:T.cursor},O.info=u({},b,{num_active:e.get(b,"num_active",0)+1}),O.events=e.map(T?T.messages:[],f(_)),p(t,_,O);case o.default.FETCH_PARTICIPANTS:var w=n.meta.roomId,S=d(t,w);return S.participants={loading:!0},p(t,w,S);case o.default.FETCH_PARTICIPANTS_COMPLETE:var C=n.meta.roomId,P=d(t,C);if(n.error)return P.participants={loading:!1,error:!0},p(t,C,P);var A=n.payload;return P.participants={loading:!1,loaded:!0,active:A.active||[],inactive:A.inactive||[],admins:A.admins||[]},p(t,C,P);case o.default.CLEAR_PARTICIPANTS:var R=n.payload,M=d(t,R);return M.participants={},p(t,R,M);case o.default.LEAVE_ROOM:var k=n.payload,I=d(t,k);return e.has(I,["ui","pending","delay"])&&I.ui.pending.delay.cancel(),p(t,k,{});case o.default.FETCH_MORE_MESSAGES:var L=n.meta,N=L.roomId,j=L.prev,x=d(t,N);return x.pagination=u({},x.pagination,{fetching_prev:j,fetching_next:!j}),p(t,N,x);case o.default.FETCH_MORE_MESSAGES_COMPLETE:var D=n.meta.roomId;if(n.error){var F=d(t,D);return F.pagination=u({},F.pagination,{fetching_prev:!1,fetching_next:!1,error:n.payload}),p(t,D,F)}var U=n.payload,q=U.cursor,B=U.messages,H=B.map(f(D)),W=d(t,D),G=void 0,K=e.get(W,["pagination","fetching_prev"]);return K?(W.events=e.concat(H,W.events),G=u({},W.pagination.cursor,{prev:q.prev,has_prev:q.has_prev})):(H=e.drop(H,1),W.events=e.concat(W.events,H),G=u({},W.pagination.cursor,{next:q.next,has_next:q.has_next})),W.pagination={fetching_prev:!1,fetching_next:!1,cursor:G},p(t,D,W);case o.default.UPDATE_MESSAGES:var z=n.payload,V=z.message,Y=z.timestamp,J=z.messageId,X=z.roomId,Q=z.userId,Z=d(t,X),$=Array.from(Z.events||[]),ee={type:r.EventTypes.MESSAGE,version:"v1.2.0",timestamp:Y.toISOString(),room_id:X,payload:{user_id:Q,message_id:J,message_id_str:J.toString(),content:V,created_at:Y.toISOString(),updated_at:""}};return $.push(ee),Z.events=$,Z.sent=e.concat(Z.sent||[],V),p(t,X,Z);case o.default.UPDATE_MESSAGES_COMPLETE:case o.default.UPDATE_MESSAGES_FAILURE:var te=n.payload,ne=te.messageId,re=te.userId,oe=te.roomId,ae=te.result,ie=d(t,oe),se=Array.from(ie.events||[]),le=e.findIndex(se,function(e){return e.type===r.EventTypes.MESSAGE&&e.payload.message_id===ne&&e.payload.user_id===re});if((0,i.default)(le>=0,"couldn't find event that needs replacing"),n.type===o.default.UPDATE_MESSAGES_COMPLETE){var ue=Object.assign({},se[le],{payload:ae});se[le]=ue}else{var ce=Object.assign({},se[le]);ce.delivery_error=!0,se[le]=ce;var fe=Array.from(e.get(ie,"sent",[])),de=e.indexOf(fe,ce.payload.content);le>=0&&fe.splice(de,1),ie.sent=fe}return ie.events=se,p(t,oe,ie);case o.default.SOCKET_EVENT:if(n.error)return t;var pe=n.payload,he=n.meta,me=he.roomId,ye=he.userId;if((0,i.default)(me,"no room ID specified"),(0,i.default)(pe.room_id===me,"unexpected room.  Got "+pe.room_id+", expected "+me),pe.type===r.EventTypes.REPLY)return pe.payload.links=e.get(n,["meta","linkResolved","links"],[]),(0,a.handleReplyEvent)(t,ye,pe);var ve=d(t,me);if(!e.get(ve,"loaded",!1))return t;var ge=Array.from(ve.events||[]);switch(pe.type){case r.EventTypes.QUIT:var _e=pe.payload.user_id,Ee=e.find(e.get(n,"meta.resolved",[]),function(e){return e.id===_e});if(ve.info=u({},ve.info,{num_active:Math.max(0,ve.info.num_active-1)}),ve.participants=(0,s.updateParticipants)(ve.participants,Ee,ye,!1),ge.length>0&&ge[ge.length-1].type===r.EventTypes.JOINED){var be=ge[ge.length-1];be.payload.users=e.without(be.payload.users||[be.payload.user_id],_e),0===be.payload.users.length&&ge.splice(ge.length-1,1)}break;case r.EventTypes.JOINED:var Te=pe.payload.user_id,Oe=e.find(e.get(n,"meta.resolved",[]),function(e){return e.id===Te});if(ye===Te)break;if(ve.info=u({},ve.info,{num_active:ve.info.num_active+1}),ve.participants=(0,s.updateParticipants)(ve.participants,Oe,ye,!0),ge.length>0&&ge[ge.length-1].type===r.EventTypes.JOINED){var we=ge[ge.length-1];we.payload.users=e.union(we.payload.users||[we.payload.user_id],[Te])}else ge.push(pe);break;case r.EventTypes.MESSAGE:var Se=e.get(ve,"sent",[]),Ce=pe.payload.content,Pe=e.findIndex(Se,{message:Ce});if(pe.payload.user_id===ye&&Pe>=0){ve.sent=e.concat(e.slice(Se,0,Pe),e.slice(Se,Pe+1));break}if(n.meta.linkResolved){var Ae=n.meta.linkResolved.links,Re=e.get(pe,["payload","links"],[]);pe.payload.links=[].concat(c(Re),c(Ae))}ge.push(pe);break;default:return t}return ve.events=ge,p(t,me,ve);case o.default.JUMP_TO:case o.default.JUMP_TO_COMPLETED:var Me=n.meta.roomId;(0,i.default)(Me,"expected roomId in meta");var ke=d(t,Me);return ke.ui=u({},ke.ui,{scrollTo:u({},n.payload)}),p(t,Me,ke);default:return t}};var r=n(2188),o=l(n(2190)),a=n(4095),i=l(n(22)),s=n(2197);function l(e){return e&&e.__esModule?e:{default:e}}var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var f=function(e){return function(t){return{type:"message",version:"v1.1.0",timestamp:t.created_at,room_id:e,payload:t}}};function d(e,t){return t in e?u({},e[t]):{}}function p(e,t,n){if(!t||!n)return e;var r=u({},e);return r[t]=n,r}}).call(this,n(4))},4095:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.handleReplyEvent=t.updateThreadFromReply=void 0;var r=n(2188),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var s=function(t,n,r){var s=e.get(r,"payload.thread_message_id",0),l=e.get(r,"payload.thread_room_id"),u=e.get(r,"payload.user_id");if(!s||!l||!u)return t;var c=e.get(r,"room_id"),f=e.get(t,c);if(!e.get(f,"loaded",!1))return t;var d=f.events||[],p=e.findIndex(d,function(t){return s===e.get(t,"payload.message_id")});if(p<0)return t;var h=o({},d[p]),m=e.has(h,"payload.thread")?h.payload.thread:{thread_id:l,message_count:0,participants:[]};h.payload=o({},h.payload,{has_replies:!0,thread:o({},m,{participants:e.chain(m.participants).without(u).concat(u).value(),last_message_at:r.timestamp,message_count:m.message_count+1})});var y=[].concat(i(e.slice(d,0,p)),[h],i(e.slice(d,p+1)));return o({},t,a({},c,o({},f,{events:y})))},l=t.updateThreadFromReply=function(t,n,s){var l=e.get(s,"payload.user_id"),u=e.get(s,"payload.thread_room_id"),c=e.get(t,u),f=e.get(c,"sent",[]);if(!e.get(c,"loaded",!1))return t;var d=o({},s,{type:r.EventTypes.MESSAGE,room_id:u,payload:o({},s.payload,{room_id:u,parent_message_id:s.payload.thread_message_id,parent_room_id:s.room_id})}),p=e.get(s,"payload.content");if(e.some(f,{message:p})&&n===l){var h=e.findIndex(c.sent,{message:p}),m=e.concat(e.slice(c.sent,0,h),e.slice(c.sent,h+1));return o({},t,a({},u,o({},c,{sent:m})))}var y=[].concat(i(c.events),[d]);return o({},t,a({},u,o({},c,{events:y})))};t.handleReplyEvent=function(t,n,r){return e.reduce([s,l],function(e,t){return t(e,n,r)},t)}}).call(this,n(4))},4096:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.screen=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1];switch(n.type){case r.default.CLEAR_ALL:return[];case r.default.UPDATE_SCREEN:return[i({},n.payload)];case r.default.PUSH_SCREEN:return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t),[i({},n.payload)]);case r.default.POP_SCREEN:return(0,o.default)(e.size(t)>0,"tried to pop a non-existant screen"),e.dropRight(t,1);default:return t}};var r=a(n(2190)),o=a(n(22));function a(e){return e&&e.__esModule?e:{default:e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}}).call(this,n(4))},4097:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.socket=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];switch(n.type){case r.default.CLEAR_ALL:return e.has(t,"listener")&&t.listener.close(),{};case r.default.SOCKET_OPEN:var a=n.payload,i=a.listener,s=a.rooms;return{listener:i,rooms:s,connected:!0};case r.default.SOCKET_CLOSE:return e.has(t,"listener")&&t.listener.close(),{};case r.default.SOCKET_CONNECTED:return o({},t,{connected:!0});case r.default.SOCKET_DISCONNECTED:return o({},t,{connected:!1});default:return t}};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2190));var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}}).call(this,n(4))},4098:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.toasts=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1];switch(n.type){case r.default.CLEAR_ALL:return[];case r.default.CREATE_TOAST:return e.concat(t,n.payload);case r.default.REMOVE_TOAST:return e.reject(t,function(e){return e.id===n.payload.id});default:return t}};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2190))}).call(this,n(4))},4099:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case r.default.CLEAR_ALL:return{};case r.default.SET_USER_DATA:return Object.assign({},e,o({},t.payload));default:return e}};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2190));var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},4100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.window=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{opened:!1},t=arguments[1];switch(t.type){case r.default.CLEAR_ALL:return{};case r.default.UPDATE_WINDOW:return Object.assign({},e,o({},t.payload));default:return e}};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2190));var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},4145:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(0),i=n.n(a),s=n(16),l=n.n(s),u=n(193),c=n.n(u),f=n(2349),d=n.n(f),p=n(2287),h=n.n(p),m=n(413),y=n.n(m),v=n(2354),g=n.n(v),_=n(2230),E=n.n(_),b="__id__",T="__display__",O="__type__",w=function(e,t){return(e=null===e?Number.MAX_VALUE:e)-(t=null===t?Number.MAX_VALUE:t)},S=function(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")},C=function(e){var t=S(e);return t=(t=(t=t.replace(T,"(.+?)")).replace(b,"(.+?)")).replace(O,"(.+?)"),new RegExp(t,"g")},P=function(e,t,n,r){return e.substring(0,t)+r+e.substring(n)},A=function(e,t,n){if("id"!==t&&"display"!==t&&"type"!==t)throw new Error("parameterName must be 'id', 'display', or 'type'");var r=e.indexOf(T),o=e.indexOf(b),a=e.indexOf(O);if(r<0&&(r=null),o<0&&(o=null),a<0&&(a=null),null===r&&null===o)throw new Error("The markup `"+e+"` must contain at least one of the placeholders `__id__` or `__display__`");if(null===a&&"type"===t)return null;var i=[r,o,a].sort(w);return null===r&&(r=o),null===o&&(o=r),n&&0===function(e){return new RegExp(e.toString()+"|").exec("").length-1}(n)?"type"===t?null:0:"id"===t?i.indexOf(o):"display"===t?i.indexOf(r):"type"===t?null===a?null:i.indexOf(a):void 0},R=function(e,t,n,r,o,a){a=a||C(t);for(var i=A(t,"display",a),s=A(t,"id",a),l=A(t,"type",a),u=void 0,c=0,f=0;null!==(u=a.exec(e));){var d=u[s+1],p=u[i+1],h=null!==l?u[l+1]:null;o&&(p=o(d,p,h));var m=e.substring(c,u.index);n(m,c,f),f+=m.length,r(u[0],u.index,f,d,p,h,c),f+=p.length,c=a.lastIndex}c<e.length&&n(e.substring(c),c,f)},M=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"START",o=arguments[4],a=arguments[5];if(!g()(n))return n;var i=void 0;return R(e,t,function(e,t,r){void 0===i&&r+e.length>=n&&(i=t+n-r)},function(e,t,o,a,s,l,u){void 0===i&&o+s.length>n&&(i="NULL"===r?null:t+("END"===r?e.length:0))},o,a),void 0===i?e.length:i},k=function(e,t,n,r){r=r||C(t);var o=A(t,"id",r),a=A(t,"display",r),i=A(t,"type",r);return e.replace(r,function(){var e=arguments[o+1],t=arguments[a+1],r=null!==i?arguments[i+1]:null;return n&&(t=n(e,t,r)),t})},I=function(e,t,n,r){var o=[];return R(e,t,function(){},function(e,t,n,r,a,i,s){o.push({id:r,display:a,type:i,index:t,plainTextIndex:n})},n,r),o},L=function(e){return c()(e).reduce(function(t,n){return t+e[n].results.length},0)},N=function(e){return c()(e).reduce(function(t,n){return[].concat(t,[{suggestions:e[n].results,descriptor:e[n]}])},[])},j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var x=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=h()(this.props,"style",c()(t.propTypes));return o.a.createElement("li",j({},e,this.props.style),this.renderContent())},t.prototype.renderContent=function(){var e=this.props,t=e.query,n=e.descriptor,r=e.suggestion,o=e.index,a=this.getDisplay(),i=this.renderHighlightedDisplay(a,t);return n.props.renderSuggestion?n.props.renderSuggestion(r,t,i,o):i},t.prototype.getDisplay=function(){var e=this.props.suggestion;if(e instanceof String)return e;var t=e.id,n=e.display;return t&&n?n:t},t.prototype.renderHighlightedDisplay=function(e){var t=this.props,n=t.query,r=t.style,a=e.toLowerCase().indexOf(n.toLowerCase());return-1===a?o.a.createElement("span",r("display"),e):o.a.createElement("span",r("display"),e.substring(0,a),o.a.createElement("b",r("highlight"),e.substring(a,a+n.length)),e.substring(a+n.length))},t}(r.Component);x.propTypes={};var D=Object(_.defaultStyle)({cursor:"pointer"},function(e){return{"&focused":e.focused}})(x);var F,U,q=E()(function(e){var t=e.style,n=t("spinner");return o.a.createElement("div",t,o.a.createElement("div",n,o.a.createElement("div",n(["element","element1"])),o.a.createElement("div",n(["element","element2"])),o.a.createElement("div",n(["element","element3"])),o.a.createElement("div",n(["element","element4"])),o.a.createElement("div",n(["element","element5"]))))}),B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var H=(U=F=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidUpdate=function(){if(this.suggestionsRef&&!(this.suggestionsRef.offsetHeight>=this.suggestionsRef.scrollHeight)&&this.props.scrollFocusedIntoView){var e=this.suggestionsRef.scrollTop,t=this.suggestionsRef.children[this.props.focusIndex].getBoundingClientRect(),n=t.top,r=t.bottom,o=this.suggestionsRef.getBoundingClientRect().top;r=r-o+e,(n=n-o+e)<e?this.suggestionsRef.scrollTop=n:r>this.suggestionsRef.offsetHeight&&(this.suggestionsRef.scrollTop=r-this.suggestionsRef.offsetHeight)}},t.prototype.render=function(){var e=this,t=this.props,n=t.suggestions,r=t.isLoading,a=t.style,i=t.onMouseDown;return 0!==L(n)||r?o.a.createElement("div",B({},a,{onMouseDown:i}),o.a.createElement("ul",B({ref:function(t){e.suggestionsRef=t}},a("list")),this.renderSuggestions()),this.renderLoadingIndicator()):null},t.prototype.renderSuggestions=function(){var e=this;return N(this.props.suggestions).reduce(function(t,n){var r=n.suggestions,o=n.descriptor;return[].concat(t,r.map(function(n,r){return e.renderSuggestion(n,o,t.length+r)}))},[])},t.prototype.renderSuggestion=function(e,t,n){var r=this,a=this.getID(e),i=n===this.props.focusIndex,s=t.mentionDescriptor,l=t.query;return o.a.createElement(D,{style:this.props.style("item"),key:a,id:a,query:l,index:n,descriptor:s,suggestion:e,focused:i,onClick:function(){return r.select(e,t)},onMouseEnter:function(){return r.handleMouseEnter(n)}})},t.prototype.getID=function(e){return e instanceof String?e:e.id},t.prototype.renderLoadingIndicator=function(){if(this.props.isLoading)return o.a.createElement(q,this.props.style("loadingIndicator"))},t.prototype.handleMouseEnter=function(e,t){this.props.onMouseEnter&&this.props.onMouseEnter(e)},t.prototype.select=function(e,t){this.props.onSelect(e,t)},t}(r.Component),F.defaultProps={suggestions:{},onSelect:function(){return null}},U);H.propTypes={};var W=Object(_.defaultStyle)(function(e){var t=e.position;return B({position:"absolute",zIndex:1,backgroundColor:"white",marginTop:14,minWidth:100},t,{list:{margin:0,padding:0,listStyleType:"none"}})})(H),G=Object(_.defaultStyle)({fontWeight:"inherit"})(function(e){var t=e.display,n=e.style;return o.a.createElement("strong",n,t)});G.propTypes={onAdd:i.a.func,onRemove:i.a.func,renderSuggestion:i.a.func,trigger:i.a.oneOfType([i.a.string,i.a.instanceOf(RegExp)]),isLoading:i.a.bool},G.defaultProps={trigger:"@",onAdd:function(){return null},onRemove:function(){return null},renderSuggestion:null,isLoading:!1,appendSpaceOnAdd:!1};var K,z,V=G,Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var J=(z=K=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments));return n.state={lastPosition:{}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.notifyCaretPosition()},t.prototype.componentDidUpdate=function(){this.notifyCaretPosition()},t.prototype.notifyCaretPosition=function(){if(this.caretRef){var e={left:this.caretRef.offsetLeft,top:this.caretRef.offsetTop},t=this.state.lastPosition;y()(t,e)||(this.setState({lastPosition:e}),this.props.onCaretPositionChange(e))}},t.prototype.render=function(){var e=this,t=this.props,n=t.selection,r=t.value,a=t.markup,i=t.displayTransform,s=t.style,l=t.inputStyle,u=t.regex,c=void 0;n.start===n.end&&(c=M(r,a,n.start,"START",i,u));var f=[],d={},p=f,h=0;return R(r,a,function(t,n,r){if(g()(c)&&c>=n&&c<=n+t.length){var o=c-n;p.push(e.renderSubstring(t.substring(0,o),h)),p=[e.renderSubstring(t.substring(o),h)]}else p.push(e.renderSubstring(t,h));h++},function(t,n,r,o,a,i,s){var l=function(e,t){return e.hasOwnProperty(t)?e[t]++:e[t]=0,t+"_"+e[t]}(d,o);p.push(e.getMentionComponentForMatch(o,a,i,l))},i,u),p.push(" "),p!==f&&f.push(this.renderHighlighterCaret(p)),o.a.createElement("div",Y({},s,{style:Y({},l,s.style)}),f)},t.prototype.renderSubstring=function(e,t){return o.a.createElement("span",Y({},this.props.style("substring"),{key:t}),e)},t.prototype.getMentionComponentForMatch=function(e,t,n,a){var i=r.Children.count(this.props.children),s={id:e,display:t,key:a};if(i>1){if(!n)throw new Error("Since multiple Mention components have been passed as children, the markup has to define the __type__ placeholder");var l=null;return r.Children.forEach(this.props.children,function(e){e&&e.props.type===n&&(l=e)}),o.a.cloneElement(l,s)}if(1===i){var u=this.props.children.length?this.props.children[0]:r.Children.only(this.props.children);return o.a.cloneElement(u,s)}return V(s)},t.prototype.renderHighlighterCaret=function(e){var t=this;return o.a.createElement("span",Y({},this.props.style("caret"),{ref:function(e){t.caretRef=e},key:"caret"}),e)},t}(r.Component),K.defaultProps={value:"",inputStyle:{}},z);J.propTypes={};var X,Q,Z,$=Object(_.defaultStyle)({position:"relative",width:"inherit",color:"transparent",overflow:"hidden",whiteSpace:"pre-wrap",wordWrap:"break-word","&singleLine":{whiteSpace:"pre",wordWrap:null},substring:{visibility:"hidden"}},function(e){return{"&singleLine":e.singleLine}})(J),ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var te={TAB:9,RETURN:13,ESC:27,UP:38,DOWN:40},ne=!1,re={singleLine:i.a.bool,allowSpaceInQuery:i.a.bool,markup:i.a.string,value:i.a.string,displayTransform:i.a.func,onKeyDown:i.a.func,onSelect:i.a.func,onBlur:i.a.func,onChange:i.a.func,children:i.a.oneOfType([i.a.element,i.a.arrayOf(i.a.element)]).isRequired},oe=(Q=X=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return Z.call(r),r.suggestions={},r.state={focusIndex:0,selectionStart:null,selectionEnd:null,suggestions:{},caretPosition:null,suggestionsPosition:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this;return o.a.createElement("div",ee({ref:function(t){e.containerRef=t}},this.props.style),this.renderControl(),this.renderSuggestionsOverlay())},t.prototype.componentDidMount=function(){this.updateSuggestionsPosition()},t.prototype.componentDidUpdate=function(){this.updateSuggestionsPosition(),this.state.setSelectionAfterMentionChange&&(this.setState({setSelectionAfterMentionChange:!1}),this.setSelection(this.state.selectionStart,this.state.selectionEnd))},t}(o.a.Component),X.defaultProps={markup:"@[__display__](__id__)",singleLine:!1,displayTransform:function(e,t,n){return t},onKeyDown:function(){return null},onSelect:function(){return null},onBlur:function(){return null}},Z=function(){var e=this;this.getInputProps=function(t){var n=e.props,r=n.readOnly,o=n.disabled,a=n.style,i=h()(e.props,"style",c()(re));return ee({},i,a("input"),{value:e.getPlainText()},!r&&!o&&{onChange:e.handleChange,onSelect:e.handleSelect,onKeyDown:e.handleKeyDown,onBlur:e.handleBlur,onCompositionStart:e.handleCompositionStart,onCompositionEnd:e.handleCompositionEnd,onScroll:e.updateHighlighterScroll})},this.renderControl=function(){var t=e.props,n=t.singleLine,r=t.style,a=e.getInputProps(!n);return o.a.createElement("div",r("control"),e.renderHighlighter(a.style),n?e.renderInput(a):e.renderTextarea(a))},this.renderInput=function(t){return o.a.createElement("input",ee({type:"text",ref:function(t){e.inputRef=t}},t))},this.renderTextarea=function(t){return o.a.createElement("textarea",ee({ref:function(t){e.inputRef=t}},t))},this.renderSuggestionsOverlay=function(){return g()(e.state.selectionStart)?o.a.createElement(W,{style:e.props.style("suggestions"),position:e.state.suggestionsPosition,focusIndex:e.state.focusIndex,scrollFocusedIntoView:e.state.scrollFocusedIntoView,ref:function(t){e.suggestionsRef=t},suggestions:e.state.suggestions,onSelect:e.addMention,onMouseDown:e.handleSuggestionsMouseDown,onMouseEnter:function(t){return e.setState({focusIndex:t,scrollFocusedIntoView:!1})},isLoading:e.isLoading()}):null},this.renderHighlighter=function(t){var n=e.state,r=n.selectionStart,a=n.selectionEnd,i=e.props,s=i.markup,l=i.displayTransform,u=i.singleLine,c=i.children,f=i.value,d=i.style,p=i.regex;return o.a.createElement($,{ref:function(t){e.highlighterRef=t},style:d("highlighter"),inputStyle:t,value:f,markup:s,displayTransform:l,singleLine:u,selection:{start:r,end:a},onCaretPositionChange:function(t){return e.setState({caretPosition:t})},regex:p},c)},this.getPlainText=function(){return k(e.props.value||"",e.props.markup,e.props.displayTransform,e.props.regex)},this.executeOnChange=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a,i;return e.props.onChange?(a=e.props).onChange.apply(a,[t].concat(r)):e.props.valueLink?(i=e.props.valueLink).requestChange.apply(i,[t.target.value].concat(r)):void 0},this.handleChange=function(t){if((document.activeElement&&document.activeElement.contentDocument||document).activeElement===t.target){var n=e.props.value||"",r=e.props,o=r.markup,a=r.displayTransform,i=r.regex,s=t.target.value,l=function(e,t,n,r,o,a,i,s){var l=k(e,t,i,s),u=l.length-n.length;"undefined"===r&&(r=a+u),"undefined"===o&&(o=r),r===o&&o===a&&l.length===n.length&&(r-=1);var c=n.slice(r,a),f=Math.min(r,a),d=o;r===a&&(d=Math.max(o,r+u));var p=M(e,t,f,"START",i,s),h=M(e,t,d,"END",i,s),m=M(e,t,f,"NULL",i,s),y=M(e,t,d,"NULL",i,s),v=null===m||null===y,g=P(e,p,h,c);if(!v){var _=k(g,t,i,s);if(_!==n){for(f=0;n[f]===_[f];)f++;c=n.slice(f,a),d=l.lastIndexOf(n.substring(a)),p=M(e,t,f,"START",i,s),h=M(e,t,d,"END",i,s),g=P(e,p,h,c)}}return g}(n,o,s,e.state.selectionStart,e.state.selectionEnd,t.target.selectionEnd,a,i);s=k(l,o,a,i);var u=t.target.selectionStart,c=t.target.selectionEnd,f=!1,d=function(e,t,n,r,o){var a=n,i=!1;if(R(e,t,function(){},function(e,t,r,o,s,l,u){r<=n&&r+s.length>n&&(a=r,i=!0)},r,o),i)return a}(n,o,u,a,i);void 0!==d&&e.state.selectionEnd>d&&(c=u=d,f=!0),e.setState({selectionStart:u,selectionEnd:c,setSelectionAfterMentionChange:f});var p=I(l,o,a,i),h={target:{value:l}};e.executeOnChange(h,l,s,p)}},this.handleSelect=function(t){if(!ne){e.setState({selectionStart:t.target.selectionStart,selectionEnd:t.target.selectionEnd});var n=e.inputRef;t.target.selectionStart===t.target.selectionEnd?e.updateMentionsQueries(n.value,t.target.selectionStart):e.clearSuggestions(),e.updateHighlighterScroll(),e.props.onSelect(t)}},this.handleKeyDown=function(t){var n=L(e.state.suggestions),r=e.suggestionsRef;if(0!==n&&r)switch(d()(te).indexOf(t.keyCode)>=0&&t.preventDefault(),t.keyCode){case te.ESC:return void e.clearSuggestions();case te.DOWN:return void e.shiftFocus(1);case te.UP:return void e.shiftFocus(-1);case te.RETURN:case te.TAB:return void e.selectFocused();default:return}else e.props.onKeyDown(t)},this.shiftFocus=function(t){var n=L(e.state.suggestions);e.setState({focusIndex:(n+e.state.focusIndex+t)%n,scrollFocusedIntoView:!0})},this.selectFocused=function(){var t=e.state,n=function(e,t){return N(e).reduce(function(e,t){var n=t.suggestions,r=t.descriptor;return[].concat(e,n.map(function(e){return{suggestion:e,descriptor:r}}))},[])[t]}(t.suggestions,t.focusIndex),r=n.suggestion,o=n.descriptor;e.addMention(r,o),e.setState({focusIndex:0})},this.handleBlur=function(t){var n=e._suggestionsMouseDown;e._suggestionsMouseDown=!1,n||e.setState({selectionStart:null,selectionEnd:null}),window.setTimeout(function(){e.updateHighlighterScroll()},1),e.props.onBlur(t,n)},this.handleSuggestionsMouseDown=function(t){e._suggestionsMouseDown=!0},this.updateSuggestionsPosition=function(){var t=e.state.caretPosition;if(t&&e.suggestionsRef){var n=l.a.findDOMNode(e.suggestionsRef),r=l.a.findDOMNode(e.highlighterRef);if(n){var o=t.left-r.scrollLeft,a={};o+n.offsetWidth>e.containerRef.offsetWidth?a.right=0:a.left=o,a.top=t.top-r.scrollTop,y()(a,e.state.suggestionsPosition)||e.setState({suggestionsPosition:a})}}},this.updateHighlighterScroll=function(){if(e.inputRef&&e.highlighterRef){var t=e.inputRef,n=l.a.findDOMNode(e.highlighterRef);n.scrollLeft=t.scrollLeft,n.scrollTop=t.scrollTop,n.height=t.height}},this.handleCompositionStart=function(){ne=!0},this.handleCompositionEnd=function(){ne=!1},this.setSelection=function(t,n){if(null!==t&&null!==n){var r=e.inputRef;if(r.setSelectionRange)r.setSelectionRange(t,n);else if(r.createTextRange){var o=r.createTextRange();o.collapse(!0),o.moveEnd("character",n),o.moveStart("character",t),o.select()}}},this.updateMentionsQueries=function(t,n){e._queryId++,e.suggestions={},e.setState({suggestions:{}});var r=e.props.value||"",a=e.props,i=a.markup,s=a.displayTransform,l=a.children,u=a.regex,c=M(r,i,n,"NULL",s,u);if(null!==c){var f=function(e,t,n,r){var o=I(e,t,n,r),a=o[o.length-1];return a?a.plainTextIndex+a.display.length:0}(r.substring(0,c),i,s,u),d=t.substring(f,n);o.a.Children.forEach(l,function(n){if(n){var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e instanceof RegExp)return e;var n=t.allowSpaceInQuery,r=S(e);return new RegExp("(?:^|\\s)("+r+"([^"+(n?"":"\\s")+r+"]*))$")}(n.props.trigger,e.props),o=d.match(r);if(o){var a=f+d.indexOf(o[1],o.index);e.queryData(o[2],n,a,a+o[1].length,t)}}})}},this.clearSuggestions=function(){e._queryId++,e.suggestions={},e.setState({suggestions:{},focusIndex:0})},this.queryData=function(t,n,r,o,a){var i=function(e){return e instanceof Array?function(t,n){for(var r=[],o=0,a=e.length;o<a;++o)(e[o].display||e[o].id).toLowerCase().indexOf(t.toLowerCase())>=0&&r.push(e[o]);return r}:e}(n.props.data)(t,e.updateSuggestions.bind(null,e._queryId,n,t,r,o,a));i instanceof Array&&e.updateSuggestions(e._queryId,n,t,r,o,a,i)},this.updateSuggestions=function(t,n,r,o,a,i,s){var l;if(t===e._queryId){e.suggestions=ee({},e.suggestions,((l={})[n.props.type]={query:r,mentionDescriptor:n,querySequenceStart:o,querySequenceEnd:a,results:s,plainTextValue:i},l));var u=e.state.focusIndex,c=L(e.suggestions);e.setState({suggestions:e.suggestions,focusIndex:u>=c?Math.max(c-1,0):u})}},this.addMention=function(t,n){var r=n.mentionDescriptor,o=n.querySequenceStart,a=n.querySequenceEnd,i=n.plainTextValue,s=e.props.value||"",l=e.props,u=l.markup,c=l.displayTransform,f=l.regex,d=M(s,u,o,"START",c,f),p=d+a-o,h=function(e,t,n,r){var o=e.replace(b,t);return o=(o=o.replace(T,n)).replace(O,r)}(u,t.id,t.display,r.props.type);r.props.appendSpaceOnAdd&&(h+=" ");var m=P(s,d,p,h);e.inputRef.focus();var y=c(t.id,t.display,r.props.type);r.props.appendSpaceOnAdd&&(y+=" ");var v=o+y.length;e.setState({selectionStart:v,selectionEnd:v,setSelectionAfterMentionChange:!0});var g={target:{value:m}},_=I(m,u,c,f),E=P(i,o,a,y);e.executeOnChange(g,m,E,_);var w=r.props.onAdd;w&&w(t.id,t.display),e.clearSuggestions()},this.isLoading=function(){var t=!1;return o.a.Children.forEach(e.props.children,function(e){t=t||e&&e.props.isLoading}),t},this._queryId=0},Q);oe.propTypes={};var ae="undefined"!=typeof navigator&&/iPhone|iPad|iPod/i.test(navigator.userAgent),ie=Object(_.defaultStyle)({position:"relative",overflowY:"visible",input:{display:"block",position:"absolute",top:0,boxSizing:"border-box",backgroundColor:"transparent",width:"inherit",fontFamily:"inherit",fontSize:"inherit"},"&multiLine":{input:ee({width:"100%",height:"100%",bottom:0,overflow:"hidden",resize:"none"},ae?{marginTop:1,marginLeft:-3}:null)}},function(e){var t=e.singleLine;return{"&singleLine":t,"&multiLine":!t}})(oe);n.d(t,"MentionsInput",function(){return ie}),n.d(t,"Mention",function(){return V})}}]);
//# sourceMappingURL=vendors~ureact-uchat-ui.a2f2e.js.map